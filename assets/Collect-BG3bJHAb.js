import{_ as O,r as C,O as G,x as J,z as Q,y as R,c as y,w as l,a as c,u as H,o as r,b as o,d as s,A as g,C as W,J as D,K as B,B as u,f as m,D as X,e as w,M as b,G as Y,F as Z}from"./index-DEQTe5qc.js";import{M as ee}from"./Input-BUYHYn7u.js";import{a as se}from"./sound-BznpVhuQ.js";import{c as te,a as le}from"./collect-C1nBqbAY.js";import"./request-DIp7hUCV.js";import"./token-0UZktHLV.js";const oe={class:"action-bar"},ae={key:0},ne=["onClick"],ie={style:{color:"#6b7280"}},ce={style:{display:"flex","flex-direction":"row",gap:"10px"}},re={style:{"font-weight":"520"}},de={style:{"padding-top":"3%"}},pe={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},ue={style:{color:"#71717a"}},_e={class:"audio-samples"},me={class:"samples-content"},fe={class:"samples-index"},ve={class:"sample-btn"},ye=["src"],ge=["src"],he=["onClick"],ke=["onClick"],Ce={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},Ie={class:"btns"},we={__name:"Collect",setup(be){const T=C("#fafafa"),x=H(),N=t=>{x.push({path:"/detail",query:{id:t}})};function S(t){I.value=t}const _=C([{voiceId:1,voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"曲志明",voiceDescription:"例面求上。果圆相称斗织是。开电年。同利算术极七等被来。问广十世。",voiceCreationTime:new Date(2025,1,9,19,11),voiceIsCollected:!0,voiceSamples:[{sampleId:83,sampleIsPlaying:!1,sampleTitle:"拨伟大快但是脊梁",sampleText:"consectetur",sampleUrl:se}]}]),I=C(""),$=C("搜索声音..."),U=G(()=>_.value.filter(t=>t.voiceName.includes(I.value))),E=t=>new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(t)),h=J({}),P=(t,e)=>{const f=_.value.find(a=>a.voiceId===t);if(!f)return;const d=f.voiceSamples[e],v=`${t}-${e}`;if(h[v]){const a=h[v];d.sampleIsPlaying?a.pause():(Object.values(h).forEach(p=>p.pause()),a.play())}else{const a=new Audio(d.sampleUrl);h[v]=a,a.addEventListener("ended",()=>{d.sampleIsPlaying=!1}),a.play()}d.sampleIsPlaying=!d.sampleIsPlaying,f.voiceSamples.forEach((a,p)=>{p!==e&&(a.sampleIsPlaying=!1)})},M=t=>{x.push({path:"/explanation",query:{id:t}})};Q(async()=>{let t=await te();_.value=t.data});const z=t=>{t.voiceIsCollected=!t.voiceIsCollected};return R(async()=>{const t=[];if(_.value.length>0&&(_.value.forEach(e=>{e.voiceIsCollected||t.push(e.voiceId)}),t.length>0)){const e=t.join(",");await le({ids:e})}}),(t,e)=>{const f=c("el-header"),d=c("el-empty"),v=c("el-image"),a=c("el-col"),p=c("el-icon"),V=c("el-tag"),j=c("el-card"),q=c("el-popover"),F=c("el-row"),A=c("el-main"),K=c("el-container");return r(),y(K,{class:"sound-manager"},{default:l(()=>[o(f,{class:"display"},{default:l(()=>[e[0]||(e[0]=s("h1",{class:"title"},"我的收藏",-1)),s("div",oe,[o(ee,{message:I.value,placeholder:$.value,color:T.value,class:"search-input","onUpdate:message":S},null,8,["message","placeholder","color"])])]),_:1}),o(A,null,{default:l(()=>[_.value.length===0?(r(),g("div",ae,[o(d,{description:"暂无数据"})])):W("",!0),(r(!0),g(D,null,B(U.value,n=>(r(),y(F,{key:n.voiceId,class:"voice-item"},{default:l(()=>[o(a,{span:2},{default:l(()=>[o(v,{style:{width:"70px",height:"70px","border-radius":"10px"},src:n.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1024),o(a,{span:7},{default:l(()=>[s("div",{class:"voice-name",onClick:i=>N(n.voiceId)},u(n.voiceName),9,ne),s("div",ie,u(n.voiceDescription),1)]),_:2},1024),o(a,{span:4},{default:l(()=>[e[1]||(e[1]=s("div",{class:"item"},"创建时间",-1)),s("div",ce,[o(p,{size:"20",style:{color:"#6b7280"}},{default:l(()=>[o(m(X))]),_:1}),s("span",re,u(E(n.voiceCreationTime)),1)])]),_:2},1024),o(a,{span:3},{default:l(()=>[e[3]||(e[3]=s("div",{class:"item"},"状态",-1)),s("div",de,[o(V,{type:"success",round:"",effect:"dark",style:{width:"50px","font-weight":"1000"}},{default:l(()=>e[2]||(e[2]=[w("成功")])),_:1})])]),_:1}),o(a,{span:4},{default:l(()=>[e[7]||(e[7]=s("div",{class:"item"},"音频示例",-1)),s("div",null,[o(q,{placement:"bottom",width:400,trigger:"click"},{reference:l(()=>[s("div",pe,[e[4]||(e[4]=s("div",{class:"logo"},null,-1)),s("span",ue,u(n.voiceSamples.length)+" 音频示例",1)])]),default:l(()=>[s("div",_e,[e[6]||(e[6]=s("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(r(!0),g(D,null,B(n.voiceSamples,(i,k)=>(r(),y(j,{key:k,class:"samples-item",shadow:"never"},{default:l(()=>[s("div",me,[s("div",null,[s("span",fe,u(k+1),1),s("span",null,u(i.sampleTitle),1)]),s("div",ve,[s("audio",null,[s("source",{src:i.sampleUrl,type:"audio/mp4"},null,8,ye),s("source",{src:i.sampleUrl,type:"audio/x-m4a"},null,8,ge),e[5]||(e[5]=w(" 浏览器不支持音频播放 "))]),i.sampleIsPlaying?(r(),g("div",{key:1,class:"on",onClick:L=>{P(n.voiceId,k),i.sampleIsPlaying=!1}},null,8,ke)):(r(),g("div",{key:0,class:"close",onClick:L=>{P(n.voiceId,k),i.sampleIsPlaying=!0}},null,8,he))])]),s("div",Ce,u(i.sampleText),1)]),_:2},1024))),128))])]),_:2},1024)])]),_:2},1024),o(a,{span:4},{default:l(()=>[s("div",Ie,[o(m(b),{size:"large",color:"black",onClick:i=>M(n.voiceId)},{default:l(()=>e[8]||(e[8]=[w("使用声音")])),_:2},1032,["onClick"]),n.voiceIsCollected?(r(),y(m(b),{key:0,size:"large",class:"btn",onClick:i=>z(n)},{default:l(()=>[o(p,{size:"25",color:"black"},{default:l(()=>[o(m(Y))]),_:1})]),_:2},1032,["onClick"])):(r(),y(m(b),{key:1,size:"large",class:"btn",onClick:i=>z(n)},{default:l(()=>[o(p,{size:"25",color:"black"},{default:l(()=>[o(m(Z))]),_:1})]),_:2},1032,["onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},Ne=O(we,[["__scopeId","data-v-33772d6a"]]);export{Ne as default};
