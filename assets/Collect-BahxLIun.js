import{_ as H,r as k,K as O,p as R,c as v,w as t,a as c,u as W,o as r,b as o,d as e,y,A as G,H as T,I as D,z as u,f as _,B as J,e as b,L as w,D as Q,C as X}from"./index-V4Sj6aIb.js";import{M as Y}from"./Input-anwuq2KL.js";import{a as Z}from"./sound-BznpVhuQ.js";import{u as ee}from"./token-BOs4aFJg.js";const se={class:"action-bar"},te={key:0},oe=["onClick"],le={style:{color:"#6b7280"}},ae={style:{display:"flex","flex-direction":"row",gap:"10px"}},ne={style:{"font-weight":"520"}},ie={style:{"padding-top":"3%"}},ce={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},re={style:{color:"#71717a"}},de={class:"audio-samples"},pe={class:"samples-content"},ue={class:"samples-index"},_e={class:"sample-btn"},me=["src"],fe=["src"],ve=["onClick"],ye=["onClick"],ge={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},he={class:"btns"},ke={__name:"Collect",setup(Ce){const N=k("#f5f5f5"),x=W(),$=a=>{x.push({path:"/detail",query:{id:a}})};function B(a){I.value=a}const C=k([{voiceId:1,voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"曲志明",voiceDescription:"例面求上。果圆相称斗织是。开电年。同利算术极七等被来。问广十世。",voiceCreationTime:new Date(2025,1,9,19,11),voiceIsCollected:!0,voiceSamples:[{sampleId:83,sampleIsPlaying:!1,sampleTitle:"拨伟大快但是脊梁",sampleText:"consectetur",sampleUrl:Z}]}]),I=k(""),S=k("搜索声音..."),U=O(()=>C.value.filter(a=>a.voiceName.includes(I.value))),V=a=>new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a)),g=R({}),P=(a,s)=>{const m=C.value.find(l=>l.voiceId===a);if(!m)return;const d=m.voiceSamples[s],f=`${a}-${s}`;if(g[f]){const l=g[f];d.sampleIsPlaying?l.pause():(Object.values(g).forEach(p=>p.pause()),l.play())}else{const l=new Audio(d.sampleUrl);g[f]=l,l.addEventListener("ended",()=>{d.sampleIsPlaying=!1}),l.play()}d.sampleIsPlaying=!d.sampleIsPlaying,m.voiceSamples.forEach((l,p)=>{p!==s&&(l.sampleIsPlaying=!1)})},E=a=>{x.push({path:"/explanation",query:{id:a}})};ee();const z=a=>{a.voiceIsCollected=!a.voiceIsCollected};return(a,s)=>{const m=c("el-header"),d=c("el-empty"),f=c("el-image"),l=c("el-col"),p=c("el-icon"),j=c("el-tag"),M=c("el-card"),q=c("el-popover"),L=c("el-row"),A=c("el-main"),F=c("el-container");return r(),v(F,{class:"sound-manager"},{default:t(()=>[o(m,{class:"display"},{default:t(()=>[s[0]||(s[0]=e("h1",{class:"title"},"我的收藏",-1)),e("div",se,[o(Y,{message:I.value,placeholder:S.value,color:N.value,class:"search-input","onUpdate:message":B},null,8,["message","placeholder","color"])])]),_:1}),o(A,null,{default:t(()=>[C.value.length===0?(r(),y("div",te,[o(d,{description:"暂无数据"})])):G("",!0),(r(!0),y(T,null,D(U.value,n=>(r(),v(L,{key:n.voiceId,class:"voice-item"},{default:t(()=>[o(l,{span:2},{default:t(()=>[o(f,{style:{width:"70px",height:"70px","border-radius":"10px"},src:n.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1024),o(l,{span:7},{default:t(()=>[e("div",{class:"voice-name",onClick:i=>$(n.voiceId)},u(n.voiceName),9,oe),e("div",le,u(n.voiceDescription),1)]),_:2},1024),o(l,{span:4},{default:t(()=>[s[1]||(s[1]=e("div",{class:"item"},"创建时间",-1)),e("div",ae,[o(p,{size:"20",style:{color:"#6b7280"}},{default:t(()=>[o(_(J))]),_:1}),e("span",ne,u(V(n.voiceCreationTime)),1)])]),_:2},1024),o(l,{span:3},{default:t(()=>[s[3]||(s[3]=e("div",{class:"item"},"状态",-1)),e("div",ie,[o(j,{type:"success",round:"",effect:"dark",style:{width:"50px","font-weight":"1000"}},{default:t(()=>s[2]||(s[2]=[b("成功")])),_:1})])]),_:1}),o(l,{span:4},{default:t(()=>[s[7]||(s[7]=e("div",{class:"item"},"音频示例",-1)),e("div",null,[o(q,{placement:"bottom",width:400,trigger:"click"},{reference:t(()=>[e("div",ce,[s[4]||(s[4]=e("div",{class:"logo"},null,-1)),e("span",re,u(n.voiceSamples.length)+" 音频示例",1)])]),default:t(()=>[e("div",de,[s[6]||(s[6]=e("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(r(!0),y(T,null,D(n.voiceSamples,(i,h)=>(r(),v(M,{key:h,class:"samples-item",shadow:"never"},{default:t(()=>[e("div",pe,[e("div",null,[e("span",ue,u(h+1),1),e("span",null,u(i.sampleTitle),1)]),e("div",_e,[e("audio",null,[e("source",{src:i.sampleUrl,type:"audio/mp4"},null,8,me),e("source",{src:i.sampleUrl,type:"audio/x-m4a"},null,8,fe),s[5]||(s[5]=b(" 浏览器不支持音频播放 "))]),i.sampleIsPlaying?(r(),y("div",{key:1,class:"on",onClick:K=>{P(n.voiceId,h),i.sampleIsPlaying=!1}},null,8,ye)):(r(),y("div",{key:0,class:"close",onClick:K=>{P(n.voiceId,h),i.sampleIsPlaying=!0}},null,8,ve))])]),e("div",ge,u(i.sampleText),1)]),_:2},1024))),128))])]),_:2},1024)])]),_:2},1024),o(l,{span:4},{default:t(()=>[e("div",he,[o(_(w),{size:"large",color:"black",onClick:i=>E(n.voiceId)},{default:t(()=>s[8]||(s[8]=[b("使用声音")])),_:2},1032,["onClick"]),n.voiceIsCollected?(r(),v(_(w),{key:0,size:"large",class:"btn",onClick:i=>z(n)},{default:t(()=>[o(p,{size:"25",color:"black"},{default:t(()=>[o(_(Q))]),_:1})]),_:2},1032,["onClick"])):(r(),v(_(w),{key:1,size:"large",class:"btn",onClick:i=>z(n)},{default:t(()=>[o(p,{size:"25",color:"black"},{default:t(()=>[o(_(X))]),_:1})]),_:2},1032,["onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},Pe=H(ke,[["__scopeId","data-v-961d6d5a"]]);export{Pe as default};
