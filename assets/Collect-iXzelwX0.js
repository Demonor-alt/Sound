import{_ as L,r as k,J as G,p as H,c as v,w as t,a as c,u as J,o as r,b as l,d as e,x as y,z as O,G as z,H as T,y as u,f as _,A as R,e as b,K as w,C as W,B as Q}from"./index-CC9N0pV2.js";import{M as X}from"./Input-C3Zwwfa4.js";import{a as Y}from"./sound-BznpVhuQ.js";import{u as Z}from"./token-DKB-jNYn.js";const ee={class:"action-bar"},se={key:0},te=["onClick"],le={style:{color:"#6b7280"}},oe={style:{display:"flex","flex-direction":"row",gap:"10px"}},ae={style:{"font-weight":"520"}},ne={style:{"padding-top":"3%"}},ie={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},ce={style:{color:"#71717a"}},re={class:"audio-samples"},de={class:"samples-content"},pe={class:"samples-index"},ue={class:"sample-btn"},_e=["src"],me=["src"],fe=["onClick"],ve=["onClick"],ye={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},ge={class:"btns"},he={__name:"Collect",setup(ke){const D=k("#f5f5f5"),x=J(),N=a=>{x.push({path:"/detail",query:{id:a}})};function $(a){I.value=a}const C=k([{voiceId:1,voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"曲志明",voiceDescription:"例面求上。果圆相称斗织是。开电年。同利算术极七等被来。问广十世。",voiceCreationTime:new Date(2025,1,9,19,11),voiceIsCollected:!0,voiceSamples:[{sampleId:83,sampleIsPlaying:!1,sampleTitle:"拨伟大快但是脊梁",sampleText:"consectetur",sampleUrl:Y}]}]),I=k(""),B=k("搜索声音..."),S=G(()=>C.value.filter(a=>a.voiceName.includes(I.value))),U=a=>new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a)),g=H({}),P=(a,s)=>{const m=C.value.find(o=>o.voiceId===a);if(!m)return;const d=m.voiceSamples[s],f=`${a}-${s}`;if(g[f]){const o=g[f];d.sampleIsPlaying?o.pause():(Object.values(g).forEach(p=>p.pause()),o.play())}else{const o=new Audio(d.sampleUrl);g[f]=o,o.addEventListener("ended",()=>{d.sampleIsPlaying=!1}),o.play()}d.sampleIsPlaying=!d.sampleIsPlaying,m.voiceSamples.forEach((o,p)=>{p!==s&&(o.sampleIsPlaying=!1)})},V=a=>{x.push({path:"/explanation",query:{id:a}})};return Z(),(a,s)=>{const m=c("el-header"),d=c("el-empty"),f=c("el-image"),o=c("el-col"),p=c("el-icon"),E=c("el-tag"),j=c("el-card"),M=c("el-popover"),q=c("el-row"),A=c("el-main"),F=c("el-container");return r(),v(F,{class:"sound-manager"},{default:t(()=>[l(m,{class:"display"},{default:t(()=>[s[0]||(s[0]=e("h1",{class:"title"},"我的收藏",-1)),e("div",ee,[l(X,{message:I.value,placeholder:B.value,color:D.value,class:"search-input","onUpdate:message":$},null,8,["message","placeholder","color"])])]),_:1}),l(A,null,{default:t(()=>[C.value.length===0?(r(),y("div",se,[l(d,{description:"暂无数据"})])):O("",!0),(r(!0),y(z,null,T(S.value,n=>(r(),v(q,{key:n.voiceId,class:"voice-item"},{default:t(()=>[l(o,{span:2},{default:t(()=>[l(f,{style:{width:"70px",height:"70px","border-radius":"10px"},src:n.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1024),l(o,{span:7},{default:t(()=>[e("div",{class:"voice-name",onClick:i=>N(n.voiceId)},u(n.voiceName),9,te),e("div",le,u(n.voiceDescription),1)]),_:2},1024),l(o,{span:4},{default:t(()=>[s[1]||(s[1]=e("div",{class:"item"},"创建时间",-1)),e("div",oe,[l(p,{size:"20",style:{color:"#6b7280"}},{default:t(()=>[l(_(R))]),_:1}),e("span",ae,u(U(n.voiceCreationTime)),1)])]),_:2},1024),l(o,{span:3},{default:t(()=>[s[3]||(s[3]=e("div",{class:"item"},"状态",-1)),e("div",ne,[l(E,{type:"success",round:"",effect:"dark",style:{width:"50px","font-weight":"1000"}},{default:t(()=>s[2]||(s[2]=[b("成功")])),_:1})])]),_:1}),l(o,{span:4},{default:t(()=>[s[7]||(s[7]=e("div",{class:"item"},"音频示例",-1)),e("div",null,[l(M,{placement:"bottom",width:400,trigger:"click"},{reference:t(()=>[e("div",ie,[s[4]||(s[4]=e("div",{class:"logo"},null,-1)),e("span",ce,u(n.voiceSamples.length)+" 音频示例",1)])]),default:t(()=>[e("div",re,[s[6]||(s[6]=e("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(r(!0),y(z,null,T(n.voiceSamples,(i,h)=>(r(),v(j,{key:h,class:"samples-item",shadow:"never"},{default:t(()=>[e("div",de,[e("div",null,[e("span",pe,u(h+1),1),e("span",null,u(i.sampleTitle),1)]),e("div",ue,[e("audio",null,[e("source",{src:i.sampleUrl,type:"audio/mp4"},null,8,_e),e("source",{src:i.sampleUrl,type:"audio/x-m4a"},null,8,me),s[5]||(s[5]=b(" 浏览器不支持音频播放 "))]),i.sampleIsPlaying?(r(),y("div",{key:1,class:"on",onClick:K=>{P(n.voiceId,h),i.sampleIsPlaying=!1}},null,8,ve)):(r(),y("div",{key:0,class:"close",onClick:K=>{P(n.voiceId,h),i.sampleIsPlaying=!0}},null,8,fe))])]),e("div",ye,u(i.sampleText),1)]),_:2},1024))),128))])]),_:2},1024)])]),_:2},1024),l(o,{span:4},{default:t(()=>[e("div",ge,[l(_(w),{size:"large",color:"black",onClick:i=>V(n.voiceId)},{default:t(()=>s[8]||(s[8]=[b("使用声音")])),_:2},1032,["onClick"]),n.voiceIsCollected?(r(),v(_(w),{key:0,size:"large",class:"btn",onClick:i=>a.toggleCollect(n)},{default:t(()=>[l(p,{size:"25",color:"black"},{default:t(()=>[l(_(W))]),_:1})]),_:2},1032,["onClick"])):(r(),v(_(w),{key:1,size:"large",class:"btn",onClick:i=>a.toggleCollect(n)},{default:t(()=>[l(p,{size:"25",color:"black"},{default:t(()=>[l(_(Q))]),_:1})]),_:2},1032,["onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},xe=L(he,[["__scopeId","data-v-0983fd6d"]]);export{xe as default};
