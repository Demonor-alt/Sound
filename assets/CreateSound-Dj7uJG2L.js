import{_ as K,r as l,a as v,y as n,o,d as s,A,b as a,H as Y,I as ee,c as G,w as u,z,e as p,f as g,B as Ee,Q as Ge,x as pe,R as Oe,S as qe,T as ie,U as ce,K as te,V as Fe,n as He,p as je,W as We,u as Ye,N as re,X as ue,Y as Ke,Z as Qe}from"./index-lYO7vZ5u.js";import{t as Xe}from"./time-tY07ncrd.js";import{u as ve}from"./token-F3cptA7n.js";import{M as q}from"./Input-BTdEWqUf.js";import{c as Ze,d as Je,e as et,f as tt,g as st}from"./mybank-CsW-0BDt.js";import{i as at}from"./request-BstXfnQ0.js";const ot={key:0},lt={style:{"font-size":"18px","font-weight":"800","padding-bottom":"10px"}},nt={class:"tag"},it={style:{display:"flex","flex-direction":"row",gap:"10px"}},ct={style:{"font-weight":"520",color:"#71717a"}},rt={__name:"Recent",setup(S){const h=l([{voiceId:70,voiceImage:"https://loremflickr.com/400/400?lock=567532027855895",voiceName:"曲志明",voiceDescription:"例面求上。果圆相称斗织是。开电年。同利算术极七等被来。问广十世。",voiceCreationTime:"2024-04-22 00:28:31",voiceIsCollected:!0,voiceSamples:[{sampleId:83,sampleIsPlaying:!1,sampleTitle:"拨伟大快但是脊梁",sampleText:"consectetur",sampleUrl:"https://nutritious-designation.com/"}]}]);return ve(),(T,m)=>{const x=v("el-empty"),y=v("el-image"),w=v("el-col"),M=v("el-tag"),c=v("el-icon"),P=v("el-row");return o(),n(Y,null,[m[2]||(m[2]=s("h2",null,"最近活动",-1)),h.value.length===0?(o(),n("div",ot,[a(x,{description:"暂无数据"})])):A("",!0),(o(!0),n(Y,null,ee(h.value,I=>(o(),G(P,{key:I.voiceId,class:"voice-item"},{default:u(()=>[a(w,{span:5,style:{display:"flex","align-items":"center","justify-content":"center"}},{default:u(()=>[a(y,{style:{width:"75px",height:"75px","border-radius":"10px"},src:I.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1024),a(w,{span:19},{default:u(()=>[s("div",lt,z(I.voiceName),1),s("div",nt,[a(M,{type:"success",round:"",effect:"dark",style:{width:"50px","font-weight":"1000"}},{default:u(()=>m[0]||(m[0]=[p("成功")])),_:1}),m[1]||(m[1]=s("div",{class:"dot"},null,-1)),s("div",it,[a(c,{size:"20",style:{color:"#6b7280"}},{default:u(()=>[a(g(Ee))]),_:1}),s("span",ct,z(g(Xe)(I.voiceCreationTime)),1)])])]),_:2},1024)]),_:2},1024))),128))],64)}}},ut=K(rt,[["__scopeId","data-v-a9c7d786"]]),dt="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1739777896067'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='20116'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M899.117%20526.883a30.04%2030.04%200%200%201-3.976%205.365%2029.922%2029.922%200%200%201-1.548%201.58l-0.2%200.186a30.087%2030.087%200%200%201-5.472%204.057L165.858%20955.094c-0.047%200.027-0.1%200.046-0.143%200.073q-1.155%200.659-2.37%201.214c-0.145%200.066-0.289%200.132-0.434%200.2q-1.084%200.476-2.212%200.864c-0.238%200.083-0.475%200.165-0.713%200.241-0.645%200.205-1.3%200.386-1.963%200.548-0.348%200.085-0.7%200.168-1.044%200.24-0.56%200.116-1.126%200.213-1.7%200.3q-1.416%200.21-2.833%200.283h-0.016a29.977%2029.977%200%200%201-4.5-0.107c-0.243-0.024-0.483-0.057-0.723-0.086a30.513%2030.513%200%200%201-2.109-0.331%2031.377%2031.377%200%200%201-1.021-0.222c-0.6-0.139-1.191-0.293-1.78-0.469-0.331-0.1-0.658-0.2-0.984-0.315q-0.921-0.309-1.82-0.676c-0.241-0.1-0.479-0.2-0.716-0.307q-1.047-0.461-2.055-1c-0.108-0.058-0.215-0.118-0.322-0.177a29.753%2029.753%200%200%201-8.652-7.174l-0.071-0.089a29.873%2029.873%200%200%201-1.59-2.124c-0.3-0.439-0.589-0.885-0.866-1.34-0.108-0.179-0.233-0.341-0.338-0.524a29.859%2029.859%200%200%201-4-16V95.886a30%2030%200%200%201%2044.981-26.984l722.265%20417a30%2030%200%200%201%2010.988%2040.981zM180.89%20877.13l632.327-365.2L180.89%20146.856V877.13z'%20fill='%23333333'%20p-id='20117'%3e%3c/path%3e%3c/svg%3e",pt="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1739697337704'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='6776'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M384%20256a42.666667%2042.666667%200%200%201%2042.666667%2042.666667v426.666666a42.666667%2042.666667%200%201%201-85.333334%200V298.666667a42.666667%2042.666667%200%200%201%2042.666667-42.666667z%20m256%200a42.666667%2042.666667%200%200%201%2042.666667%2042.666667v426.666666a42.666667%2042.666667%200%201%201-85.333334%200V298.666667a42.666667%2042.666667%200%200%201%2042.666667-42.666667z'%20fill='%2309090b'%20p-id='6777'%3e%3c/path%3e%3c/svg%3e",vt="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1739777782533'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='11950'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M128%20420.576v200.864h149.12l175.456%20140.064V284.288l-169.792%20136.288H128z%20m132.256-64l204.288-163.968a32%2032%200%200%201%2052.032%2024.96v610.432a32%2032%200%200%201-51.968%2024.992l-209.92-167.552H96a32%2032%200%200%201-32-32v-264.864a32%2032%200%200%201%2032-32h164.256zM752%20458.656L870.4%20300.8a32%2032%200%201%201%2051.2%2038.4L792%20512l129.6%20172.8a32%2032%200%200%201-51.2%2038.4l-118.4-157.856-118.4%20157.856a32%2032%200%200%201-51.2-38.4l129.6-172.8-129.6-172.8a32%2032%200%200%201%2051.2-38.4l118.4%20157.856z'%20fill='%23000000'%20p-id='11951'%3e%3c/path%3e%3c/svg%3e",mt="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1739777823986'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='17437'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M534.848%20884.352c-10.624%200-16.224-1.248-22.848-2.176a155.584%20155.584%200%200%201-32.224-8.096%20125.856%20125.856%200%200%201-13.856-6.08%2073.088%2073.088%200%200%201-12.512-7.84l-175.776-136.32H192.128C138.304%20723.84%2096%20682.24%2096%20627.648v-214.976c0-54.592%2042.304-96.224%2096.128-96.224h81.184l175.04-149.888c2.336-2.048%204.832-3.904%207.456-5.632%2028.48-18.688%2078.048-39.52%20111.232-20.288%2031.328%2016.864%2040.96%2063.04%2040.96%20100.032v543.136c0%2035.136-7.808%2074.464-36.448%2091.776-10.56%207.36-26.048%208.768-36.704%208.768z%20m-16.96-71.296c2.272%200%206.88%200%209.184-2.24%209.184-4.544%207.776-17.952%207.776-27.008V240.64c0-9.056%200-25.792-9.216-30.336-6.912-4.512-22.976%207.68-29.888%2012.224l-195.52%20167.456H192.16c-13.76%200-22.976%209.056-22.976%2022.656v214.976c0%2013.568%209.184%2022.624%2022.976%2022.624h110.4l195.52%20151.616c4.608%202.272%2015.232%2011.2%2019.84%2011.2zM680.608%20384.256a32%2032%200%200%201%2045.6-44.896c45.568%2046.272%2068.608%20103.616%2068.608%20170.24%200%2067.136-23.456%20122.816-69.984%20164.8a32%2032%200%201%201-42.88-47.552c32.736-29.504%2048.864-67.808%2048.864-117.248%200-49.984-16.544-91.168-50.24-125.344z%20m101.568-86.816a32%2032%200%201%201%2046.4-44.064c68.48%2072.096%20103.04%20159.264%20103.04%20259.84%200%20100.928-34.784%20186.176-103.84%20253.888a32%2032%200%201%201-44.8-45.696c56.576-55.488%2084.64-124.224%2084.64-208.16%200-84.256-28.288-155.648-85.44-215.808z'%20fill='%23000000'%20p-id='17438'%3e%3c/path%3e%3c/svg%3e",ft=["src"],_t={class:"audio_right"},gt={class:"gap"},ht={class:"audio_time"},yt={class:"volume"},wt={class:"volume_progress"},kt={__name:"AudioPlayer",props:{audioUrl:String,isPauseTtsAudio:Boolean},setup(S){const h=S,T=l(!0),m=l("0:00"),x=l("0:00"),y=l(0),w=l(80),M=l(!1),c=l(null),P=l(0);Ge(()=>h.isPauseTtsAudio,(i,r)=>{i&&I()});function I(){c.value.pause(),T.value=!0}pe(()=>{F()});function F(){const i=c.value;i.loop=!1,i.src=h.audioUrl,i.addEventListener("ended",()=>{T.value=!0,P.value=0}),i&&(i.oncanplay=()=>{y.value=i.duration,x.value=R(i.duration)},i.volume=.8)}function R(i){const r=Math.floor(i/60),B=Math.floor(i%60),D=String(r).padStart(2,"0"),j=String(B).padStart(2,"0");return`${D}:${j}`}function H(){c.value.paused?(c.value.play(),T.value=!1):(c.value.pause(),T.value=!0)}function Q(i){var r=i.target.currentTime/i.target.duration;c.value.play&&(P.value=r*100,m.value=R(c.value.currentTime))}const X=i=>{if(console.log(i),!i)return;let r=y.value*(i/100);c.value.currentTime=r},k=i=>{c.value.volume=i/100};return(i,r)=>{const B=v("el-slider");return o(),n("div",null,[s("audio",{onTimeupdate:Q,controls:"",ref_key:"audioRef",ref:c,style:{display:"none"}},[s("source",{src:S.audioUrl,type:"audio/mpeg"},null,8,ft),r[4]||(r[4]=p(" 您的浏览器不支持音频播放 "))],544),s("div",_t,[s("div",gt,[T.value?(o(),n("img",{key:0,onClick:H,class:"audio_icon",src:dt,alt:"播放"})):(o(),n("img",{key:1,onClick:H,class:"audio_icon",src:pt,alt:"暂停"})),s("div",ht,[s("span",null,z(m.value),1),r[5]||(r[5]=p("  /  ")),s("span",null,z(x.value),1)]),a(B,{class:"slider_box",modelValue:P.value,"onUpdate:modelValue":r[0]||(r[0]=D=>P.value=D),"show-tooltip":!1,onInput:X},null,8,["modelValue"]),s("div",yt,[Oe(s("div",wt,[a(B,{"show-tooltip":"false",vertical:"",height:"100px",class:"volume_bar",modelValue:w.value,"onUpdate:modelValue":r[1]||(r[1]=D=>w.value=D),onChange:k},null,8,["modelValue"])],512),[[qe,M.value]]),w.value<=0?(o(),n("img",{key:0,class:"volume_icon",onClick:r[2]||(r[2]=ie(D=>M.value=!M.value,["stop"])),src:vt,alt:""})):A("",!0),w.value>0?(o(),n("img",{key:1,class:"volume_icon",onClick:r[3]||(r[3]=ie(D=>M.value=!M.value,["stop"])),src:mt,alt:""})):A("",!0)])])])])}}},bt=K(kt,[["__scopeId","data-v-2645646d"]]),St={class:"steps"},de={__name:"Step",props:{currentStep:Number},setup(S){const h=S;return(T,m)=>{const x=v("el-divider");return o(),n("div",St,[s("div",{class:ce(["step",{active:h.currentStep===1}])},"1",2),m[0]||(m[0]=s("div",{class:"detail"},[s("div",{class:"title"},"步骤1"),p(" 声音详情 ")],-1)),a(x,{class:"thick-divider"}),s("div",{class:ce(["step",{active:h.currentStep===2}])},"2",2),m[1]||(m[1]=s("div",{class:"detail"},[s("div",{class:"title"},"步骤2"),p(" 示例音频 ")],-1))])}}},Tt={class:"info-container"},xt={key:0,class:"info-item"},Ct={__name:"Store",setup(S){const h=l(["山区的瀑布，在长期的水流冲击下，下方形成深潭，潭水清澈且富含氧气，为多种鱼类和水生植物创造了适宜的生存环境，体现了自然现象产生的独特生态价值。","草原上的季节性河流，在枯水期形成的浅滩和湿地，吸引了大量候鸟在此停歇觅食，成为候鸟迁徙途中的重要补给站，表明自然的季节性变化能带来生态上的便利。","高山上的积雪，在春季融化后形成溪流，为山下的农田和森林提供了灌溉水源，滋养了众多生物，这显示出自然的冰雪循环对生态系统的重要滋养作用。","热带雨林中的暴雨，频繁的降水使土壤表面形成许多小水坑，这些水坑成为蛙类和小型水生生物的繁殖场所，说明自然降水能创造特定的生态繁衍环境。","北方冬季的大雪，积雪覆盖大地，为土壤起到保温作用，同时雪水融化后为春季植物生长提供水分，体现了自然降雪对生态的多重益处。","潮汐的涨落，在海岸边形成了潮间带，这里富含各种贝类和藻类，为许多涉禽提供了丰富的食物来源，表明自然的潮汐现象能构建独特的生态食物链。","石灰岩地区的溶洞，洞内独特的环境为蝙蝠提供了栖息和繁殖的场所，同时溶洞内的地下河也孕育了特殊的水生生物，说明自然的岩溶地貌能形成特殊的生态系统。","山顶的强风，使得树木生长形态扭曲，但这种独特的树形为一些鸟类提供了更好的筑巢支撑点，显示出自然环境对生态的意外塑造。","河流的改道，遗弃的旧河道形成了牛轭湖，牛轭湖为各种水生动植物提供了相对独立的生态空间，丰富了区域的生态多样性。","戈壁滩上的砾石，经过长时间的风化，表面形成一层黑色的“沙漠漆”，这种特殊的物质能吸收热量，为一些沙漠植物种子的萌发提供适宜温度，说明自然风化产物对生态有积极意义。","春季的沙尘暴，沙尘携带的矿物质在飘落后成为海洋浮游生物的重要养分，促进了海洋生态系统的初级生产力，体现了看似有害的自然现象背后的生态益处。","针叶林地区的落叶，在地面堆积腐烂后形成酸性土壤，这种土壤适合蓝莓等喜酸植物的生长，表明自然的落叶分解能营造特定的植物生长环境。","盐湖在干旱季节水分蒸发，盐分结晶析出，形成独特的盐滩景观，盐滩周边的特殊环境为耐盐植物和卤虫等生物提供了生存家园，说明自然的干湿变化能创造特殊生态。","山地的云雾，常常笼罩在山腰，为一些喜阴植物提供了湿润且凉爽的环境，使这些植物能在特定海拔区域良好生长，显示出自然云雾对生态的调节作用。","热带草原的野火，虽然烧毁部分草木，但也清除了地面的枯枝落叶，促进了新草的生长，同时吸引了食草动物前来觅食，带动了整个生态系统的活力，表明自然野火对生态有积极推动。","河流入海口的泥沙淤积，形成了广阔的河口三角洲，三角洲土地肥沃，为众多候鸟和鱼类提供了丰富的食物和栖息地，说明自然的泥沙堆积能创造重要的生态区域。","冻原地区的永冻层，在夏季部分融化，形成许多小的湿地和浅湖，为北极地区的鸟类和水禽提供了繁殖和觅食的场所，体现了自然冻土融化对生态的积极影响。"]);function T(y,w){return y=Math.ceil(y),w=Math.floor(w),Math.floor(Math.random()*(w-y+1))+y}const m=T(0,16),x=te(()=>h.value[m]||"");return(y,w)=>(o(),n("div",Tt,[x.value?(o(),n("div",xt,z(x.value),1)):A("",!0)]))}},It=K(Ct,[["__scopeId","data-v-4ec65fdf"]]),Dt=Fe("step",()=>{const S=l(1);function h(){S.value=2}function T(){S.value=1}return{step:S,incrementStep:h,reduceStep:T}}),Ut=S=>at.post("/common/audio",S),Vt={class:"form-section"},zt={class:"radio"},Mt={key:0,style:{"font-size":"small",color:"#6b748b"}},$t={key:1,style:{"font-size":"small",color:"#6b748b"}},Pt={class:"form-section"},Rt={class:"avatar"},Bt={class:"upload-box"},Nt=["src"],At={class:"form-section"},Lt={class:"form-section"},Et={class:"form-section"},Gt={key:0},Ot={class:"audio-upload"},qt={class:"audio-player"},Ft={class:"audio-upload"},Ht={class:"size"},jt=["onClick"],Wt=["onClick"],Yt={class:"time-picker"},Kt={class:"loadHeader"},Qt={key:0,class:"icon"},Xt={key:1,class:"icon"},Zt={key:2,class:"icon"},Jt={key:2,class:"btnssecond"},es={class:"audio-container"},ts={class:"card-header"},ss={style:{"font-weight":"600"}},as={class:"myinput"},os={class:"add-button-container"},ls={class:"btnssecond"},ns={__name:"CreateSound",setup(S){const h=ve(),T=l("输入音频样本标题"),m=l("输入音频样本文本"),x=l("textarea"),y=l("#f5f5f5"),w=l("填写音频描述"),M=l("3"),c=l([{sampleId:"",sampleTitle:"",sampleText:"",sampleUrl:"",sampleIsPlaying:!1}]),P=()=>{c.value.push({sampleTitle:"",sampleText:"",sampleUrl:"",sampleIsPlaying:!1})},I=Ye(),F=He(),R=F.query?F.query.id:void 0,H=t=>{const e=c.value[t];e.audio&&(e.audio.pause(),e.audio.currentTime=0),c.value.splice(t,1)};function Q(t,e){c.value[t].sampleTitle=e}function X(t,e){c.value[t].sampleText=e}const k=l([]),i=l(!1),r=l(null),B=l([]),D=l(),j=l(),me=async()=>{D.value=new Date;try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});r.value=new MediaRecorder(t),B.value=[],r.value.ondataavailable=e=>{e.data.size>0&&B.value.push(e.data)},r.value.start(),i.value=!0,r.value.onstop=()=>{const e=new Blob(B.value,{type:"audio/mp3"});e.value=e,i.value=!1,t.getTracks().forEach(d=>d.stop()),_e(e)}}catch(t){console.error("获取音频流失败：",t)}};function fe(t,e){const d=new Date(t),U=new Date(e),b=Math.abs(U.getTime()-d.getTime());return Math.floor(b/1e3)}const _e=async t=>{j.value=new Date;const e={name:`record-${k.value.length+1}.mp3`,url:URL.createObjectURL(t),blob:t,duration:`${fe(D.value,j.value)}s`,size:se(t.size),file:new File([t],`record-${k.value.length+1}.mp3`,{type:"audio/mp3"})};k.value.unshift(e)},ge=()=>{r.value&&(r.value.stop(),i.value=!1)},se=t=>`${(t/1024).toFixed(2)} KB`,he=t=>isNaN(t)||t===1/0?"未知":`${Math.floor(t)}s`,ye=async t=>{const e=URL.createObjectURL(t),d=new Audio(URL.createObjectURL(t));return await new Promise(U=>{d.addEventListener("loadedmetadata",()=>{const b=d.duration,O=he(b),W={name:t.name,size:se(t.size),duration:O,isPlaying:!1,url:e,file:t,actualDuration:b};k.value.push(W),U()})}),!1},C=je({}),ae=t=>{const e=k.value[t];C[t]||(C[t]=new Audio(e.url));const d=C[t];e.isPlaying?d.pause():(Object.entries(C).forEach(([U,b])=>{U!=t&&!b.paused&&(b.pause(),k.value[U].isPlaying=!1)}),d.play()),e.isPlaying=!e.isPlaying,d.addEventListener("ended",()=>{e.isPlaying=!1})},oe=t=>{C[t]&&(C[t].pause(),C[t].src="",delete C[t]),k.value.splice(t,1)},we=(t,e)=>{const d=e.value.findIndex(U=>U.name===t.name);d!==-1&&oe(d)},le=l("first"),ke=()=>{L.incrementStep()},$=te(()=>{let t=0;for(const e of k.value){const d=parseInt(e.duration.slice(0,-1),10);t+=d}return t}),be=te(()=>({10:{style:{color:"#9ca3b3",fontSize:"17px"},label:"最小"},30:{style:{color:"#9ca3b3",fontSize:"17px"},label:"推荐"},90:{style:{color:"#9ca3b3",fontSize:"17px"},label:"最大"}})),Se=l("填写声音名称"),Te=l("输入标签");function xe(t){_.value.voiceName=t}function Ce(t){_.value.voiceDescription=t}function Ie(t){_.value.voiceTag=t}const L=Dt(),{step:Z}=We(L),J=l(""),_=l({voiceType:"1",voiceImage:"",voiceName:"",voiceDescription:"",voiceTag:""}),De=t=>{_.value.voiceImage=t.data},Ue=async()=>{const t=new FormData;for(const e in _.value)t.append(e,_.value[e]);k.value.forEach(e=>{t.append("files",e.file)});for(const[e,d]of t.entries())console.log(`${e}:`,d);try{let e=await st(t);c.value=e.data.sample,J.value=e.data.voiceId,console.log("音频上传成功:",c.value,J.value)}catch(e){console.error("音频上传失败:",e)}},Ve=async()=>{await Ue(),k.value=[],Object.keys(C).forEach(t=>{C[t].pause(),C[t].src="",delete C[t]}),L.incrementStep()},ze=()=>{I.push("/mybank"),L.reduceStep()},Me=async()=>{I.push("/mybank"),L.reduceStep();const t=c.value.slice(1);await et(t)},$e=async()=>{I.push("/mybank"),L.reduceStep();const t=c.value.slice(1);await tt(t)},Pe=async t=>{const e={voiceId:J.value,sampleText:c.value[t].sampleText};let d=await Ut(e);c.value[t].sampleUrl=d.data};pe(async()=>{if(R!==void 0){let t=await Ze(R);_.value=t.data.insertData,c.value=t.data.samples}});const Re=async()=>{await Je(_.value),L.incrementStep()};return(t,e)=>{const d=v("el-radio-button"),U=v("el-radio-group"),b=v("el-icon"),O=v("el-upload"),W=v("el-tab-pane"),E=v("el-col"),ne=v("el-row"),Be=v("el-tabs"),Ne=v("el-slider"),Ae=v("el-button"),Le=v("el-divider");return o(),G(ne,null,{default:u(()=>[g(Z)===1?(o(),G(E,{key:0,span:12},{default:u(()=>[e[18]||(e[18]=s("h2",null,"训练新声音",-1)),a(de,{currentStep:g(Z)},null,8,["currentStep"]),s("div",null,[e[17]||(e[17]=s("h3",null,"声音详情",-1)),s("div",null,[s("div",Vt,[e[3]||(e[3]=p(" 类型 ")),s("div",zt,[a(U,{modelValue:_.value.voiceType,"onUpdate:modelValue":e[0]||(e[0]=f=>_.value.voiceType=f),size:"large","text-color":"black",fill:"#fafafa"},{default:u(()=>[a(d,{label:"公开",value:"1"}),a(d,{label:"私有",value:"0"})]),_:1},8,["modelValue"])]),_.value.voiceType==="1"?(o(),n("div",Mt," 此语音模型将在发现页面中可见，每个人都可以看到。 ")):(o(),n("div",$t,"此语音模型仅对创建者可见，不能共享且不会出现在发现页面。"))]),s("div",Pt,[e[5]||(e[5]=p(" 封面图 (可选) ")),s("div",Rt,[s("div",Bt,[a(O,{class:"avatar-uploader","auto-upload":!0,"show-file-list":!1,action:"/api/common/upload",name:"file",headers:{Authorization:g(h).token.token},"on-success":De},{default:u(()=>[_.value.voiceImage?(o(),n("img",{key:0,src:_.value.voiceImage,class:"avatar"},null,8,Nt)):(o(),G(b,{key:1,class:"avatar-uploader-icon"},{default:u(()=>[a(g(re))]),_:1}))]),_:1},8,["headers"])]),e[4]||(e[4]=s("h4",null,"声音封面图片 (文件最大不超过 2MB)",-1))])]),s("div",At,[e[6]||(e[6]=p(" 名称 ")),a(q,{message:_.value.voiceName,placeholder:Se.value,class:"search-input",color:y.value,"onUpdate:message":xe},null,8,["message","placeholder","color"])]),s("div",Lt,[e[7]||(e[7]=p(" 描述 (可选) ")),a(q,{message:_.value.voiceDescription,placeholder:w.value,color:y.value,type:x.value,"onUpdate:message":Ce},null,8,["message","placeholder","color","type"])]),s("div",Et,[e[8]||(e[8]=p(" 标签 ")),a(q,{message:_.value.voiceTag,placeholder:Te.value,class:"search-input",color:y.value,"onUpdate:message":Ie},null,8,["message","placeholder","color"])])]),g(R)===void 0?(o(),n("div",Gt,[e[16]||(e[16]=s("h3",null,"输入音频",-1)),a(Be,{modelValue:le.value,"onUpdate:modelValue":e[1]||(e[1]=f=>le.value=f),class:"demo-tabs"},{default:u(()=>[a(W,{label:"上传音频",name:"second"},{default:u(()=>[s("div",Ot,[a(O,{class:"upload-component",accept:"audio/*","before-upload":ye,"file-list":k.value,"on-remove":we,limit:0},{default:u(()=>e[9]||(e[9]=[s("div",{class:"upload-button"},[s("div",{class:"insert"}),s("h5",null,"添加或删除您的音频文件")],-1)])),_:1},8,["file-list"])])]),_:1}),a(W,{label:"录制音频",name:"first"},{default:u(()=>[s("div",qt,[i.value?(o(),n("div",{key:1,onClick:ge,class:"record"},e[11]||(e[11]=[s("div",{class:"noRecord"},null,-1),p(" 停止录制 ")]))):(o(),n("div",{key:0,onClick:me,class:"record"},e[10]||(e[10]=[s("div",{class:"inRecord"},null,-1),p(" 点击开始录制 ")]))),e[12]||(e[12]=s("div",{style:{"font-size":"small",color:"#6b7280"}},"*您可以使用自己的文本或下面的建议文本录制您的声音。",-1)),a(It)])]),_:1}),s("div",Ft,[(o(!0),n(Y,null,ee(k.value,(f,V)=>(o(),G(ne,{key:V,class:"files"},{default:u(()=>[a(E,{span:2,class:"logo"}),a(E,{span:13,class:"file"},{default:u(()=>[p(z(f.name)+" ",1),s("div",Ht,z(f.size),1)]),_:2},1024),a(E,{span:4},{default:u(()=>[p(z(f.duration),1)]),_:2},1024),a(E,{span:4,class:"btns"},{default:u(()=>[f.isPlaying?(o(),n("div",{key:1,class:"on",onClick:N=>ae(V)},null,8,Wt)):(o(),n("div",{key:0,class:"close",onClick:N=>ae(V)},null,8,jt)),a(b,{onClick:N=>oe(V),class:"delete-btn",size:"25"},{default:u(()=>[a(g(ue))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1},8,["modelValue"]),s("div",Yt,[s("div",Kt,[p(" 已上传："+z($.value)+"s ",1),$.value<=90&&$.value>=10?(o(),n("div",Qt,[a(b,{size:"20",color:"#16a149"},{default:u(()=>[a(g(Ke))]),_:1}),e[13]||(e[13]=p(" 不错 "))])):A("",!0),$.value>90||$.value<10&&$.value>0?(o(),n("div",Xt,[a(b,{size:"20",color:"#ef4343"},{default:u(()=>[a(g(Qe))]),_:1}),e[14]||(e[14]=p(" 过长/过短 "))])):A("",!0),$.value===0?(o(),n("div",Zt," 推荐 30 秒左右 ")):A("",!0)]),a(Ne,{modelValue:$.value,"onUpdate:modelValue":e[2]||(e[2]=f=>$.value=f),min:"0",max:"100",step:1,"show-stops":"",marks:be.value,"show-tooltip":!1,"show-button":!1},null,8,["modelValue","marks"]),e[15]||(e[15]=s("div",{class:"tip"},"*提示：最短10秒，最长90秒，推荐30秒",-1))])])):A("",!0),g(R)===void 0?(o(),n("button",{key:1,class:"next-btn",onClick:Ve},"创建")):(o(),n("div",Jt,[s("button",{class:"next-btn",onClick:Re},"保存"),s("button",{class:"skip",onClick:ke},"跳过")]))])]),_:1})):(o(),G(E,{key:1,span:12},{default:u(()=>[e[23]||(e[23]=s("h2",null,"训练新声音",-1)),a(de,{currentStep:g(Z)},null,8,["currentStep"]),s("div",null,[e[22]||(e[22]=s("h3",null,"音频样本",-1)),s("div",es,[(o(!0),n(Y,null,ee(c.value,(f,V)=>(o(),n("div",{key:f.sampleId,class:"audio-card"},[s("div",null,[s("div",ts,[s("span",ss,z(f.sampleTitle===""?"样本"+V:f.sampleTitle),1),a(b,{size:"20",color:"#606672",style:{cursor:"pointer"},onClick:N=>H(V)},{default:u(()=>[a(g(ue))]),_:2},1032,["onClick"])])]),s("div",as,[a(q,{message:f.sampleTitle,placeholder:T.value,"onUpdate:message":N=>Q(V,N)},null,8,["message","placeholder","onUpdate:message"]),a(q,{message:f.sampleText,placeholder:m.value,type:x.value,rows:M.value,"onUpdate:message":N=>X(V,N)},null,8,["message","placeholder","type","rows","onUpdate:message"]),a(Ae,{color:"#e7e7e8",onClick:N=>Pe(V),style:{width:"16%","margin-left":"1%"}},{default:u(()=>e[19]||(e[19]=[s("div",{class:"make"},null,-1),p(" 生成样本 ")])),_:2},1032,["onClick"]),a(bt,{audioUrl:f.sampleUrl},null,8,["audioUrl"])])]))),128)),s("div",os,[s("button",{onClick:P,class:"add-btn"},[a(b,{size:"20",style:{"padding-right":"5px"}},{default:u(()=>[a(g(re))]),_:1}),e[20]||(e[20]=p()),e[21]||(e[21]=s("span",{style:{"font-size":"large"}},"添加音频示例",-1))])]),s("div",ls,[g(R)===void 0?(o(),n("button",{key:0,class:"next-btn",onClick:Me},"保存")):(o(),n("button",{key:1,class:"next-btn",onClick:$e},"保存")),s("button",{class:"skip",onClick:ze},"跳过")])])])]),_:1})),a(Le,{direction:"vertical",style:{height:"auto"}}),a(E,{span:11,class:"reactivity"},{default:u(()=>[a(ut)]),_:1})]),_:1})}}},vs=K(ns,[["__scopeId","data-v-84187e36"]]);export{vs as default};
