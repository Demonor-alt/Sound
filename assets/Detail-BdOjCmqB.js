import{t as te}from"./time-tY07ncrd.js";import{M as le,d as ae,a as A,b as ie}from"./discover-CZ0V8JMo.js";import{M as ne}from"./Input-AKu1H2h6.js";import{_ as de,r as p,p as re,q as ce,x as ue,y as ve,z as m,b as l,w as a,a as u,u as pe,o as v,d as s,A as r,B as me,f as k,C as fe,e as d,c as L,D as ke,F as ge,G as ye,H as be,I as Ce,J as _e,K as _}from"./index-2okebZPU.js";import{a as B}from"./sound-BznpVhuQ.js";import{b as Ie,a as we}from"./mybank-DnN7T5lR.js";import{u as xe}from"./token-rQigsGzs.js";import"./request-CbvqqH3h.js";const Le={class:"common-layout"},$e={class:"title"},Se={class:"voice-detail"},Ue={class:"display-detail"},Te={class:"display-detail"},De={class:"tag1"},Ve={key:0,class:"tag2",style:{"margin-left":"5px"}},ze={class:"btns"},Pe={class:"dialog-footer"},Ne={class:"button"},Ae={class:"button"},Be={class:"button"},Me={class:"dialog"},je={class:"dialog-footer"},qe={class:"audio-samples"},Ee={class:"samples-content"},Oe={class:"samples-index"},Re={class:"sample-btn"},he=["onClick"],Fe=["onClick"],Ke={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},Ge={class:"audio-description"},He={class:"description"},Je={class:"two-item"},Qe={class:"one-item"},We={class:"one-item"},Xe={class:"two-item"},Ye={class:"one-item"},Ze={class:"one-item"},eo={__name:"Detail",setup(oo){const M=p("#ffffff"),j=p("输入您的评论..."),q=p("textarea"),E=p("3"),O=pe(),$=re(),g=$.query?$.query.id:void 0,R=()=>{O.push({path:"/explanation",query:{id:g}})},I=p(!1),y=p(!1),b=p(!1),x=p({type:"",desctibe:""}),h=p([{value:"1",label:"无法工作"},{value:"2",label:"侵犯版本"},{value:"3",label:"其他"}]),F=o=>{x.value.type=o};function K(o){x.value.desctibe=o}const t=p({voiceId:1,userName:"fc",voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"55",voiceDescription:"1212",voiceCreationTime:new Date(2025,1,9,19,11),voiceUseCount:11e4,voiceShareCount:11,voiceLikeCount:20,voiceCollectCount:10,voiceLanguage:"ch",voiceTag:"aaaaaaaaa",voiceIsUsed:!1,voiceIsShared:!1,voiceIsLiked:"1",voiceIsCollected:!1,voiceSamples:[{sampleId:1,sampleIsPlaying:!1,sampleTitle:"Default Sample",sampleText:"哈哈哈笑死我了，这也太搞笑了吧！我靠我靠，这是什么神仙操作啊，太离谱了哩咯。笑得我肚子疼，这也太逗了吧，绝了绝了！",sampleUrl:B},{sampleId:2,sampleIsPlaying:!1,sampleTitle:"可以让父母",sampleText:"对侧人防热非人发热功耗一节课iklo",sampleUrl:B}]}),G=()=>{navigator.clipboard.writeText(g).then(()=>{_({message:"已复制到剪贴板",position:"bottom-right"})}).catch(o=>{_({message:`复制失败: ${o.message}`,position:"bottom-right",type:"error"})})},C=ce({}),S=o=>{const e=t.value.voiceSamples[o],c=`-${o}`;if(C[c]){const n=C[c];e.sampleIsPlaying?n.pause():(U(),n.play())}else{const n=new Audio(e.sampleUrl);C[c]=n,n.addEventListener("ended",()=>{e.sampleIsPlaying=!1}),U(),n.play()}e.sampleIsPlaying=!e.sampleIsPlaying},U=()=>{Object.entries(C).forEach(([o,e])=>{if(!e.paused){e.pause();const[c,n]=o.split("-");t.value.sample[n].isPlaying=!1}})};ue(()=>{Object.values(C).forEach(o=>{o.pause(),o.src=""})}),ve(async()=>{let o=await Ie(g);t.value=o.data});const H=()=>{t.voiceIsShared===!1&&(t.voiceIsShared=!0,t.voiceShareCount++);const e=`${window.location.href}?id=${g}`;navigator.clipboard.writeText(e).then(async()=>{_({message:"已复制到剪贴板",position:"bottom-right"});try{let c=await ae(g)}catch(c){console.error("分享服务调用失败:",c),_({message:`分享服务调用失败: ${c.message}`,position:"bottom-right",type:"error"})}}).catch(c=>{_({message:`复制失败: ${c.message}`,position:"bottom-right",type:"error"})})},T=async o=>{o.voiceIsLiked===1?(o.voiceIsLiked=0,o.voiceLikeCount--):(o.voiceIsLiked===2&&(o.voiceIsUnliked=!1),o.voiceIsLiked=1,o.voiceLikeCount++);const e={voiceId:o.voiceId,voiceLikeCount:o.voiceLikeCount};await A(e)},D=async o=>{o.voiceIsLiked===2?(o.voiceIsLiked=0,o.voiceIsUnliked=!1):(o.voiceIsLiked===1&&(o.voiceLikeCount--,o.voiceIsLiked=0),o.voiceIsLiked=2,o.voiceIsUnliked=!0);const e={voiceId:o.voiceId,voiceLikeCount:o.voiceLikeCount};await A(e)},V=async o=>{o.voiceIsCollected=!o.voiceIsCollected,o.voiceIsCollected?o.voiceCollectCount++:o.voiceCollectCount--;const e={voiceId:o.voiceId,voiceCollectCount:o.voiceCollectCount};await ie(e)},J=xe(),Q=async()=>{const o=p({...t.value,voiceType:"0"});await we(J.token.userId,o)};return(o,e)=>{const c=u("el-image"),n=u("el-icon"),f=u("el-button"),z=u("el-dialog"),W=u("el-popover"),X=u("el-header"),P=u("el-divider"),Y=u("el-card"),N=u("el-col"),Z=u("el-row"),ee=u("el-main"),oe=u("el-container");return v(),m("div",Le,[l(oe,null,{default:a(()=>[l(X,{class:"header"},{default:a(()=>[l(c,{class:"image",src:t.value.voiceImage,fit:"cover"},null,8,["src"]),s("div",$e,r(t.value.voiceName),1),s("div",Se,[s("span",Ue,r(t.value.userName),1),e[16]||(e[16]=s("div",{class:"dot"},null,-1)),l(n,{size:"20",style:{color:"#6b7280"}},{default:a(()=>[l(k(fe))]),_:1}),s("span",Te,r(k(te)(t.value.voiceCreationTime)),1),e[17]||(e[17]=s("div",{class:"dot"},null,-1)),s("div",De,r(t.value.voiceLanguage),1),t.value.voiceTag!==""?(v(),m("div",Ve,r(t.value.voiceTag),1)):me("",!0)]),s("div",ze,[l(f,{size:"large",color:"black",onClick:e[0]||(e[0]=i=>R(t.value.voiceId))},{default:a(()=>e[18]||(e[18]=[d("使用声音")])),_:1}),l(f,{size:"large",color:"black",onClick:e[1]||(e[1]=i=>y.value=!0)},{default:a(()=>e[19]||(e[19]=[d("克隆模型")])),_:1}),l(z,{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=i=>y.value=i),width:"30%","align-center":"","show-close":!1},{footer:a(()=>[s("span",Pe,[l(f,{color:"#f4f4f5",plain:"",style:{color:"black",border:"#e4e4e7 1px solid"},onClick:e[2]||(e[2]=i=>y.value=!1)},{default:a(()=>e[20]||(e[20]=[d("取消")])),_:1}),l(f,{color:"black",onClick:e[3]||(e[3]=i=>{y.value=!1,Q()})},{default:a(()=>e[21]||(e[21]=[d(" 确认 ")])),_:1})])]),default:a(()=>[e[22]||(e[22]=s("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"10px"}},"克隆模型",-1)),e[23]||(e[23]=s("span",null,"确认是否克隆该模型，这将为你创建一个不可变更可见性的私有模型",-1))]),_:1},8,["modelValue"]),s("div",{class:"button"},[s("div",{class:"shared",onClick:H})]),s("div",Ne,[t.value.voiceIsLiked===1?(v(),m("div",{key:0,class:"likefill",onClick:e[5]||(e[5]=i=>T(t.value))})):(v(),m("div",{key:1,class:"like",onClick:e[6]||(e[6]=i=>T(t.value))}))]),s("div",Ae,[t.value.voiceIsLiked===2?(v(),m("div",{key:0,class:"unlikefill",onClick:e[7]||(e[7]=i=>D(t.value))})):(v(),m("div",{key:1,class:"unlike",onClick:e[8]||(e[8]=i=>D(t.value))}))]),s("div",Be,[t.value.voiceIsCollected?(v(),L(n,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:e[10]||(e[10]=i=>V(t.value))},{default:a(()=>[l(k(ge))]),_:1})):(v(),L(n,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:e[9]||(e[9]=i=>V(t.value))},{default:a(()=>[l(k(ke))]),_:1}))]),l(W,{placement:"bottom",width:100,visible:I.value},{reference:a(()=>[s("div",{class:"button",onClick:e[11]||(e[11]=i=>I.value=!I.value)},e[24]||(e[24]=[s("div",{class:"more"},null,-1)]))]),default:a(()=>[s("div",{class:"popper",onClick:G},[l(n,{size:"17",style:{"background-color":"#e0e5eb","border-radius":"6px",padding:"8px"}},{default:a(()=>[l(k(ye))]),_:1}),e[25]||(e[25]=d(" 复制模型ID "))]),s("div",{class:"popper",onClick:e[12]||(e[12]=i=>b.value=!0)},[l(n,{size:"17",style:{"background-color":"#e0e5eb","border-radius":"6px",padding:"8px"}},{default:a(()=>[l(k(be))]),_:1}),e[26]||(e[26]=d(" 举报模型 "))]),l(z,{modelValue:b.value,"onUpdate:modelValue":e[15]||(e[15]=i=>b.value=i),width:"30%","align-center":"","show-close":!1},{footer:a(()=>[s("span",je,[l(f,{color:"#f4f4f5",plain:"",style:{color:"black",border:"#e4e4e7 1px solid"},onClick:e[13]||(e[13]=i=>b.value=!1)},{default:a(()=>e[29]||(e[29]=[d("取消")])),_:1}),l(f,{color:"black",onClick:e[14]||(e[14]=i=>{b.value=!1,I.value=!1})},{default:a(()=>e[30]||(e[30]=[d(" 确认 ")])),_:1})])]),default:a(()=>[e[31]||(e[31]=s("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"10px"}},"报告模型",-1)),s("div",Me,[e[27]||(e[27]=d(" 你为什么要举报这个模型? ")),l(le,{options:h.value,"input-width":"432px",color:M.value,"onUpdate:value":F,style:{"margin-bottom":"10px"}},null,8,["options","color"]),e[28]||(e[28]=d(" 评论（至少20个字符） ")),l(ne,{message:x.value.desctibe,placeholder:j.value,type:q.value,rows:E.value,"onUpdate:message":K},null,8,["message","placeholder","type","rows"])])]),_:1},8,["modelValue"])]),_:1},8,["visible"])])]),_:1}),l(P),l(ee,null,{default:a(()=>[l(Z,{class:"main"},{default:a(()=>[l(N,{span:15},{default:a(()=>[s("div",qe,[e[32]||(e[32]=s("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(v(!0),m(Ce,null,_e(t.value.voiceSamples,(i,w)=>(v(),L(Y,{key:w,class:"samples-item",shadow:"never"},{default:a(()=>[s("div",Ee,[s("div",null,[s("span",Oe,r(w+1),1),s("span",null,r(i.sampleTitle),1)]),s("div",Re,[i.sampleIsPlaying?(v(),m("div",{key:1,class:"on",onClick:se=>S(w)},null,8,Fe)):(v(),m("div",{key:0,class:"close",onClick:se=>S(w)},null,8,he))])]),s("div",Ke,r(i.sampleText),1)]),_:2},1024))),128))])]),_:1}),l(N,{span:9},{default:a(()=>[s("div",Ge,[e[37]||(e[37]=s("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"描述",-1)),s("div",He,r(t.value.voiceDescription),1),l(P),s("div",Je,[s("div",Qe,[e[33]||(e[33]=s("span",{class:"item-name"},"总点赞数",-1)),d(" "+r(t.value.voiceLikeCount),1)]),s("div",We,[e[34]||(e[34]=s("span",{class:"item-name"},"总标记数",-1)),d(" "+r(t.value.voiceCollectCount),1)])]),s("div",Xe,[s("div",Ye,[e[35]||(e[35]=s("span",{class:"item-name"},"总分享数",-1)),d(" "+r(t.value.voiceShareCount),1)]),s("div",Ze,[e[36]||(e[36]=s("span",{class:"item-name"},"总使用数",-1)),d(" "+r(t.value.voiceUseCount),1)])])])]),_:1})]),_:1})]),_:1})]),_:1})])}}},uo=de(eo,[["__scopeId","data-v-7ab3e910"]]);export{uo as default};
