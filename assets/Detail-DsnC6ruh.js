import{t as oe,M as se}from"./Select-Cb37-48N.js";import{M as le}from"./Input-83BpyqT8.js";import{_ as te,r as p,x as ae,y as ie,z as ne,A as de,B as m,b as t,w as a,a as u,u as re,o as v,d as s,C as r,D as ce,f as g,F as ue,e as d,c as x,G as ve,H as pe,I as me,J as fe,K as ge,L as ke,M as _}from"./index-B6KYdHEG.js";import{a as M}from"./sound-BznpVhuQ.js";import{b as ye,a as be}from"./mybank-B0S5H_s0.js";import"./request-BhfRS62i.js";import"./token-Ui_yl02C.js";const Ce={class:"common-layout"},_e={class:"title"},Ie={class:"voice-detail"},we={class:"display-detail"},Le={class:"display-detail"},xe={class:"tag1"},$e={key:0,class:"tag2",style:{"margin-left":"5px"}},Se={class:"btns"},Ue={class:"dialog-footer"},De={class:"button"},Te={class:"button"},Ve={class:"button"},ze={class:"dialog"},Pe={class:"dialog-footer"},Ne={class:"audio-samples"},Me={class:"samples-content"},Ae={class:"samples-index"},Be={class:"sample-btn"},je=["onClick"],Ee=["onClick"],qe={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},Oe={class:"audio-description"},Re={class:"description"},he={class:"two-item"},Fe={class:"one-item"},Ke={class:"one-item"},Ge={class:"two-item"},He={class:"one-item"},Je={class:"one-item"},Qe={__name:"Detail",setup(We){const A=p("#ffffff"),B=p("输入您的评论..."),j=p("textarea"),E=p("3"),q=re(),$=ae(),k=$.query?$.query.id:void 0,O=()=>{q.push({path:"/explanation",query:{id:k}})},I=p(!1),y=p(!1),b=p(!1),L=p({type:"",desctibe:""}),R=p([{value:"1",label:"无法工作"},{value:"2",label:"侵犯版本"},{value:"3",label:"其他"}]),h=o=>{L.value.type=o};function F(o){L.value.desctibe=o}const l=p({voiceId:1,userName:"fc",voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"55",voiceDescription:"1212",voiceCreationTime:new Date(2025,1,9,19,11),voiceUseCount:11e4,voiceShareCount:11,voiceLikeCount:20,voiceCollectCount:10,voiceLanguage:"ch",voiceTag:"aaaaaaaaa",voiceIsUsed:!1,voiceIsShared:!1,voiceIsLiked:"1",voiceIsCollected:!1,voiceSamples:[{sampleId:1,sampleIsPlaying:!1,sampleTitle:"Default Sample",sampleText:"哈哈哈笑死我了，这也太搞笑了吧！我靠我靠，这是什么神仙操作啊，太离谱了哩咯。笑得我肚子疼，这也太逗了吧，绝了绝了！",sampleUrl:M},{sampleId:2,sampleIsPlaying:!1,sampleTitle:"可以让父母",sampleText:"对侧人防热非人发热功耗一节课iklo",sampleUrl:M}]}),K=()=>{navigator.clipboard.writeText(k).then(()=>{_({message:"已复制到剪贴板",position:"bottom-right"})}).catch(o=>{_({message:`复制失败: ${o.message}`,position:"bottom-right",type:"error"})})},C=ie({}),S=o=>{const e=l.value.voiceSamples[o],c=`-${o}`;if(C[c]){const n=C[c];e.sampleIsPlaying?n.pause():(U(),n.play())}else{const n=new Audio(e.sampleUrl);C[c]=n,n.addEventListener("ended",()=>{e.sampleIsPlaying=!1}),U(),n.play()}e.sampleIsPlaying=!e.sampleIsPlaying},U=()=>{Object.entries(C).forEach(([o,e])=>{if(!e.paused){e.pause();const[c,n]=o.split("-");l.value.sample[n].isPlaying=!1}})};ne(()=>{Object.values(C).forEach(o=>{o.pause(),o.src=""})}),de(async()=>{let o=await ye(k);l.value=o.data});const G=()=>{l.voiceIsShared===!1&&(l.voiceIsShared=!0,l.voiceShareCount++);const e=`${window.location.href}?id=${k}`;navigator.clipboard.writeText(e).then(async()=>{_({message:"已复制到剪贴板",position:"bottom-right"});try{let c=await discoverUpdateShareService(k)}catch(c){console.error("分享服务调用失败:",c),_({message:`分享服务调用失败: ${c.message}`,position:"bottom-right",type:"error"})}}).catch(c=>{_({message:`复制失败: ${c.message}`,position:"bottom-right",type:"error"})})},D=async o=>{o.voiceIsLiked===1?(o.voiceIsLiked=0,o.voiceLikeCount--):(o.voiceIsLiked===2&&(o.voiceIsUnliked=!1),o.voiceIsLiked=1,o.voiceLikeCount++);const e={voiceId:o.voiceId,voiceLikeCount:o.voiceLikeCount};await discoverUpdateLikeService(e)},T=async o=>{o.voiceIsLiked===2?(o.voiceIsLiked=0,o.voiceIsUnliked=!1):(o.voiceIsLiked===1&&(o.voiceLikeCount--,o.voiceIsLiked=0),o.voiceIsLiked=2,o.voiceIsUnliked=!0);const e={voiceId:o.voiceId,voiceLikeCount:o.voiceLikeCount};await discoverUpdateLikeService(e)},V=async o=>{o.voiceIsCollected=!o.voiceIsCollected,o.voiceIsCollected?o.voiceCollectCount++:o.voiceCollectCount--;const e={voiceId:o.voiceId,voiceCollectCount:o.voiceCollectCount};await discoverUpdateCollectService(e)},H=async()=>{const o=p({...l.value,voiceType:"0"});await be(o)};return(o,e)=>{const c=u("el-image"),n=u("el-icon"),f=u("el-button"),z=u("el-dialog"),J=u("el-popover"),Q=u("el-header"),P=u("el-divider"),W=u("el-card"),N=u("el-col"),X=u("el-row"),Y=u("el-main"),Z=u("el-container");return v(),m("div",Ce,[t(Z,null,{default:a(()=>[t(Q,{class:"header"},{default:a(()=>[t(c,{class:"image",src:l.value.voiceImage,fit:"cover"},null,8,["src"]),s("div",_e,r(l.value.voiceName),1),s("div",Ie,[s("span",we,r(l.value.userName),1),e[16]||(e[16]=s("div",{class:"dot"},null,-1)),t(n,{size:"20",style:{color:"#6b7280"}},{default:a(()=>[t(g(ue))]),_:1}),s("span",Le,r(g(oe)(l.value.voiceCreationTime)),1),e[17]||(e[17]=s("div",{class:"dot"},null,-1)),s("div",xe,r(l.value.voiceLanguage),1),l.value.voiceTag!==""?(v(),m("div",$e,r(l.value.voiceTag),1)):ce("",!0)]),s("div",Se,[t(f,{size:"large",color:"black",onClick:e[0]||(e[0]=i=>O(l.value.voiceId))},{default:a(()=>e[18]||(e[18]=[d("使用声音")])),_:1}),t(f,{size:"large",color:"black",onClick:e[1]||(e[1]=i=>y.value=!0)},{default:a(()=>e[19]||(e[19]=[d("克隆模型")])),_:1}),t(z,{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=i=>y.value=i),width:"30%","align-center":"","show-close":!1},{footer:a(()=>[s("span",Ue,[t(f,{color:"#f4f4f5",plain:"",style:{color:"black",border:"#e4e4e7 1px solid"},onClick:e[2]||(e[2]=i=>y.value=!1)},{default:a(()=>e[20]||(e[20]=[d("取消")])),_:1}),t(f,{color:"black",onClick:e[3]||(e[3]=i=>{y.value=!1,H()})},{default:a(()=>e[21]||(e[21]=[d(" 确认 ")])),_:1})])]),default:a(()=>[e[22]||(e[22]=s("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"10px"}},"克隆模型",-1)),e[23]||(e[23]=s("span",null,"确认是否克隆该模型，这将为你创建一个不可变更可见性的私有模型",-1))]),_:1},8,["modelValue"]),s("div",{class:"button"},[s("div",{class:"shared",onClick:G})]),s("div",De,[l.value.voiceIsLiked===1?(v(),m("div",{key:0,class:"likefill",onClick:e[5]||(e[5]=i=>D(l.value))})):(v(),m("div",{key:1,class:"like",onClick:e[6]||(e[6]=i=>D(l.value))}))]),s("div",Te,[l.value.voiceIsLiked===2?(v(),m("div",{key:0,class:"unlikefill",onClick:e[7]||(e[7]=i=>T(l.value))})):(v(),m("div",{key:1,class:"unlike",onClick:e[8]||(e[8]=i=>T(l.value))}))]),s("div",Ve,[l.value.voiceIsCollected?(v(),x(n,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:e[10]||(e[10]=i=>V(l.value))},{default:a(()=>[t(g(pe))]),_:1})):(v(),x(n,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:e[9]||(e[9]=i=>V(l.value))},{default:a(()=>[t(g(ve))]),_:1}))]),t(J,{placement:"bottom",width:100,visible:I.value},{reference:a(()=>[s("div",{class:"button",onClick:e[11]||(e[11]=i=>I.value=!I.value)},e[24]||(e[24]=[s("div",{class:"more"},null,-1)]))]),default:a(()=>[s("div",{class:"popper",onClick:K},[t(n,{size:"17",style:{"background-color":"#e0e5eb","border-radius":"6px",padding:"8px"}},{default:a(()=>[t(g(me))]),_:1}),e[25]||(e[25]=d(" 复制模型ID "))]),s("div",{class:"popper",onClick:e[12]||(e[12]=i=>b.value=!0)},[t(n,{size:"17",style:{"background-color":"#e0e5eb","border-radius":"6px",padding:"8px"}},{default:a(()=>[t(g(fe))]),_:1}),e[26]||(e[26]=d(" 举报模型 "))]),t(z,{modelValue:b.value,"onUpdate:modelValue":e[15]||(e[15]=i=>b.value=i),width:"30%","align-center":"","show-close":!1},{footer:a(()=>[s("span",Pe,[t(f,{color:"#f4f4f5",plain:"",style:{color:"black",border:"#e4e4e7 1px solid"},onClick:e[13]||(e[13]=i=>b.value=!1)},{default:a(()=>e[29]||(e[29]=[d("取消")])),_:1}),t(f,{color:"black",onClick:e[14]||(e[14]=i=>{b.value=!1,I.value=!1})},{default:a(()=>e[30]||(e[30]=[d(" 确认 ")])),_:1})])]),default:a(()=>[e[31]||(e[31]=s("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"10px"}},"报告模型",-1)),s("div",ze,[e[27]||(e[27]=d(" 你为什么要举报这个模型? ")),t(se,{options:R.value,"input-width":"432px",color:A.value,"onUpdate:value":h,style:{"margin-bottom":"10px"}},null,8,["options","color"]),e[28]||(e[28]=d(" 评论（至少20个字符） ")),t(le,{message:L.value.desctibe,placeholder:B.value,type:j.value,rows:E.value,"onUpdate:message":F},null,8,["message","placeholder","type","rows"])])]),_:1},8,["modelValue"])]),_:1},8,["visible"])])]),_:1}),t(P),t(Y,null,{default:a(()=>[t(X,{class:"main"},{default:a(()=>[t(N,{span:15},{default:a(()=>[s("div",Ne,[e[32]||(e[32]=s("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(v(!0),m(ge,null,ke(l.value.voiceSamples,(i,w)=>(v(),x(W,{key:w,class:"samples-item",shadow:"never"},{default:a(()=>[s("div",Me,[s("div",null,[s("span",Ae,r(w+1),1),s("span",null,r(i.sampleTitle),1)]),s("div",Be,[i.sampleIsPlaying?(v(),m("div",{key:1,class:"on",onClick:ee=>S(w)},null,8,Ee)):(v(),m("div",{key:0,class:"close",onClick:ee=>S(w)},null,8,je))])]),s("div",qe,r(i.sampleText),1)]),_:2},1024))),128))])]),_:1}),t(N,{span:9},{default:a(()=>[s("div",Oe,[e[37]||(e[37]=s("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"描述",-1)),s("div",Re,r(l.value.voiceDescription),1),t(P),s("div",he,[s("div",Fe,[e[33]||(e[33]=s("span",{class:"item-name"},"总点赞数",-1)),d(" "+r(l.value.voiceLikeCount),1)]),s("div",Ke,[e[34]||(e[34]=s("span",{class:"item-name"},"总标记数",-1)),d(" "+r(l.value.voiceCollectCount),1)])]),s("div",Ge,[s("div",He,[e[35]||(e[35]=s("span",{class:"item-name"},"总分享数",-1)),d(" "+r(l.value.voiceShareCount),1)]),s("div",Je,[e[36]||(e[36]=s("span",{class:"item-name"},"总使用数",-1)),d(" "+r(l.value.voiceUseCount),1)])])])]),_:1})]),_:1})]),_:1})]),_:1})])}}},to=te(Qe,[["__scopeId","data-v-481208ea"]]);export{to as default};
