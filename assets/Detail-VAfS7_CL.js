import{t as le}from"./time-tY07ncrd.js";import{M as ie}from"./Select-plqSTZoT.js";import{M as ae}from"./Input-B74L49Yd.js";import{_ as ne,r as p,p as de,q as re,x as ce,y as ue,z as m,b as l,w as i,a as u,u as ve,o as v,d as s,A as c,B as pe,f as k,C as me,e as d,c as $,D as fe,F as ge,G as ke,H as ye,I as be,J as Ce,K as I}from"./index-a8hoIFYM.js";import{a as M}from"./sound-BznpVhuQ.js";import{b as _e,a as Ie}from"./mybank-DgsxciAL.js";import{i as S}from"./request-nX3kZF43.js";import"./token-sExUEH0g.js";const we=f=>S.post(`/discover/share?voiceId=${f}`),j=f=>S.put("/discover/like",f),xe=f=>S.put("/discover/collect",f),Le={class:"common-layout"},$e={class:"title"},Se={class:"voice-detail"},Ue={class:"display-detail"},De={class:"display-detail"},Te={class:"tag1"},Ve={key:0,class:"tag2",style:{"margin-left":"5px"}},ze={class:"btns"},Pe={class:"dialog-footer"},Ne={class:"button"},Ae={class:"button"},Be={class:"button"},Me={class:"dialog"},je={class:"dialog-footer"},qe={class:"audio-samples"},Ee={class:"samples-content"},he={class:"samples-index"},Oe={class:"sample-btn"},Fe=["onClick"],Ke=["onClick"],Re={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},Ge={class:"audio-description"},He={class:"description"},Je={class:"two-item"},Qe={class:"one-item"},We={class:"one-item"},Xe={class:"two-item"},Ye={class:"one-item"},Ze={class:"one-item"},eo={__name:"Detail",setup(f){const q=p("#ffffff"),E=p("输入您的评论..."),h=p("textarea"),O=p("3"),F=ve(),U=de(),y=U.query?U.query.id:void 0,K=()=>{F.push({path:"/explanation",query:{id:y}})},w=p(!1),b=p(!1),C=p(!1),L=p({type:"",desctibe:""}),R=p([{value:"1",label:"无法工作"},{value:"2",label:"侵犯版本"},{value:"3",label:"其他"}]),G=o=>{L.value.type=o};function H(o){L.value.desctibe=o}const t=p({voiceId:1,userName:"fc",voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"55",voiceDescription:"1212",voiceCreationTime:new Date(2025,1,9,19,11),voiceUseCount:11e4,voiceShareCount:11,voiceLikeCount:20,voiceCollectCount:10,voiceLanguage:"ch",voiceTag:"aaaaaaaaa",voiceIsUsed:!1,voiceIsShared:!1,voiceIsLiked:"1",voiceIsCollected:!1,voiceSamples:[{sampleId:1,sampleIsPlaying:!1,sampleTitle:"Default Sample",sampleText:"哈哈哈笑死我了，这也太搞笑了吧！我靠我靠，这是什么神仙操作啊，太离谱了哩咯。笑得我肚子疼，这也太逗了吧，绝了绝了！",sampleUrl:M},{sampleId:2,sampleIsPlaying:!1,sampleTitle:"可以让父母",sampleText:"对侧人防热非人发热功耗一节课iklo",sampleUrl:M}]}),J=()=>{navigator.clipboard.writeText(y).then(()=>{I({message:"已复制到剪贴板",position:"bottom-right"})}).catch(o=>{I({message:`复制失败: ${o.message}`,position:"bottom-right",type:"error"})})},_=re({}),D=o=>{const e=t.value.voiceSamples[o],r=`-${o}`;if(_[r]){const n=_[r];e.sampleIsPlaying?n.pause():(T(),n.play())}else{const n=new Audio(e.sampleUrl);_[r]=n,n.addEventListener("ended",()=>{e.sampleIsPlaying=!1}),T(),n.play()}e.sampleIsPlaying=!e.sampleIsPlaying},T=()=>{Object.entries(_).forEach(([o,e])=>{if(!e.paused){e.pause();const[r,n]=o.split("-");t.value.sample[n].isPlaying=!1}})};ce(()=>{Object.values(_).forEach(o=>{o.pause(),o.src=""})}),ue(async()=>{let o=await _e(y);t.value=o.data});const Q=()=>{t.voiceIsShared===!1&&(t.voiceIsShared=!0,t.voiceShareCount++);const e=`${window.location.href}?id=${y}`;navigator.clipboard.writeText(e).then(async()=>{I({message:"已复制到剪贴板",position:"bottom-right"});try{let r=await we(y);console.log("111",r)}catch(r){console.error("分享服务调用失败:",r),I({message:`分享服务调用失败: ${r.message}`,position:"bottom-right",type:"error"})}}).catch(r=>{I({message:`复制失败: ${r.message}`,position:"bottom-right",type:"error"})})},V=async o=>{o.voiceIsLiked===1?(o.voiceIsLiked=0,o.voiceLikeCount--):(o.voiceIsLiked===2&&(o.voiceIsUnliked=!1),o.voiceIsLiked=1,o.voiceLikeCount++);const e={voiceId:o.voiceId,voiceLikeCount:o.voiceLikeCount};await j(e)},z=async o=>{o.voiceIsLiked===2?(o.voiceIsLiked=0,o.voiceIsUnliked=!1):(o.voiceIsLiked===1&&(o.voiceLikeCount--,o.voiceIsLiked=0),o.voiceIsLiked=2,o.voiceIsUnliked=!0);const e={voiceId:o.voiceId,voiceLikeCount:o.voiceLikeCount};await j(e)},P=async o=>{o.voiceIsCollected=!o.voiceIsCollected,o.voiceIsCollected?o.voiceCollectCount++:o.voiceCollectCount--;const e={voiceId:o.voiceId,voiceCollectCount:o.voiceCollectCount};await xe(e)},W=async()=>{const o=p({...t.value,voiceType:"0"});await Ie(o)};return(o,e)=>{const r=u("el-image"),n=u("el-icon"),g=u("el-button"),N=u("el-dialog"),X=u("el-popover"),Y=u("el-header"),A=u("el-divider"),Z=u("el-card"),B=u("el-col"),ee=u("el-row"),oe=u("el-main"),se=u("el-container");return v(),m("div",Le,[l(se,null,{default:i(()=>[l(Y,{class:"header"},{default:i(()=>[l(r,{class:"image",src:t.value.voiceImage,fit:"cover"},null,8,["src"]),s("div",$e,c(t.value.voiceName),1),s("div",Se,[s("span",Ue,c(t.value.userName),1),e[16]||(e[16]=s("div",{class:"dot"},null,-1)),l(n,{size:"20",style:{color:"#6b7280"}},{default:i(()=>[l(k(me))]),_:1}),s("span",De,c(k(le)(t.value.voiceCreationTime)),1),e[17]||(e[17]=s("div",{class:"dot"},null,-1)),s("div",Te,c(t.value.voiceLanguage),1),t.value.voiceTag!==""?(v(),m("div",Ve,c(t.value.voiceTag),1)):pe("",!0)]),s("div",ze,[l(g,{size:"large",color:"black",onClick:e[0]||(e[0]=a=>K(t.value.voiceId))},{default:i(()=>e[18]||(e[18]=[d("使用声音")])),_:1}),l(g,{size:"large",color:"black",onClick:e[1]||(e[1]=a=>b.value=!0)},{default:i(()=>e[19]||(e[19]=[d("克隆模型")])),_:1}),l(N,{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=a=>b.value=a),width:"30%","align-center":"","show-close":!1},{footer:i(()=>[s("span",Pe,[l(g,{color:"#f4f4f5",plain:"",style:{color:"black",border:"#e4e4e7 1px solid"},onClick:e[2]||(e[2]=a=>b.value=!1)},{default:i(()=>e[20]||(e[20]=[d("取消")])),_:1}),l(g,{color:"black",onClick:e[3]||(e[3]=a=>{b.value=!1,W()})},{default:i(()=>e[21]||(e[21]=[d(" 确认 ")])),_:1})])]),default:i(()=>[e[22]||(e[22]=s("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"10px"}},"克隆模型",-1)),e[23]||(e[23]=s("span",null,"确认是否克隆该模型，这将为你创建一个不可变更可见性的私有模型",-1))]),_:1},8,["modelValue"]),s("div",{class:"button"},[s("div",{class:"shared",onClick:Q})]),s("div",Ne,[t.value.voiceIsLiked===1?(v(),m("div",{key:0,class:"likefill",onClick:e[5]||(e[5]=a=>V(t.value))})):(v(),m("div",{key:1,class:"like",onClick:e[6]||(e[6]=a=>V(t.value))}))]),s("div",Ae,[t.value.voiceIsLiked===2?(v(),m("div",{key:0,class:"unlikefill",onClick:e[7]||(e[7]=a=>z(t.value))})):(v(),m("div",{key:1,class:"unlike",onClick:e[8]||(e[8]=a=>z(t.value))}))]),s("div",Be,[t.value.voiceIsCollected?(v(),$(n,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:e[10]||(e[10]=a=>P(t.value))},{default:i(()=>[l(k(ge))]),_:1})):(v(),$(n,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:e[9]||(e[9]=a=>P(t.value))},{default:i(()=>[l(k(fe))]),_:1}))]),l(X,{placement:"bottom",width:100,visible:w.value},{reference:i(()=>[s("div",{class:"button",onClick:e[11]||(e[11]=a=>w.value=!w.value)},e[24]||(e[24]=[s("div",{class:"more"},null,-1)]))]),default:i(()=>[s("div",{class:"popper",onClick:J},[l(n,{size:"17",style:{"background-color":"#e0e5eb","border-radius":"6px",padding:"8px"}},{default:i(()=>[l(k(ke))]),_:1}),e[25]||(e[25]=d(" 复制模型ID "))]),s("div",{class:"popper",onClick:e[12]||(e[12]=a=>C.value=!0)},[l(n,{size:"17",style:{"background-color":"#e0e5eb","border-radius":"6px",padding:"8px"}},{default:i(()=>[l(k(ye))]),_:1}),e[26]||(e[26]=d(" 举报模型 "))]),l(N,{modelValue:C.value,"onUpdate:modelValue":e[15]||(e[15]=a=>C.value=a),width:"30%","align-center":"","show-close":!1},{footer:i(()=>[s("span",je,[l(g,{color:"#f4f4f5",plain:"",style:{color:"black",border:"#e4e4e7 1px solid"},onClick:e[13]||(e[13]=a=>C.value=!1)},{default:i(()=>e[29]||(e[29]=[d("取消")])),_:1}),l(g,{color:"black",onClick:e[14]||(e[14]=a=>{C.value=!1,w.value=!1})},{default:i(()=>e[30]||(e[30]=[d(" 确认 ")])),_:1})])]),default:i(()=>[e[31]||(e[31]=s("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"10px"}},"报告模型",-1)),s("div",Me,[e[27]||(e[27]=d(" 你为什么要举报这个模型? ")),l(ie,{options:R.value,"input-width":"432px",color:q.value,"onUpdate:value":G,style:{"margin-bottom":"10px"}},null,8,["options","color"]),e[28]||(e[28]=d(" 评论（至少20个字符） ")),l(ae,{message:L.value.desctibe,placeholder:E.value,type:h.value,rows:O.value,"onUpdate:message":H},null,8,["message","placeholder","type","rows"])])]),_:1},8,["modelValue"])]),_:1},8,["visible"])])]),_:1}),l(A),l(oe,null,{default:i(()=>[l(ee,{class:"main"},{default:i(()=>[l(B,{span:15},{default:i(()=>[s("div",qe,[e[32]||(e[32]=s("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(v(!0),m(be,null,Ce(t.value.voiceSamples,(a,x)=>(v(),$(Z,{key:x,class:"samples-item",shadow:"never"},{default:i(()=>[s("div",Ee,[s("div",null,[s("span",he,c(x+1),1),s("span",null,c(a.sampleTitle),1)]),s("div",Oe,[a.sampleIsPlaying?(v(),m("div",{key:1,class:"on",onClick:te=>D(x)},null,8,Ke)):(v(),m("div",{key:0,class:"close",onClick:te=>D(x)},null,8,Fe))])]),s("div",Re,c(a.sampleText),1)]),_:2},1024))),128))])]),_:1}),l(B,{span:9},{default:i(()=>[s("div",Ge,[e[37]||(e[37]=s("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"描述",-1)),s("div",He,c(t.value.voiceDescription),1),l(A),s("div",Je,[s("div",Qe,[e[33]||(e[33]=s("span",{class:"item-name"},"总点赞数",-1)),d(" "+c(t.value.voiceLikeCount),1)]),s("div",We,[e[34]||(e[34]=s("span",{class:"item-name"},"总标记数",-1)),d(" "+c(t.value.voiceCollectCount),1)])]),s("div",Xe,[s("div",Ye,[e[35]||(e[35]=s("span",{class:"item-name"},"总分享数",-1)),d(" "+c(t.value.voiceShareCount),1)]),s("div",Ze,[e[36]||(e[36]=s("span",{class:"item-name"},"总使用数",-1)),d(" "+c(t.value.voiceUseCount),1)])])])]),_:1})]),_:1})]),_:1})]),_:1})])}}},co=ne(eo,[["__scopeId","data-v-5235f574"]]);export{co as default};
