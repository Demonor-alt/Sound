import{_ as Se,r as a,a1 as Ue,B as ne,C as m,o as c,f as l,g as p,e as t,T as ae,D as f,b as _,U as $e,E as Z,V as Te,W as me,d as Ye,a as o,h as s,a2 as Q,n as fe,c as W,a3 as el,N as F,K as ll,L as tl,u as ol,a4 as sl,F as al,G as il,H as nl,a5 as ul,Z as ge,O as dl,a6 as rl,a7 as vl,a8 as _e,Q as ye,v as be}from"./index-Bl4hSf2D.js";import{M as cl,S as pl}from"./SelectChange-Dkrec0Qv.js";import{C as ml,M as fl}from"./MySoundItem-C4D6SXTf.js";import{_ as gl,a as _l,b as yl,c as bl}from"./speaker-DeKGlsBD.js";/* empty css                                                    */import{M as ie}from"./Input-WaUXDyCF.js";import{e as kl}from"./mybank-DtZM3VdH.js";import{t as hl,f as ke,M as G}from"./Select-CXED_CDb.js";import{d as xl,o as he,c as xe,t as we,a as Ve,b as Ce}from"./actions-J2RIcmIz.js";import"./sound-BznpVhuQ.js";import"./collect-CKoOVs0O.js";import"./request-SCV2dptg.js";import"./token-YPBGfxfO.js";const wl=["src"],Vl={class:"audio_right"},Cl={class:"gap"},zl={class:"audio_time"},Sl={class:"volume"},Ul={class:"volume_progress"},$l={__name:"AudioPlayer",props:{audioUrl:String,buttonSize:{type:String,default:"30"},sliderLength:{type:String,default:"420"}},setup(h){const E=h,S=a(!0),P=a("0:00"),D=a("0:00"),R=a(0),k=a(80),U=a(!1),g=a(null),x=a(0);Ue(()=>E.isPauseTtsAudio,(u,v)=>{u&&B()});function B(){g.value.pause(),S.value=!0}ne(()=>{O()});function O(){const u=g.value;u.loop=!1,u.src=E.audioUrl,u.addEventListener("ended",()=>{S.value=!0,x.value=0}),u&&(u.oncanplay=()=>{R.value=u.duration,D.value=N(u.duration)},u.volume=.8)}function N(u){const v=Math.floor(u/60),T=Math.floor(u%60),y=String(v).padStart(2,"0"),J=String(T).padStart(2,"0");return`${y}:${J}`}function q(){g.value.paused?(g.value.play(),S.value=!1):(g.value.pause(),S.value=!0)}function j(u){var v=u.target.currentTime/u.target.duration;g.value.play&&(x.value=v*100,P.value=N(g.value.currentTime))}const $=u=>{if(console.log(u),!u)return;let v=R.value*(u/100);g.value.currentTime=v},H=u=>{g.value.volume=u/100};return(u,v)=>{const T=_("el-slider");return c(),m("div",null,[l("audio",{onTimeupdate:j,controls:"",ref_key:"audioRef",ref:g,style:{display:"none"}},[l("source",{src:h.audioUrl,type:"audio/mpeg"},null,8,wl),v[4]||(v[4]=p(" 您的浏览器不支持音频播放 "))],544),l("div",Vl,[l("div",Cl,[S.value?(c(),m("img",{key:0,onClick:q,class:"audio_icon",style:ae({width:h.buttonSize+"px",height:h.buttonSize+"px"}),src:gl,alt:"播放"},null,4)):(c(),m("img",{key:1,onClick:q,class:"audio_icon",style:ae({width:h.buttonSize+"px",height:h.buttonSize+"px"}),src:_l,alt:"暂停"},null,4)),l("div",zl,[l("span",null,f(P.value),1),v[5]||(v[5]=p("  /  ")),l("span",null,f(D.value),1)]),t(T,{class:"slider_box",modelValue:x.value,"onUpdate:modelValue":v[0]||(v[0]=y=>x.value=y),"show-tooltip":!1,onInput:$,style:ae({width:h.sliderLength+"px"})},null,8,["modelValue","style"]),l("div",Sl,[$e(l("div",Ul,[t(T,{"show-tooltip":!1,vertical:"",height:"100px",class:"volume_bar",modelValue:k.value,"onUpdate:modelValue":v[1]||(v[1]=y=>k.value=y),onChange:H},null,8,["modelValue"])],512),[[Te,U.value]]),k.value<=0?(c(),m("img",{key:0,class:"volume_icon",onClick:v[2]||(v[2]=me(y=>U.value=!U.value,["stop"])),src:yl,alt:""})):Z("",!0),k.value>0?(c(),m("img",{key:1,class:"volume_icon",onClick:v[3]||(v[3]=me(y=>U.value=!U.value,["stop"])),src:bl,alt:""})):Z("",!0)])])])])}}},ze=Se($l,[["__scopeId","data-v-96e31832"]]),Tl={class:"row"},Il={class:"col1"},Fl={class:"input-section"},Ll={class:"counter"},Ml={class:"warning"},Nl={key:1,class:"select-output-section"},Al={class:"select-voice-name"},El={class:"select-voice-detail"},Pl={class:"display-detail"},Dl={class:"display-detail"},Rl={class:"tag1"},Bl={key:0,class:"tag2",style:{"margin-left":"5px"}},Ol={class:"select-btns"},ql={class:"btns-plus"},jl={class:"button"},Hl={class:"number"},Kl={class:"button"},Ql={class:"button"},Wl={class:"number"},Gl={style:{display:"flex","flex-direction":"row",gap:"10px"}},Zl={class:"my-header"},Jl=["id"],Xl={class:"action-sum"},Yl={style:{width:"155px"}},et={class:"action-bar"},lt={class:"content"},tt={style:{display:"flex","justify-content":"center"}},ot={style:{"max-height":"53vh","overflow-y":"auto"}},st={style:{"max-height":"53vh","overflow-y":"auto"}},at={style:{"max-height":"53vh","overflow-y":"auto"}},it={class:"advanced-settings"},nt={class:"content-wrapper"},ut={class:"mode"},dt={class:"detail"},rt={class:"demo-progress"},vt={class:"detail"},ct={class:"demo-progress"},pt={class:"build"},mt={class:"col2"},ft={key:0},gt={class:"audio-item"},_t={class:"audio-top"},yt={class:"audio-content"},bt={class:"audio-info"},kt={class:"audio-text"},ht={class:"audio-name"},xt={class:"audio-actions"},wt={class:"dialog"},Vt={class:"dialog-footer"},Ct={class:"audio-top"},zt={class:"audio-content"},St={class:"audio-info"},Ut={class:"audio-text"},$t={class:"audio-name"},Tt={class:"audio-actions"},It={class:"dialog"},Ft={class:"dialog-footer"},Lt=["onClick"],Mt=["onClick"],Nt={key:2},At={__name:"Explanation",setup(h){const E=a("输入您想生成的语音文本"),S=a("textarea"),P=a("5"),D=a("500"),R=a("#fafafa"),k=a("");function U(n){k.value=n}const g=ol(),x=a(""),B=Ye(),O=B.query?B.query.id:void 0;Ue(()=>g.currentRoute.value.fullPath,(n,e)=>{const d=n.match(/\?id=(\d+)/);d?x.value=d[1]:x.value="",$.value=!1,N(x.value)});const N=async n=>{let e=await kl(n);r.value=e.data[0];const d=atob(data),M=new Uint8Array(d.length);for(let C=0;C<d.length;C++)M[C]=d.charCodeAt(C);new Blob([M],{type:fileType})};ne(async()=>{O&&N(O)});const q=()=>{g.push("/createbank")},j=a("first"),$=a(!1),H=a("#ffffff"),u=a([{value:"1",label:"推荐"},{value:"2",label:"最新"}]),v=a([{value:"1",label:"所有"},{value:"ch",label:"汉语"},{value:"en",label:"English"}]),T=a([{value:"1",label:"暂无问题"},{value:"2",label:"音频存在截断"},{value:"3",label:"有多个人说话（音色跳变）"},{value:"4",label:"噪音"},{value:"5",label:"超长空白"},{value:"6",label:"声音太小/声音模糊"},{value:"7",label:"混响很大"},{value:"8",label:"吞字漏字错字"}]),y=a("#ffffff"),J=a(),ue=n=>{J.value=n},de=a();ne(async()=>{let n=await xl();de.value=n.data});const X=a(""),Y=a("1"),ee=a(""),le=a(""),L=a(""),Ie=()=>{X.value="",Y.value="1",ee.value="",L.value=""},re=a("搜索声音..."),Fe=n=>{X.value=n},Le=n=>{Y.value=n},Me=n=>{le.value=n,console.log(le.value)};function ve(n){L.value=n}const K=a(!1),b=a(!1),r=a(),ce=a(),I=a(),A=a(!1),te=a(!1),Ne=()=>{A.value=!A.value},Ae=n=>{n.style.height="auto";const e=getComputedStyle(n).height;n.style.height="0",setTimeout(()=>{n.style.height=e},10)},Ee=n=>{n.style.height="auto"},Pe=n=>{n.style.height=getComputedStyle(n).height},De=n=>{setTimeout(()=>{n.style.height="0"},10)},w=a(1),Re=()=>{w.value=Number((w.value+.1).toFixed(1))},Be=()=>{w.value=Number((w.value-.1).toFixed(1))},V=a(1),Oe=()=>{V.value=Number((V.value+.1).toFixed(1))},qe=()=>{V.value=Number((V.value-.1).toFixed(1))},je=()=>{g.push("/explanation"),r.value=""},oe=a(!1),He=()=>{oe.value=!0,r.value.voiceId,k.value,te.value,w.value,V.value};return(n,e)=>{const d=_("el-icon"),M=_("el-image"),C=_("el-col"),Ke=_("el-row"),Qe=_("el-popover"),se=_("el-tab-pane"),We=_("el-tabs"),Ge=_("el-switch"),pe=_("el-slider"),Ze=_("el-divider"),Je=_("el-empty");return c(),m("div",Tl,[l("div",Il,[e[44]||(e[44]=l("h1",null,"文本转语音",-1)),l("div",Fl,[e[26]||(e[26]=l("div",{class:"text"},"您的文本",-1)),t(ie,{message:k.value,placeholder:E.value,type:S.value,maxlength:D.value,rows:P.value,color:R.value,"onUpdate:message":U},null,8,["message","placeholder","type","maxlength","rows","color"]),l("div",Ll,f(k.value.length)+"/500",1)]),l("div",Ml,[t(d,{size:"12"},{default:o(()=>[t(s(sl))]),_:1}),e[27]||(e[27]=p(" 语言质量取决于模型，为获得最佳效果，请使用高质量模型，严禁合成政治、色情、赌博、毒品等违法违规内容。 "))]),l("div",{class:"voice-selection"},[e[29]||(e[29]=l("div",{class:"text"},"语音声音",-1)),l("div",{style:{display:"flex","flex-direction":"row",gap:"10px"}},[e[28]||(e[28]=p("没有模型? ")),l("div",{class:"voice-selection-btn",onClick:q},"一分钟创建")])]),r.value?(c(),m("div",Nl,[t(Ke,{class:"select-voice-item"},{default:o(()=>[t(C,{span:4},{default:o(()=>[t(M,{style:{width:"80px",height:"80px","border-radius":"15px"},src:r.value.voiceImage,fit:"cover"},null,8,["src"])]),_:1}),t(C,{span:17},{default:o(()=>[l("div",Al,f(r.value.voiceName),1),l("div",El,[l("span",Pl,f(r.value.userName),1),e[31]||(e[31]=l("div",{class:"mydot"},null,-1)),t(d,{size:"20",style:{color:"#6b7280"}},{default:o(()=>[t(s(al))]),_:1}),l("span",Dl,f(s(hl)(r.value.voiceCreationTime)),1),e[32]||(e[32]=l("div",{class:"mydot"},null,-1)),l("div",Rl,f(r.value.voiceLanguage),1),r.value.voiceTag!==""?(c(),m("div",Bl,f(r.value.voiceTag),1)):Z("",!0)]),l("div",Ol,[l("div",ql,[l("div",jl,[r.value.voiceIsLiked===1?(c(),m("div",{key:0,class:"likefill",onClick:e[1]||(e[1]=i=>s(we)(r.value))})):(c(),m("div",{key:1,class:"like",onClick:e[2]||(e[2]=i=>s(we)(r.value))})),l("div",Hl,f(s(ke)(r.value.voiceLikeCount)),1)]),l("div",Kl,[r.value.voiceIsLiked===2?(c(),m("div",{key:0,class:"unlikefill",onClick:e[3]||(e[3]=i=>s(Ve)(r.value))})):(c(),m("div",{key:1,class:"unlike",onClick:e[4]||(e[4]=i=>s(Ve)(r.value))}))]),l("div",Ql,[r.value.voiceIsCollected?(c(),W(d,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:e[6]||(e[6]=i=>s(Ce)(r.value))},{default:o(()=>[t(s(nl))]),_:1})):(c(),W(d,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:e[5]||(e[5]=i=>s(Ce)(r.value))},{default:o(()=>[t(s(il))]),_:1})),l("div",Wl,f(s(ke)(r.value.voiceCollectCount)),1)])])])]),_:1}),t(C,{span:3},{default:o(()=>[l("div",Gl,[t(d,{size:"28",style:{cursor:"pointer"},onClick:e[7]||(e[7]=i=>{$.value=!0})},{default:o(()=>[t(s(ul))]),_:1}),t(d,{size:"28",style:{cursor:"pointer"},onClick:je},{default:o(()=>[t(s(ge))]),_:1})])]),_:1})]),_:1})])):(c(),m("div",{key:0,class:"output-section",onClick:e[0]||(e[0]=i=>$.value=!0)},e[30]||(e[30]=[l("div",{class:"add"},null,-1),l("div",{style:{"font-weight":"600"}},"选择语音声音",-1)]))),t(s(Q),{modelValue:$.value,"onUpdate:modelValue":e[11]||(e[11]=i=>$.value=i),"show-close":!1},{header:o(({close:i,titleId:z,titleClass:Xe})=>[l("div",Zl,[l("div",{style:{"font-weight":"600"},id:z,class:fe(Xe)},"选择语音",10,Jl),t(d,{style:{cursor:"pointer"},onClick:i},{default:o(()=>[t(s(ge))]),_:2},1032,["onClick"])])]),default:o(()=>[t(We,{modelValue:j.value,"onUpdate:modelValue":e[10]||(e[10]=i=>j.value=i),class:"demo-tabs",onTabClick:Ie},{default:o(()=>[t(se,{label:"探索",name:"first"},{default:o(()=>[l("div",Xl,[l("div",Yl,[t(ie,{message:L.value,placeholder:re.value,size:"medium",background:"#FFF","onUpdate:message":ve},null,8,["message","placeholder"])]),l("div",et,[e[36]||(e[36]=l("span",{class:"header-tip"},"排序",-1)),t(G,{options:u.value,"input-width":"155px",color:H.value,size:"medium",background:"#FFF","onUpdate:value":Fe},null,8,["options","color"]),e[37]||(e[37]=l("span",{class:"header-tip"},"语言",-1)),t(G,{options:v.value,"input-width":"155px",color:H.value,size:"medium",background:"#FFF","onUpdate:value":Le},null,8,["options","color"]),t(Qe,{placement:"bottom",width:250,visible:K.value},{reference:o(()=>[t(s(F),{size:"large",class:"btn",onClick:e[8]||(e[8]=i=>K.value=!K.value)},{default:o(()=>[t(d,{size:"20",color:"black"},{default:o(()=>[t(s(dl))]),_:1})]),_:1})]),default:o(()=>[l("div",lt,[e[34]||(e[34]=l("div",{class:"content-header"},[l("span",{style:{"font-size":"large","font-weight":"600",color:"black"}},"筛选")],-1)),e[35]||(e[35]=l("div",null,"标签",-1)),t(cl,{options:de.value,"input-width":"200px","onUpdate:value":Me},null,8,["options"]),l("div",tt,[t(s(F),{color:"black",style:{width:"95%"},onClick:e[9]||(e[9]=i=>{K.value=!1,ee.value=le.value})},{default:o(()=>e[33]||(e[33]=[p("应用")])),_:1})])])]),_:1},8,["visible"])])]),l("div",ot,[t(pl,{nameValue:L.value,sortValue:X.value,languageValue:Y.value,tagValue:ee.value},null,8,["nameValue","sortValue","languageValue","tagValue"])])]),_:1}),t(se,{label:"收藏",name:"second"},{default:o(()=>[l("div",st,[t(ml)])]),_:1}),t(se,{label:"我的语音",name:"third"},{default:o(()=>[t(ie,{message:L.value,placeholder:re.value,class:"action-bar","onUpdate:message":ve,style:{width:"20%"},background:"#FFF",size:"medium"},null,8,["message","placeholder"]),l("div",at,[t(fl,{nameValue:L.value},null,8,["nameValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l("div",it,[l("div",{class:fe(["toggle-button",{active:A.value}]),onClick:Ne},[e[38]||(e[38]=l("span",{style:{"font-size":"large"}},"高级设置",-1)),A.value?(c(),W(d,{key:1},{default:o(()=>[t(s(vl))]),_:1})):(c(),W(d,{key:0},{default:o(()=>[t(s(rl))]),_:1}))],2),t(el,{name:"expand",onEnter:Ae,onAfterEnter:Ee,onBeforeLeave:Pe,onLeave:De},{default:o(()=>[$e(l("div",nt,[l("div",ut,[e[39]||(e[39]=l("div",{class:"detail"},[p(" 高品质模式 "),l("span",{style:{"font-size":"small"}},"生成更高品质的音频，但会增加延迟")],-1)),t(Ge,{modelValue:te.value,"onUpdate:modelValue":e[12]||(e[12]=i=>te.value=i),class:"ml-2",style:{"--el-switch-on-color":"black","--el-switch-off-color":"#e4e7ed"}},null,8,["modelValue"])]),l("div",null,[l("div",dt,[p(" 语速("+f(w.value.toFixed(1))+"x) ",1),e[40]||(e[40]=l("span",{style:{"font-size":"small"}},"基于参考音频的语速进行调整",-1))]),l("div",rt,[t(d,{size:"20",onClick:Be},{default:o(()=>[t(s(_e))]),_:1}),t(pe,{modelValue:w.value,"onUpdate:modelValue":e[13]||(e[13]=i=>w.value=i),min:0,max:3,"show-tooltip":!1,step:.1,style:{"margin-right":"10px"}},null,8,["modelValue"]),t(d,{size:"20",onClick:Re},{default:o(()=>[t(s(ye))]),_:1})])]),l("div",null,[l("div",vt,[p(" 音量("+f(V.value.toFixed(1))+") ",1),e[41]||(e[41]=l("span",{style:{"font-size":"small"}},"基于参考音频的音量进行调整",-1))]),l("div",ct,[t(d,{size:"20",onClick:qe},{default:o(()=>[t(s(_e))]),_:1}),t(pe,{modelValue:V.value,"onUpdate:modelValue":e[14]||(e[14]=i=>V.value=i),min:0,max:3,"show-tooltip":!1,step:.1,style:{"margin-right":"10px"}},null,8,["modelValue"]),t(d,{size:"20",onClick:Oe},{default:o(()=>[t(s(ye))]),_:1})])])],512),[[Te,A.value]])]),_:1})]),l("div",pt,[t(s(F),{color:"black",onClick:He},{default:o(()=>e[42]||(e[42]=[p("创建")])),_:1})]),t(s(Q),{modelValue:oe.value,"onUpdate:modelValue":e[15]||(e[15]=i=>oe.value=i),"show-close":!1,width:"25%",title:"正在创建语言","align-center":""},{default:o(()=>e[43]||(e[43]=[l("div",{style:{margin:"20px"}},[l("div",{class:"loading-dots"},[l("span",{class:"dot dot1"}),l("span",{class:"dot dot2"}),l("span",{class:"dot dot3"})]),l("div",{style:{display:"flex","justify-content":"center",margin:"10px"}},"正在分析文本")],-1)])),_:1},8,["modelValue"])]),t(Ze,{direction:"vertical",style:{height:"auto"}}),l("div",mt,[I.value?(c(),m("div",ft,[e[50]||(e[50]=l("h3",null,"生成的音频",-1)),l("div",gt,[l("div",_t,[t(M,{src:I.value.voiceImage,style:{width:"60px",height:"60px","border-radius":"15px"},fit:"cover"},null,8,["src"]),l("div",yt,[l("div",bt,[l("div",kt,f(I.value.audioText),1),l("div",ht,[t(d,{size:"20"},{default:o(()=>[t(s(be))]),_:1}),p(" "+f(I.value.voiceName),1)])]),l("div",xt,[l("div",{class:"dontagree",onClick:e[16]||(e[16]=i=>b.value=!0)}),t(s(Q),{modelValue:b.value,"onUpdate:modelValue":e[19]||(e[19]=i=>b.value=i),width:"30%","align-center":"","show-close":!1},{footer:o(()=>[l("span",Vt,[t(s(F),{color:"black",plain:"",onClick:e[17]||(e[17]=i=>{b.value=!1})},{default:o(()=>e[46]||(e[46]=[p(" 取消 ")])),_:1}),t(s(F),{color:"black",onClick:e[18]||(e[18]=i=>{b.value=!1})},{default:o(()=>e[47]||(e[47]=[p(" 确认 ")])),_:1})])]),default:o(()=>[e[48]||(e[48]=l("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"20px"}}," 音频质量反馈",-1)),l("div",wt,[e[45]||(e[45]=p(" 反馈类型 ")),t(G,{options:T.value,"input-width":"432px",color:y.value,"onUpdate:value":ue,style:{"margin-bottom":"10px"}},null,8,["options","color"])])]),_:1},8,["modelValue"]),l("div",{class:"share",onClick:e[20]||(e[20]=i=>s(he)(I.value.audioId))}),l("div",{class:"download",onClick:e[21]||(e[21]=i=>s(xe)(I.value.audioURL))})])])]),e[49]||(e[49]=l("div",{class:"divide"},null,-1)),t(ze,{audioUrl:I.value.audioURL,buttonSize:20,sliderLength:300},null,8,["audioUrl"])])])):Z("",!0),e[56]||(e[56]=l("h3",null,"最新活动",-1)),ce.value?(c(!0),m(ll,{key:1},tl(ce.value,i=>(c(),m("div",{key:i.audioId,class:"audio-item"},[l("div",Ct,[t(M,{src:i.voiceImage,style:{width:"60px",height:"60px","border-radius":"15px"},fit:"cover"},null,8,["src"]),l("div",zt,[l("div",St,[l("div",Ut,f(i.audioText),1),l("div",$t,[t(d,{size:"20"},{default:o(()=>[t(s(be))]),_:1}),p(" "+f(i.voiceName),1)])]),l("div",Tt,[l("div",{class:"dontagree",onClick:e[22]||(e[22]=z=>b.value=!0)}),t(s(Q),{modelValue:b.value,"onUpdate:modelValue":e[25]||(e[25]=z=>b.value=z),width:"30%","align-center":"","show-close":!1},{footer:o(()=>[l("span",Ft,[t(s(F),{color:"black",plain:"",onClick:e[23]||(e[23]=z=>{b.value=!1})},{default:o(()=>e[52]||(e[52]=[p(" 取消 ")])),_:1}),t(s(F),{color:"black",onClick:e[24]||(e[24]=z=>{b.value=!1})},{default:o(()=>e[53]||(e[53]=[p(" 确认 ")])),_:1})])]),default:o(()=>[e[54]||(e[54]=l("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"20px"}}," 音频质量反馈",-1)),l("div",It,[e[51]||(e[51]=p(" 反馈类型 ")),t(G,{options:T.value,"input-width":"432px",color:y.value,"onUpdate:value":ue,style:{"margin-bottom":"10px"}},null,8,["options","color"])])]),_:1},8,["modelValue"]),l("div",{class:"share",onClick:z=>s(he)(i.audioId)},null,8,Lt),l("div",{class:"download",onClick:z=>s(xe)(i.audioURL)},null,8,Mt)])])]),e[55]||(e[55]=l("div",{class:"divide"},null,-1)),t(ze,{audioUrl:i.audioURL,buttonSize:20,sliderLength:300},null,8,["audioUrl"])]))),128)):(c(),m("div",Nt,[t(Je,{description:"暂无数据"})]))])])}}},Zt=Se(At,[["__scopeId","data-v-222db963"]]);export{Zt as default};
