import{_ as _e,r as f,u as fe,q as Ae,y as le,a as g,z as u,o as n,B as se,b as t,I as A,J,c as V,w as l,d as e,A as r,f as m,C as ke,e as w,D as ge,F as ye,K as W,N as cs,p as us,W as rs,L as Q,X as ne,n as ze,Y as vs,Z as ps,$ as ms,T as Ne,M as _s,a0 as fs,a1 as ks,a2 as gs,a3 as Pe,O as De,a4 as ys,l as Ee}from"./index-CiQKPSkZ.js";import{M as hs,S as Cs}from"./SelectChange-DYsga-xb.js";import{t as he}from"./time-tY07ncrd.js";import{a as ce}from"./sound-BznpVhuQ.js";import{d as Re,a as ue,b as je,c as Is,M as de}from"./discover-8Q_0rted.js";import{b as bs}from"./collect-BTVJul0e.js";import{k as $s,e as ws}from"./mybank-CrijUi5M.js";import{u as qe}from"./token-BCwteI7G.js";import{A as Me}from"./AudioPlayer-DlS9IN1x.js";import{M as me}from"./Input-CKOj4Po6.js";import{i as Ce}from"./request-C29fjzPY.js";const xs={key:0},Ls=["onClick"],Us={class:"voice-detail"},Ss={class:"display-detail"},Vs={class:"display-detail"},Ts={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},zs={class:"display-detail"},Ns={class:"audio-samples"},Ps={class:"samples-content"},Ds={class:"samples-index"},Es={class:"sample-btn"},Ms=["src"],As=["src"],Rs=["onClick"],js=["onClick"],qs={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},Fs={class:"tag1"},Bs={key:0,class:"tag2",style:{"margin-left":"5px"}},Ks={class:"voice-sample"},Os={class:"sample-btn"},Qs=["onClick"],Ws=["onClick"],Xs={style:{width:"50%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","font-size":"small"}},Gs={class:"btns"},Hs={class:"btns-plus"},Js={class:"button"},Ys={class:"number"},Zs={class:"button"},et=["onClick"],st={class:"number"},tt={class:"button"},ot=["onClick"],lt=["onClick"],it={class:"number"},at={class:"button"},nt=["onClick"],dt=["onClick"],ct={class:"button"},ut={class:"number"},rt={__name:"CollectSoundItem",setup(E){const L=f([{voiceId:2,userName:"fc",voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"55",voiceDescription:"1212",voiceCreationTime:new Date(2025,1,9,19,11),voiceUseCount:11e4,voiceShareCount:11,voiceLikeCount:20,voiceCollectCount:10,voiceLanguage:"ch",voiceTag:"aaaaaaaaa",voiceIsUsed:!1,voiceIsShared:!1,voiceIsLiked:!1,voiceIsUnliked:!1,voiceIsCollected:!1,voiceSamples:[{sampleId:1,sampleIsPlaying:!1,sampleTitle:"Default Sample",sampleText:"哈哈哈笑死我了，这也太搞笑了吧！我靠我靠，这是什么神仙操作啊，太离谱了哩咯。笑得我肚子疼，这也太逗了吧，绝了绝了！",sampleUrl:ce},{sampleId:2,sampleIsPlaying:!1,sampleTitle:"可以让父母",sampleText:"对侧人防热非人发热功耗一节课iklo",sampleUrl:ce}]}]),U=fe(),Y=a=>{U.push({path:"/detail",query:{id:a}})},Z=a=>{U.push({path:"/explanation",query:{id:a}})};function R(a){if(typeof a!="number"||isNaN(a))return a;const p=1e3;return a>=p*10?(a/p).toFixed(2)+"K":a}const T=Ae({}),z=(a,p)=>{const i=L.value.find(y=>y.voiceId===a);if(!i)return;const d=i.voiceSamples[p],h=`${a}-${p}`;if(T[h]){const y=T[h];d.sampleIsPlaying?y.pause():(Object.values(T).forEach($=>$.pause()),y.play())}else{const y=new Audio(d.sampleUrl);T[h]=y,y.addEventListener("ended",()=>{d.sampleIsPlaying=!1}),y.play()}d.sampleIsPlaying=!d.sampleIsPlaying,i.voiceSamples.forEach((y,$)=>{$!==p&&(y.sampleIsPlaying=!1)})};le(async()=>{let a=await bs();L.value=a.data});const M=a=>{const p=L.value.findIndex(h=>h.voiceId===a);L.value[p].voiceIsShared===!1&&(L.value[p].voiceIsShared=!0,L.value[p].voiceShareCount++);const d=`${window.location.href}?id=${a}`;navigator.clipboard.writeText(d).then(async()=>{W({message:"已复制到剪贴板",position:"bottom-right"});try{let h=await Re(a)}catch(h){console.error("分享服务调用失败:",h),W({message:`分享服务调用失败: ${h.message}`,position:"bottom-right",type:"error"})}}).catch(h=>{W({message:`复制失败: ${h.message}`,position:"bottom-right",type:"error"})})},N=async a=>{a.voiceIsLiked===1?(a.voiceIsLiked=0,a.voiceLikeCount--):(a.voiceIsLiked===2&&(a.voiceIsUnliked=!1),a.voiceIsLiked=1,a.voiceLikeCount++);const p={voiceId:a.voiceId,voiceLikeCount:a.voiceLikeCount};await ue(p)},X=async a=>{a.voiceIsLiked===2?(a.voiceIsLiked=0,a.voiceIsUnliked=!1):(a.voiceIsLiked===1&&(a.voiceLikeCount--,a.voiceIsLiked=0),a.voiceIsLiked=2,a.voiceIsUnliked=!0);const p={voiceId:a.voiceId,voiceLikeCount:a.voiceLikeCount};await ue(p)},j=async a=>{a.voiceIsCollected=!a.voiceIsCollected,a.voiceIsCollected?a.voiceCollectCount++:a.voiceCollectCount--;const p={voiceId:a.voiceId,voiceCollectCount:a.voiceCollectCount};await je(p)};return(a,p)=>{const i=g("el-empty"),d=g("el-image"),h=g("el-col"),y=g("el-icon"),$=g("el-card"),x=g("el-popover"),P=g("el-button"),te=g("el-row");return n(),u(A,null,[L.value.length===0?(n(),u("div",xs,[t(i,{description:"暂无数据"})])):se("",!0),(n(!0),u(A,null,J(L.value,_=>(n(),V(te,{key:_.voiceId,class:"voice-item"},{default:l(()=>[t(h,{span:4},{default:l(()=>[t(d,{style:{width:"100px",height:"100px","border-radius":"15px"},src:_.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1024),t(h,{span:20},{default:l(()=>[e("div",{class:"voice-name",onClick:C=>Y(_.voiceId)},r(_.voiceName),9,Ls),e("div",Us,[e("span",Ss,r(_.userName),1),p[3]||(p[3]=e("div",{class:"dot"},null,-1)),t(y,{size:"20",style:{color:"#6b7280"}},{default:l(()=>[t(m(ke))]),_:1}),e("span",Vs,r(m(he)(_.voiceCreationTime)),1),p[4]||(p[4]=e("div",{class:"dot"},null,-1)),t(x,{placement:"bottom",width:400,trigger:"click"},{reference:l(()=>[e("div",Ts,[p[0]||(p[0]=e("div",{class:"logo"},null,-1)),e("span",zs,r(_.voiceSamples.length)+" 音频示例",1)])]),default:l(()=>[e("div",Ns,[p[2]||(p[2]=e("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(n(!0),u(A,null,J(_.voiceSamples,(C,c)=>(n(),V($,{key:c,class:"samples-item",shadow:"never"},{default:l(()=>[e("div",Ps,[e("div",null,[e("span",Ds,r(c+1),1),e("span",null,r(C.sampleTitle),1)]),e("div",Es,[e("audio",null,[e("source",{src:C.sampleUrl,type:"audio/mp4"},null,8,Ms),e("source",{src:C.sampleUrl,type:"audio/x-m4a"},null,8,As),p[1]||(p[1]=w(" 浏览器不支持音频播放 "))]),C.sampleIsPlaying?(n(),u("div",{key:1,class:"on",onClick:k=>{z(_.voiceId,c),C.sampleIsPlaying=!1}},null,8,js)):(n(),u("div",{key:0,class:"close",onClick:k=>{z(_.voiceId,c),C.sampleIsPlaying=!0}},null,8,Rs))])]),e("div",qs,r(C.sampleText),1)]),_:2},1024))),128))])]),_:2},1024),p[5]||(p[5]=e("div",{class:"dot"},null,-1)),e("div",Fs,r(_.voiceLanguage),1),_.voiceTag!==""?(n(),u("div",Bs,r(_.voiceTag),1)):se("",!0)]),e("div",Ks,[(n(!0),u(A,null,J(_.voiceSamples,(C,c)=>(n(),u("div",{key:c,class:"voice-sample-item"},[e("div",Os,[C.sampleIsPlaying?(n(),u("div",{key:1,class:"on-plus",onClick:k=>z(_.voiceId,c)},null,8,Ws)):(n(),u("div",{key:0,class:"close-plus",onClick:k=>z(_.voiceId,c)},null,8,Qs))]),e("div",Xs,r(C.sampleText),1)]))),128))]),e("div",Gs,[t(P,{size:"large",color:"black",onClick:C=>Z(_.voiceId)},{default:l(()=>p[6]||(p[6]=[w("使用声音")])),_:2},1032,["onClick"]),e("div",Hs,[e("div",Js,[p[7]||(p[7]=e("div",{class:"used"},null,-1)),e("div",Ys,r(R(_.voiceUseCount))+" Used ",1)]),e("div",Zs,[e("div",{class:"shared",onClick:C=>M(_.voiceId)},null,8,et),e("div",st,r(R(_.voiceShareCount))+" Shares ",1)]),e("div",tt,[_.voiceIsLiked===1?(n(),u("div",{key:0,class:"likefill",onClick:C=>N(_)},null,8,ot)):(n(),u("div",{key:1,class:"like",onClick:C=>N(_)},null,8,lt)),e("div",it,r(R(_.voiceLikeCount)),1)]),e("div",at,[_.voiceIsLiked===2?(n(),u("div",{key:0,class:"unlikefill",onClick:C=>X(_)},null,8,nt)):(n(),u("div",{key:1,class:"unlike",onClick:C=>X(_)},null,8,dt))]),e("div",ct,[_.voiceIsCollected?(n(),V(y,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:C=>j(_)},{default:l(()=>[t(m(ye))]),_:2},1032,["onClick"])):(n(),V(y,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:C=>j(_)},{default:l(()=>[t(m(ge))]),_:2},1032,["onClick"])),e("div",ut,r(R(_.voiceCollectCount)),1)])])])]),_:2},1024)]),_:2},1024))),128))],64)}}},vt=_e(rt,[["__scopeId","data-v-8e4cc037"]]),pt={key:0},mt=["onClick"],_t={class:"voice-detail"},ft={class:"display-detail"},kt={class:"display-detail"},gt={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},yt={class:"display-detail"},ht={class:"audio-samples"},Ct={class:"samples-content"},It={class:"samples-index"},bt={class:"sample-btn"},$t=["src"],wt=["src"],xt=["onClick"],Lt=["onClick"],Ut={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},St={class:"tag1"},Vt={key:0,class:"tag2",style:{"margin-left":"5px"}},Tt={class:"voice-sample"},zt={class:"sample-btn"},Nt=["onClick"],Pt=["onClick"],Dt={style:{width:"50%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","font-size":"small"}},Et={class:"btns"},Mt={class:"btns-plus"},At={class:"button"},Rt={class:"number"},jt={class:"button"},qt=["onClick"],Ft={class:"number"},Bt={class:"button"},Kt=["onClick"],Ot=["onClick"],Qt={class:"number"},Wt={class:"button"},Xt=["onClick"],Gt=["onClick"],Ht={class:"button"},Jt={class:"number"},Yt={__name:"MySoundItem",props:{nameValue:{type:String,default:""}},setup(E){const L=E,U=f([{voiceId:1,userName:"fc",voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"55",voiceDescription:"1212",voiceCreationTime:new Date(2025,1,9,19,11),voiceUseCount:11e4,voiceShareCount:11,voiceLikeCount:20,voiceCollectCount:10,voiceLanguage:"ch",voiceTag:"aaaaaaaaa",voiceIsUsed:!1,voiceIsShared:!1,voiceIsLiked:!1,voiceIsUnliked:!1,voiceIsCollected:!1,voiceSamples:[{sampleId:1,sampleIsPlaying:!1,sampleTitle:"Default Sample",sampleText:"哈哈哈笑死我了，这也太搞笑了吧！我靠我靠，这是什么神仙操作啊，太离谱了哩咯。笑得我肚子疼，这也太逗了吧，绝了绝了！",sampleUrl:ce},{sampleId:2,sampleIsPlaying:!1,sampleTitle:"可以让父母",sampleText:"对侧人防热非人发热功耗一节课iklo",sampleUrl:ce}]}]),Y=cs(()=>U.value.filter(d=>d.voiceName.includes(L.nameValue))),Z=fe(),R=i=>{Z.push({path:"/detail",query:{id:i}})},T=i=>{Z.push({path:"/explanation",query:{id:i}})};function z(i){if(typeof i!="number"||isNaN(i))return i;const d=1e3;return i>=d*10?(i/d).toFixed(2)+"K":i}const M=Ae({}),N=(i,d)=>{const h=U.value.find(x=>x.voiceId===i);if(!h)return;const y=h.voiceSamples[d],$=`${i}-${d}`;if(M[$]){const x=M[$];y.sampleIsPlaying?x.pause():(Object.values(M).forEach(P=>P.pause()),x.play())}else{const x=new Audio(y.sampleUrl);M[$]=x,x.addEventListener("ended",()=>{y.sampleIsPlaying=!1}),x.play()}y.sampleIsPlaying=!y.sampleIsPlaying,h.voiceSamples.forEach((x,P)=>{P!==d&&(x.sampleIsPlaying=!1)})};qe(),le(async()=>{let i=await $s();U.value=i.data});const X=i=>{const d=U.value.findIndex($=>$.voiceId===i);U.value[d].voiceIsShared===!1&&(U.value[d].voiceIsShared=!0,U.value[d].voiceShareCount++);const y=`${window.location.href}?id=${i}`;navigator.clipboard.writeText(y).then(async()=>{W({message:"已复制到剪贴板",position:"bottom-right"});try{let $=await Re(i)}catch($){console.error("分享服务调用失败:",$),W({message:`分享服务调用失败: ${$.message}`,position:"bottom-right",type:"error"})}}).catch($=>{W({message:`复制失败: ${$.message}`,position:"bottom-right",type:"error"})})},j=async i=>{i.voiceIsLiked===1?(i.voiceIsLiked=0,i.voiceLikeCount--):(i.voiceIsLiked===2&&(i.voiceIsUnliked=!1),i.voiceIsLiked=1,i.voiceLikeCount++);const d={voiceId:i.voiceId,voiceLikeCount:i.voiceLikeCount};await ue(d)},a=async i=>{i.voiceIsLiked===2?(i.voiceIsLiked=0,i.voiceIsUnliked=!1):(i.voiceIsLiked===1&&(i.voiceLikeCount--,i.voiceIsLiked=0),i.voiceIsLiked=2,i.voiceIsUnliked=!0);const d={voiceId:i.voiceId,voiceLikeCount:i.voiceLikeCount};await ue(d)},p=async i=>{i.voiceIsCollected=!i.voiceIsCollected,i.voiceIsCollected?i.voiceCollectCount++:i.voiceCollectCount--;const d={voiceId:i.voiceId,voiceCollectCount:i.voiceCollectCount};await je(d)};return(i,d)=>{const h=g("el-empty"),y=g("el-image"),$=g("el-col"),x=g("el-icon"),P=g("el-card"),te=g("el-popover"),_=g("el-button"),C=g("el-row");return n(),u(A,null,[Y.value.length===0?(n(),u("div",pt,[t(h,{description:"暂无数据"})])):se("",!0),(n(!0),u(A,null,J(Y.value,c=>(n(),V(C,{key:c.voiceId,class:"voice-item"},{default:l(()=>[t($,{span:4},{default:l(()=>[t(y,{style:{width:"100px",height:"100px","border-radius":"15px"},src:c.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1024),t($,{span:20},{default:l(()=>[e("div",{class:"voice-name",onClick:k=>R(c.voiceId)},r(c.voiceName),9,mt),e("div",_t,[e("span",ft,r(c.userName),1),d[3]||(d[3]=e("div",{class:"dot"},null,-1)),t(x,{size:"20",style:{color:"#6b7280"}},{default:l(()=>[t(m(ke))]),_:1}),e("span",kt,r(m(he)(c.voiceCreationTime)),1),d[4]||(d[4]=e("div",{class:"dot"},null,-1)),t(te,{placement:"bottom",width:400,trigger:"click"},{reference:l(()=>[e("div",gt,[d[0]||(d[0]=e("div",{class:"logo"},null,-1)),e("span",yt,r(c.voiceSamples.length)+" 音频示例",1)])]),default:l(()=>[e("div",ht,[d[2]||(d[2]=e("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(n(!0),u(A,null,J(c.voiceSamples,(k,S)=>(n(),V(P,{key:S,class:"samples-item",shadow:"never"},{default:l(()=>[e("div",Ct,[e("div",null,[e("span",It,r(S+1),1),e("span",null,r(k.sampleTitle),1)]),e("div",bt,[e("audio",null,[e("source",{src:k.sampleUrl,type:"audio/mp4"},null,8,$t),e("source",{src:k.sampleUrl,type:"audio/x-m4a"},null,8,wt),d[1]||(d[1]=w(" 浏览器不支持音频播放 "))]),k.sampleIsPlaying?(n(),u("div",{key:1,class:"on",onClick:G=>{N(c.voiceId,S),k.sampleIsPlaying=!1}},null,8,Lt)):(n(),u("div",{key:0,class:"close",onClick:G=>{N(c.voiceId,S),k.sampleIsPlaying=!0}},null,8,xt))])]),e("div",Ut,r(k.sampleText),1)]),_:2},1024))),128))])]),_:2},1024),d[5]||(d[5]=e("div",{class:"dot"},null,-1)),e("div",St,r(c.voiceLanguage),1),c.voiceTag!==""?(n(),u("div",Vt,r(c.voiceTag),1)):se("",!0)]),e("div",Tt,[(n(!0),u(A,null,J(c.voiceSamples,(k,S)=>(n(),u("div",{key:S,class:"voice-sample-item"},[e("div",zt,[k.sampleIsPlaying?(n(),u("div",{key:1,class:"on-plus",onClick:G=>N(c.voiceId,S)},null,8,Pt)):(n(),u("div",{key:0,class:"close-plus",onClick:G=>N(c.voiceId,S)},null,8,Nt))]),e("div",Dt,r(k.sampleText),1)]))),128))]),e("div",Et,[t(_,{size:"large",color:"black",onClick:k=>T(c.voiceId)},{default:l(()=>d[6]||(d[6]=[w("使用声音")])),_:2},1032,["onClick"]),e("div",Mt,[e("div",At,[d[7]||(d[7]=e("div",{class:"used"},null,-1)),e("div",Rt,r(z(c.voiceUseCount))+" Used ",1)]),e("div",jt,[e("div",{class:"shared",onClick:k=>X(c.voiceId)},null,8,qt),e("div",Ft,r(z(c.voiceShareCount))+" Shares ",1)]),e("div",Bt,[c.voiceIsLiked===1?(n(),u("div",{key:0,class:"likefill",onClick:k=>j(c)},null,8,Kt)):(n(),u("div",{key:1,class:"like",onClick:k=>j(c)},null,8,Ot)),e("div",Qt,r(z(c.voiceLikeCount)),1)]),e("div",Wt,[c.voiceIsLiked===2?(n(),u("div",{key:0,class:"unlikefill",onClick:k=>a(c)},null,8,Xt)):(n(),u("div",{key:1,class:"unlike",onClick:k=>a(c)},null,8,Gt))]),e("div",Ht,[c.voiceIsCollected?(n(),V(x,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:k=>p(c)},{default:l(()=>[t(m(ye))]),_:2},1032,["onClick"])):(n(),V(x,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:k=>p(c)},{default:l(()=>[t(m(ge))]),_:2},1032,["onClick"])),e("div",Jt,r(z(c.voiceCollectCount)),1)])])])]),_:2},1024)]),_:2},1024))),128))],64)}}},Zt=_e(Yt,[["__scopeId","data-v-9bd8655a"]]),eo=E=>Ce.get(`/query/audio/${E}`),so=E=>Ce.post("/explanation",E),to=(E,L)=>{const U=new URLSearchParams({userId:E,voiceId:L});return Ce.post(`/use?${U.toString()}`)},oo={class:"row"},lo={class:"col1"},io={class:"input-section"},ao={class:"counter"},no={class:"warning"},co={class:"voice-selection"},uo={key:1,class:"select-output-section"},ro={class:"select-voice-name"},vo={class:"select-voice-detail"},po={class:"display-detail"},mo={class:"display-detail"},_o={class:"tag1"},fo={key:0,class:"tag2",style:{"margin-left":"5px"}},ko={class:"select-btns"},go={class:"btns-plus"},yo={class:"button"},ho={class:"number"},Co={class:"button"},Io={class:"button"},bo={class:"number"},$o={style:{display:"flex","flex-direction":"row",gap:"10px"}},wo={class:"my-header"},xo=["id"],Lo={class:"action-sum"},Uo={style:{width:"155px"}},So={class:"action-bar"},Vo={class:"content"},To={style:{display:"flex","justify-content":"center"}},zo={style:{"max-height":"53vh","overflow-y":"auto"}},No={style:{"max-height":"53vh","overflow-y":"auto"}},Po={style:{"max-height":"53vh","overflow-y":"auto"}},Do={class:"advanced-settings"},Eo={class:"content-wrapper"},Mo={class:"mode"},Ao={class:"detail"},Ro={class:"demo-progress"},jo={class:"detail"},qo={class:"demo-progress"},Fo={class:"build"},Bo={class:"col2"},Ko={key:0},Oo={class:"audio-item"},Qo={class:"audio-top"},Wo={class:"audio-content"},Xo={class:"audio-info"},Go={class:"audio-text"},Ho={class:"audio-name"},Jo={class:"audio-actions"},Yo={class:"dialog"},Zo={class:"dialog-footer"},el={class:"audio-top"},sl={class:"audio-content"},tl={class:"audio-info"},ol={class:"audio-text"},ll={class:"audio-name"},il={class:"audio-actions"},al={class:"dialog"},nl={class:"dialog-footer"},dl=["onClick"],cl=["onClick"],ul={key:2},rl={__name:"Explanation",setup(E){const L=f("输入您想生成的语音文本"),U=f("textarea"),Y=f("5"),Z=f("500"),R=f("#f5f5f5"),T=f("");function z(o){T.value=o}const M=fe(),N=f(""),X=us(),j=X.query?X.query.id:void 0;rs(()=>M.currentRoute.value.fullPath,(o,s)=>{const b=o.match(/\?id=(\d+)/);b?N.value=b[1]:N.value="",d.value=!1,a(N)});const a=async o=>{let s=await ws(o);I.value=s.data};le(async()=>{j&&a(j)});const p=()=>{M.push("/createbank")},i=f("first"),d=f(!1),h=f("#ffffff"),y=f([{value:"1",label:"推荐"},{value:"2",label:"最新"}]),$=f([{value:"1",label:"所有"},{value:"ch",label:"汉语"},{value:"en",label:"English"}]),x=f([{value:"1",label:"暂无问题"},{value:"2",label:"音频存在截断"},{value:"3",label:"有多个人说话（音色跳变）"},{value:"4",label:"噪音"},{value:"5",label:"超长空白"},{value:"6",label:"声音太小/声音模糊"},{value:"7",label:"混响很大"},{value:"8",label:"吞字漏字错字"}]),P=f("#ffffff"),te=f(),_=o=>{te.value=o},C=f();le(async()=>{let o=await Is();C.value=o.data});const c=f(""),k=f("1"),S=f(""),G=f(""),ee=f(""),Fe=()=>{c.value="",k.value="1",S.value="",ee.value=""},Ie=f("搜索声音..."),Be=o=>{c.value=o},Ke=o=>{k.value=o},Oe=o=>{G.value=o,console.log(G.value)};function be(o){ee.value=o}const ie=f(!1),D=f(!1),I=f(),re=f(),q=f();function $e(o){if(typeof o!="number"||isNaN(o))return o;const s=1e3;return o>=s*10?(o/s).toFixed(2)+"K":o}const oe=f(!1),ve=f(!1),Qe=()=>{oe.value=!oe.value},We=o=>{o.style.height="auto";const s=getComputedStyle(o).height;o.style.height="0",setTimeout(()=>{o.style.height=s},10)},Xe=o=>{o.style.height="auto"},Ge=o=>{o.style.height=getComputedStyle(o).height},He=o=>{setTimeout(()=>{o.style.height="0"},10)},F=f(1),Je=()=>{F.value=Number((F.value+.1).toFixed(1))},Ye=()=>{F.value=Number((F.value-.1).toFixed(1))},B=f(1),Ze=()=>{B.value=Number((B.value+.1).toFixed(1))},es=()=>{B.value=Number((B.value-.1).toFixed(1))},ae=f(!1),ss=()=>{ae.value=!0;const o={voiceId:I.value.voiceId,audioText:T.value,audioMode:ve.value,audioSpeed:F.value,audioVolume:B.value};setTimeout(async()=>{let s=await so(o);q.value=s.data,ae.value=!1,await to(Ve.token.userId,I.value.voiceId)},2e3)},we=o=>{const b=`${window.location.href}?id=${o}`;navigator.clipboard.writeText(b).then(async()=>{W({message:"已复制到剪贴板",position:"bottom-right"})}).catch(K=>{W({message:`复制失败: ${K.message}`,position:"bottom-right",type:"error"})})},xe=o=>{const s=new XMLHttpRequest;s.open("GET",o,!0),s.responseType="blob",s.onload=()=>{if(s.status===200){const b=new Blob([s.response],{type:"audio/mpeg"}),K=URL.createObjectURL(b),H=document.createElement("a");H.href=K,H.download="audio.mp3",H.click(),URL.revokeObjectURL(K)}},s.send()},Le=async o=>{o.voiceIsLiked===1?(o.voiceIsLiked=0,o.voiceLikeCount--):(o.voiceIsLiked===2&&(o.voiceIsUnliked=!1),o.voiceIsLiked=1,o.voiceLikeCount++);const s={voiceId:o.voiceId,voiceLikeCount:o.voiceLikeCount};await discoverUpdateLikeService(s)},Ue=async o=>{o.voiceIsLiked===2?(o.voiceIsLiked=0,o.voiceIsUnliked=!1):(o.voiceIsLiked===1&&(o.voiceLikeCount--,o.voiceIsLiked=0),o.voiceIsLiked=2,o.voiceIsUnliked=!0);const s={voiceId:o.voiceId,voiceLikeCount:o.voiceLikeCount};await discoverUpdateLikeService(s)},Se=async o=>{o.voiceIsCollected=!o.voiceIsCollected,o.voiceIsCollected?o.voiceCollectCount++:o.voiceCollectCount--;const s={voiceId:o.voiceId,voiceCollectCount:o.voiceCollectCount};await discoverUpdateCollectService(s)},Ve=qe();return le(async()=>{let o=await eo(Ve.token.userId);re.value=o.data}),(o,s)=>{const b=g("el-icon"),K=g("el-image"),H=g("el-col"),ts=g("el-row"),os=g("el-popover"),pe=g("el-tab-pane"),ls=g("el-tabs"),is=g("el-switch"),Te=g("el-slider"),as=g("el-divider"),ns=g("el-empty");return n(),u("div",oo,[e("div",lo,[s[46]||(s[46]=e("h1",null,"文本转语音",-1)),e("div",io,[s[27]||(s[27]=e("div",{class:"text"},"您的文本",-1)),t(me,{message:T.value,placeholder:L.value,type:U.value,maxlength:Z.value,rows:Y.value,color:R.value,"onUpdate:message":z},null,8,["message","placeholder","type","maxlength","rows","color"]),e("div",ao,r(T.value.length)+"/500",1)]),e("div",no,[t(b,{size:"12"},{default:l(()=>[t(m(ps))]),_:1}),s[28]||(s[28]=w(" 语言质量取决于模型，为获得最佳效果，请使用高质量模型，严禁合成政治、色情、赌博、毒品等违法违规内容。 "))]),e("div",co,[s[31]||(s[31]=e("div",{class:"text"},"语音声音",-1)),e("div",null,[s[30]||(s[30]=w("没有模型? ")),t(m(Q),{link:"",onClick:p},{default:l(()=>s[29]||(s[29]=[w("一分钟创建")])),_:1})])]),I.value?(n(),u("div",uo,[t(ts,{class:"select-voice-item"},{default:l(()=>[t(H,{span:4},{default:l(()=>[t(K,{style:{width:"80px",height:"80px","border-radius":"15px"},src:I.value.voiceImage,fit:"cover"},null,8,["src"])]),_:1}),t(H,{span:17},{default:l(()=>[e("div",ro,r(I.value.voiceName),1),e("div",vo,[e("span",po,r(I.value.userName),1),s[33]||(s[33]=e("div",{class:"mydot"},null,-1)),t(b,{size:"20",style:{color:"#6b7280"}},{default:l(()=>[t(m(ke))]),_:1}),e("span",mo,r(m(he)(I.value.voiceCreationTime)),1),s[34]||(s[34]=e("div",{class:"mydot"},null,-1)),e("div",_o,r(I.value.voiceLanguage),1),I.value.voiceTag!==""?(n(),u("div",fo,r(I.value.voiceTag),1)):se("",!0)]),e("div",ko,[e("div",go,[e("div",yo,[I.value.voiceIsLiked===1?(n(),u("div",{key:0,class:"likefill",onClick:s[1]||(s[1]=v=>Le(I.value))})):(n(),u("div",{key:1,class:"like",onClick:s[2]||(s[2]=v=>Le(I.value))})),e("div",ho,r($e(I.value.voiceLikeCount)),1)]),e("div",Co,[I.value.voiceIsLiked===2?(n(),u("div",{key:0,class:"unlikefill",onClick:s[3]||(s[3]=v=>Ue(I.value))})):(n(),u("div",{key:1,class:"unlike",onClick:s[4]||(s[4]=v=>Ue(I.value))}))]),e("div",Io,[I.value.voiceIsCollected?(n(),V(b,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:s[6]||(s[6]=v=>Se(I.value))},{default:l(()=>[t(m(ye))]),_:1})):(n(),V(b,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:s[5]||(s[5]=v=>Se(I.value))},{default:l(()=>[t(m(ge))]),_:1})),e("div",bo,r($e(I.value.voiceCollectCount)),1)])])])]),_:1}),t(H,{span:3},{default:l(()=>[e("div",$o,[t(b,{size:"28",style:{cursor:"pointer"},onClick:s[7]||(s[7]=v=>{d.value=!0})},{default:l(()=>[t(m(ms))]),_:1}),t(b,{size:"28",style:{cursor:"pointer"},onClick:s[8]||(s[8]=v=>I.value="")},{default:l(()=>[t(m(Ne))]),_:1})])]),_:1})]),_:1})])):(n(),u("div",{key:0,class:"output-section",onClick:s[0]||(s[0]=v=>d.value=!0)},s[32]||(s[32]=[e("div",{class:"add"},null,-1),e("div",{style:{"font-weight":"600"}},"选择语音声音",-1)]))),t(m(ne),{modelValue:d.value,"onUpdate:modelValue":s[12]||(s[12]=v=>d.value=v),"show-close":!1},{header:l(({close:v,titleId:O,titleClass:ds})=>[e("div",wo,[e("div",{style:{"font-weight":"600"},id:O,class:ze(ds)},"选择语音",10,xo),t(b,{style:{cursor:"pointer"},onClick:v},{default:l(()=>[t(m(Ne))]),_:2},1032,["onClick"])])]),default:l(()=>[t(ls,{modelValue:i.value,"onUpdate:modelValue":s[11]||(s[11]=v=>i.value=v),class:"demo-tabs",onTabClick:Fe},{default:l(()=>[t(pe,{label:"探索",name:"first"},{default:l(()=>[e("div",Lo,[e("div",Uo,[t(me,{message:ee.value,placeholder:Ie.value,"onUpdate:message":be},null,8,["message","placeholder"])]),e("div",So,[s[38]||(s[38]=e("span",{class:"header-tip"},"排序",-1)),t(de,{options:y.value,"input-width":"155px",color:h.value,"onUpdate:value":Be},null,8,["options","color"]),s[39]||(s[39]=e("span",{class:"header-tip"},"语言",-1)),t(de,{options:$.value,"input-width":"155px",color:h.value,"onUpdate:value":Ke},null,8,["options","color"]),t(os,{placement:"bottom",width:250,visible:ie.value},{reference:l(()=>[t(m(Q),{size:"large",class:"btn",onClick:s[9]||(s[9]=v=>ie.value=!ie.value)},{default:l(()=>[t(b,{size:"20",color:"black"},{default:l(()=>[t(m(_s))]),_:1})]),_:1})]),default:l(()=>[e("div",Vo,[s[36]||(s[36]=e("div",{class:"content-header"},[e("span",{style:{"font-size":"large","font-weight":"600",color:"black"}},"筛选")],-1)),s[37]||(s[37]=e("div",null,"标签",-1)),t(hs,{options:C.value,"input-width":"200px","onUpdate:value":Oe},null,8,["options"]),e("div",To,[t(m(Q),{color:"black",style:{width:"95%"},onClick:s[10]||(s[10]=v=>{ie.value=!1,S.value=G.value})},{default:l(()=>s[35]||(s[35]=[w("应用")])),_:1})])])]),_:1},8,["visible"])])]),e("div",zo,[t(Cs,{nameValue:ee.value,sortValue:c.value,languageValue:k.value,tagValue:S.value},null,8,["nameValue","sortValue","languageValue","tagValue"])])]),_:1}),t(pe,{label:"收藏",name:"second"},{default:l(()=>[e("div",No,[t(vt)])]),_:1}),t(pe,{label:"我的语音",name:"third"},{default:l(()=>[t(me,{message:ee.value,placeholder:Ie.value,class:"action-bar","onUpdate:message":be,style:{width:"20%"}},null,8,["message","placeholder"]),e("div",Po,[t(Zt,{nameValue:ee.value},null,8,["nameValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),e("div",Do,[e("div",{class:ze(["toggle-button",{active:oe.value}]),onClick:Qe},[s[40]||(s[40]=e("span",{style:{"font-size":"large"}},"高级设置",-1)),oe.value?(n(),V(b,{key:1},{default:l(()=>[t(m(ks))]),_:1})):(n(),V(b,{key:0},{default:l(()=>[t(m(fs))]),_:1}))],2),t(vs,{name:"expand",onEnter:We,onAfterEnter:Xe,onBeforeLeave:Ge,onLeave:He},{default:l(()=>[gs(e("div",Eo,[e("div",Mo,[s[41]||(s[41]=e("div",{class:"detail"},[w(" 高品质模式 "),e("span",{style:{"font-size":"small"}},"生成更高品质的音频，但会增加延迟")],-1)),t(is,{modelValue:ve.value,"onUpdate:modelValue":s[13]||(s[13]=v=>ve.value=v),class:"ml-2",style:{"--el-switch-on-color":"black","--el-switch-off-color":"#e4e7ed"}},null,8,["modelValue"])]),e("div",null,[e("div",Ao,[w(" 语速("+r(F.value.toFixed(1))+"x) ",1),s[42]||(s[42]=e("span",{style:{"font-size":"small"}},"基于参考音频的语速进行调整",-1))]),e("div",Ro,[t(b,{size:"20",onClick:Ye},{default:l(()=>[t(m(Pe))]),_:1}),t(Te,{modelValue:F.value,"onUpdate:modelValue":s[14]||(s[14]=v=>F.value=v),min:0,max:3,"show-tooltip":!1,step:.1,style:{"margin-right":"10px"}},null,8,["modelValue"]),t(b,{size:"20",onClick:Je},{default:l(()=>[t(m(De))]),_:1})])]),e("div",null,[e("div",jo,[w(" 音量("+r(B.value.toFixed(1))+") ",1),s[43]||(s[43]=e("span",{style:{"font-size":"small"}},"基于参考音频的音量进行调整",-1))]),e("div",qo,[t(b,{size:"20",onClick:es},{default:l(()=>[t(m(Pe))]),_:1}),t(Te,{modelValue:B.value,"onUpdate:modelValue":s[15]||(s[15]=v=>B.value=v),min:0,max:3,"show-tooltip":!1,step:.1,style:{"margin-right":"10px"}},null,8,["modelValue"]),t(b,{size:"20",onClick:Ze},{default:l(()=>[t(m(De))]),_:1})])])],512),[[ys,oe.value]])]),_:1})]),e("div",Fo,[t(m(Q),{color:"black",onClick:ss},{default:l(()=>s[44]||(s[44]=[w("创建")])),_:1})]),t(m(ne),{modelValue:ae.value,"onUpdate:modelValue":s[16]||(s[16]=v=>ae.value=v),"show-close":!1,width:"25%",title:"正在创建语言","align-center":""},{default:l(()=>s[45]||(s[45]=[e("div",{style:{margin:"20px"}},[e("div",{class:"loading-dots"},[e("span",{class:"dot dot1"}),e("span",{class:"dot dot2"}),e("span",{class:"dot dot3"})]),e("div",{style:{display:"flex","justify-content":"center",margin:"10px"}},"正在分析文本")],-1)])),_:1},8,["modelValue"])]),t(as,{direction:"vertical",style:{height:"auto"}}),e("div",Bo,[q.value?(n(),u("div",Ko,[s[52]||(s[52]=e("h3",null,"生成的音频",-1)),e("div",Oo,[e("div",Qo,[t(K,{src:q.value.voiceImage,style:{width:"60px",height:"60px","border-radius":"15px"},fit:"cover"},null,8,["src"]),e("div",Wo,[e("div",Xo,[e("div",Go,r(q.value.audioText),1),e("div",Ho,[t(b,{size:"20"},{default:l(()=>[t(m(Ee))]),_:1}),w(" "+r(q.value.voiceName),1)])]),e("div",Jo,[e("div",{class:"dontagree",onClick:s[17]||(s[17]=v=>D.value=!0)}),t(m(ne),{modelValue:D.value,"onUpdate:modelValue":s[20]||(s[20]=v=>D.value=v),width:"30%","align-center":"","show-close":!1},{footer:l(()=>[e("span",Zo,[t(m(Q),{color:"black",plain:"",onClick:s[18]||(s[18]=v=>{D.value=!1})},{default:l(()=>s[48]||(s[48]=[w(" 取消 ")])),_:1}),t(m(Q),{color:"black",onClick:s[19]||(s[19]=v=>{D.value=!1})},{default:l(()=>s[49]||(s[49]=[w(" 确认 ")])),_:1})])]),default:l(()=>[s[50]||(s[50]=e("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"20px"}}," 音频质量反馈",-1)),e("div",Yo,[s[47]||(s[47]=w(" 反馈类型 ")),t(de,{options:x.value,"input-width":"432px",color:P.value,"onUpdate:value":_,style:{"margin-bottom":"10px"}},null,8,["options","color"])])]),_:1},8,["modelValue"]),e("div",{class:"share",onClick:s[21]||(s[21]=v=>we(q.value.audioId))}),e("div",{class:"download",onClick:s[22]||(s[22]=v=>xe(q.value.audioURL))})])])]),s[51]||(s[51]=e("div",{class:"divide"},null,-1)),t(Me,{audioUrl:q.value.audioURL,buttonSize:20,sliderLength:300},null,8,["audioUrl"])])])):se("",!0),s[58]||(s[58]=e("h3",null,"最新活动",-1)),re.value?(n(!0),u(A,{key:1},J(re.value,v=>(n(),u("div",{key:v.audioId,class:"audio-item"},[e("div",el,[t(K,{src:v.voiceImage,style:{width:"60px",height:"60px","border-radius":"15px"},fit:"cover"},null,8,["src"]),e("div",sl,[e("div",tl,[e("div",ol,r(v.audioText),1),e("div",ll,[t(b,{size:"20"},{default:l(()=>[t(m(Ee))]),_:1}),w(" "+r(v.voiceName),1)])]),e("div",il,[e("div",{class:"dontagree",onClick:s[23]||(s[23]=O=>D.value=!0)}),t(m(ne),{modelValue:D.value,"onUpdate:modelValue":s[26]||(s[26]=O=>D.value=O),width:"30%","align-center":"","show-close":!1},{footer:l(()=>[e("span",nl,[t(m(Q),{color:"black",plain:"",onClick:s[24]||(s[24]=O=>{D.value=!1})},{default:l(()=>s[54]||(s[54]=[w(" 取消 ")])),_:1}),t(m(Q),{color:"black",onClick:s[25]||(s[25]=O=>{D.value=!1})},{default:l(()=>s[55]||(s[55]=[w(" 确认 ")])),_:1})])]),default:l(()=>[s[56]||(s[56]=e("div",{style:{"font-size":"large",color:"black","font-weight":"600","margin-bottom":"20px"}}," 音频质量反馈",-1)),e("div",al,[s[53]||(s[53]=w(" 反馈类型 ")),t(de,{options:x.value,"input-width":"432px",color:P.value,"onUpdate:value":_,style:{"margin-bottom":"10px"}},null,8,["options","color"])])]),_:1},8,["modelValue"]),e("div",{class:"share",onClick:O=>we(v.audioId)},null,8,dl),e("div",{class:"download",onClick:O=>xe(v.audioURL)},null,8,cl)])])]),s[57]||(s[57]=e("div",{class:"divide"},null,-1)),t(Me,{audioUrl:v.audioURL,buttonSize:20,sliderLength:300},null,8,["audioUrl"])]))),128)):(n(),u("div",ul,[t(ns,{description:"暂无数据"})]))])])}}},bl=_e(rl,[["__scopeId","data-v-80c44ae7"]]);export{bl as default};
