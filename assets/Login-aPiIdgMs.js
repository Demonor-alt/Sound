import{M as p}from"./Input-Cx2C-A12.js";import{r as o,c as T,w as r,a as u,u as B,o as C,b as s,d as t,e as S,E}from"./index-C5prP9CA.js";import{u as L}from"./token-DZq-OVS1.js";import{i as M}from"./request-eS4WN10w.js";const N=i=>M.post("/login",i),P={class:"body"},j={__name:"Login",setup(i){const a=o(""),c=o(""),f=o("邮箱"),v=o("密码"),g=o("password"),d=o("#f5f5f5"),n=o(!1);function _(l){a.value=l}function y(l){c.value=l}const h=B(),w=L(),k=async()=>{n.value=!0;const l={email:a.value,password:c.value};let e=await N(l);e.code==0?(w.setToken(e.data),localStorage.setItem("user",a.value),setTimeout(()=>{h.push("/discover"),n.value=!1},1e3)):setTimeout(()=>{E.error(e.msg?e.msg:"登录失败"),n.value=!1},1e3)};return(l,e)=>{const m=u("el-col"),b=u("el-button"),x=u("el-row");return C(),T(x,{style:{height:"100vh",width:"100%"}},{default:r(()=>[s(m,{span:12,style:{"background-color":"black"}},{default:r(()=>e[0]||(e[0]=[t("div",{class:"logo"},null,-1)])),_:1}),s(m,{span:12},{default:r(()=>[t("div",P,[e[2]||(e[2]=t("div",{style:{display:"flex","flex-direction":"column","align-items":"center",width:"100%","justify-content":"center"}},[t("h2",null,"登录您的帐户"),t("div",{style:{"font-size":"small",color:"#71717a"}},"请使用您的电子邮箱和密码登录")],-1)),s(p,{message:a.value,placeholder:f.value,color:d.value,"onUpdate:message":_},null,8,["message","placeholder","color"]),s(p,{message:c.value,placeholder:v.value,color:d.value,type:g.value,"onUpdate:message":y},null,8,["message","placeholder","color","type"]),s(b,{size:"large",color:"black",style:{width:"100%","margin-top":"20px"},onClick:k,loading:n.value},{default:r(()=>e[1]||(e[1]=[S("登录")])),_:1},8,["loading"])])]),_:1})]),_:1})}}};export{j as default};
