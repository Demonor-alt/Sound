import{_ as R,r as k,N as G,q as H,c as z,w as l,a as r,u as W,o as p,b as t,d as s,f as d,L as f,e as v,O as X,z as h,B as Y,I as N,J as T,A as _,C as Z,P as ee,Q as te}from"./index-oBlTSEMj.js";import{M as se}from"./Input-BKAO9olY.js";import{a as le}from"./sound-BznpVhuQ.js";import{u as oe}from"./token-BcuPBtfw.js";const ae={class:"action-bar"},ne={key:0},ie=["onClick"],re={style:{color:"#6b7280"}},ce={style:{display:"flex","flex-direction":"row",gap:"10px"}},de={style:{"font-weight":"520"}},ue={style:{"padding-top":"3%"}},pe={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},me={style:{color:"#71717a"}},_e={class:"audio-samples"},fe={class:"samples-content"},ve={class:"samples-index"},ge={class:"sample-btn"},ye=["src"],ke=["src"],he=["onClick"],Ce=["onClick"],be={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},Ie={class:"btns"},we={class:"dialog-footer"},xe={__name:"MyBank",setup(ze){const V=k("#f5f5f5"),g=k(!1),C=W(),$=()=>{C.push("/createbank")},B=o=>{C.push({path:"/createbank",query:{id:o}})},S=o=>{C.push({path:"/detail",query:{id:o}})};function U(o){x.value=o}const w=k([{voiceId:70,voiceImage:"https://loremflickr.com/400/400?lock=567532027855895",voiceName:"曲志明",voiceDescription:"例面求上。果圆相称斗织是。开电年。同利算术极七等被来。问广十世。",voiceCreationTime:"2024-04-22 00:28:31",voiceIsCollected:!0,voiceSamples:[{sampleId:83,sampleIsPlaying:!1,sampleTitle:"拨伟大快但是脊梁",sampleText:"consectetur",sampleUrl:le}]}]),x=k(""),D=k("搜索声音..."),M=G(()=>w.value.filter(o=>o.voiceName.includes(x.value))),E=o=>(o=new Date(o),new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(o)),b=H({}),P=(o,e)=>{const u=w.value.find(i=>i.voiceId===o);if(!u)return;const m=u.voiceSamples[e],y=`${o}-${e}`;if(b[y]){const i=b[y];m.sampleIsPlaying?i.pause():(Object.values(b).forEach(c=>c.pause()),i.play())}else{const i=new Audio(m.sampleUrl);b[y]=i,i.addEventListener("ended",()=>{m.sampleIsPlaying=!1}),i.play()}m.sampleIsPlaying=!m.sampleIsPlaying,u.voiceSamples.forEach((i,c)=>{c!==e&&(i.sampleIsPlaying=!1)})},q=o=>{C.push({path:"/explanation",query:{id:o}})};return oe(),(o,e)=>{const u=r("el-icon"),m=r("el-header"),y=r("el-empty"),i=r("el-image"),c=r("el-col"),L=r("el-tag"),A=r("el-card"),F=r("el-popover"),O=r("el-dialog"),j=r("el-row"),J=r("el-main"),K=r("el-container");return p(),z(K,{class:"sound-manager"},{default:l(()=>[t(m,{class:"display"},{default:l(()=>[e[4]||(e[4]=s("h1",{class:"title"},"我的声音",-1)),s("div",ae,[t(se,{message:x.value,placeholder:D.value,color:V.value,class:"search-input","onUpdate:message":U},null,8,["message","placeholder","color"]),t(d(f),{color:"black",onClick:$,class:"create-btn"},{default:l(()=>[t(u,{size:"20",style:{"padding-right":"5px"}},{default:l(()=>[t(d(X))]),_:1}),e[3]||(e[3]=v(" 创建新的声音 "))]),_:1})])]),_:1}),t(J,null,{default:l(()=>[w.value.length===0?(p(),h("div",ne,[t(y,{description:"暂无数据"})])):Y("",!0),(p(!0),h(N,null,T(M.value,n=>(p(),z(j,{key:n.voiceId,class:"voice-item"},{default:l(()=>[t(c,{span:2},{default:l(()=>[t(i,{style:{width:"70px",height:"70px","border-radius":"10px"},src:n.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1024),t(c,{span:7},{default:l(()=>[s("div",{style:{"font-size":"20px","font-weight":"800","padding-bottom":"10px",cursor:"pointer"},onClick:a=>S(n.voiceId)},_(n.voiceName),9,ie),s("div",re,_(n.voiceDescription),1)]),_:2},1024),t(c,{span:4},{default:l(()=>[e[5]||(e[5]=s("div",{class:"item"},"创建时间",-1)),s("div",ce,[t(u,{size:"20",style:{color:"#6b7280"}},{default:l(()=>[t(d(Z))]),_:1}),s("span",de,_(E(n.voiceCreationTime)),1)])]),_:2},1024),t(c,{span:3},{default:l(()=>[e[7]||(e[7]=s("div",{class:"item"},"状态",-1)),s("div",ue,[t(L,{type:"success",round:"",effect:"dark",style:{width:"50px","font-weight":"1000"}},{default:l(()=>e[6]||(e[6]=[v("成功")])),_:1})])]),_:1}),t(c,{span:4},{default:l(()=>[e[11]||(e[11]=s("div",{class:"item"},"音频示例",-1)),s("div",null,[t(F,{placement:"bottom",width:400,trigger:"click"},{reference:l(()=>[s("div",pe,[e[8]||(e[8]=s("div",{class:"logo"},null,-1)),s("span",me,_(n.voiceSamples.length)+" 音频示例",1)])]),default:l(()=>[s("div",_e,[e[10]||(e[10]=s("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(p(!0),h(N,null,T(n.voiceSamples,(a,I)=>(p(),z(A,{key:I,class:"samples-item",shadow:"never"},{default:l(()=>[s("div",fe,[s("div",null,[s("span",ve,_(I+1),1),s("span",null,_(a.sampleTitle),1)]),s("div",ge,[s("audio",null,[s("source",{src:a.sampleUrl,type:"audio/mp4"},null,8,ye),s("source",{src:a.sampleUrl,type:"audio/x-m4a"},null,8,ke),e[9]||(e[9]=v(" 浏览器不支持音频播放 "))]),a.sampleIsPlaying?(p(),h("div",{key:1,class:"on",onClick:Q=>{P(n.voiceId,I),a.sampleIsPlaying=!1}},null,8,Ce)):(p(),h("div",{key:0,class:"close",onClick:Q=>{P(n.voiceId,I),a.sampleIsPlaying=!0}},null,8,he))])]),s("div",be,_(a.sampleText),1)]),_:2},1024))),128))])]),_:2},1024)])]),_:2},1024),t(c,{span:4},{default:l(()=>[s("div",Ie,[t(d(f),{size:"large",color:"black",onClick:a=>q(n.voiceId)},{default:l(()=>e[12]||(e[12]=[v("使用声音")])),_:2},1032,["onClick"]),t(d(f),{size:"large",class:"btn",circle:"",onClick:a=>B(n.voiceId)},{default:l(()=>[t(u,{size:"20",color:"black"},{default:l(()=>[t(d(ee))]),_:1})]),_:2},1032,["onClick"]),t(d(f),{size:"large",class:"btn",circle:"",onClick:e[0]||(e[0]=a=>g.value=!0)},{default:l(()=>[t(u,{size:"20",color:"black"},{default:l(()=>[t(d(te))]),_:1})]),_:1}),t(O,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),"align-center":"","show-close":!1,style:{width:"500px"}},{footer:l(()=>[s("span",we,[t(d(f),{color:"black",plain:"",onClick:e[1]||(e[1]=a=>g.value=!1)},{default:l(()=>e[13]||(e[13]=[v("取消")])),_:1}),t(d(f),{color:"black",onClick:a=>{g.value=!1,o.deleteService(n.voiceId)}},{default:l(()=>e[14]||(e[14]=[v(" 确认 ")])),_:2},1032,["onClick"])])]),default:l(()=>[e[15]||(e[15]=s("div",{style:{"font-size":"large","font-weight":"600"}},"您确定要删除语音吗",-1))]),_:2},1032,["modelValue"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},$e=R(xe,[["__scopeId","data-v-0ddd9866"]]);export{$e as default};
