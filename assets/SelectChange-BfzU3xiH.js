import{N as V,_ as W,r as D,Q as A,u as K,z as Q,B as X,b as C,C as d,o as a,F as E,e as f,L as $,M as T,c as U,a as g,f as e,D as r,h as v,G as J,g as j,H as Y,I as Z,n as B,a8 as ee}from"./index-cpBiw585.js";import{t as se,f as x}from"./Select-bCNWJ9kA.js";import{i as z}from"./request-D1PYwchc.js";import{a as M}from"./sound-BznpVhuQ.js";const te=()=>z.get("/discover"),oe=s=>z.put("/discover/collect",s),Ze=()=>z.get("/discover/tag"),R=s=>{s.voiceIsLiked===1?(s.voiceIsLiked=0,s.voiceLikeCount--):(s.voiceIsLiked===2&&(s.voiceIsUnliked=!1),s.voiceIsLiked=1,s.voiceLikeCount++)},q=s=>{s.voiceIsLiked===2?(s.voiceIsLiked=0,s.voiceIsUnliked=!1):(s.voiceIsLiked===1&&(s.voiceLikeCount--,s.voiceIsLiked=0),s.voiceIsLiked=2,s.voiceIsUnliked=!0)},O=async s=>{s.voiceIsCollected=!s.voiceIsCollected,s.voiceIsCollected?s.voiceCollectCount++:s.voiceCollectCount--;const n={voiceId:s.voiceId,voiceCollectCount:s.voiceCollectCount};await oe(n)},es=s=>{const u=`${window.location.href}?id=${s}`;navigator.clipboard.writeText(u).then(async()=>{V({message:"已复制到剪贴板",position:"bottom-right"})}).catch(m=>{V({message:`复制失败: ${m.message}`,position:"bottom-right",type:"error"})})},ss=s=>{const n=new XMLHttpRequest;n.open("GET",s,!0),n.responseType="blob",n.onload=()=>{if(n.status===200){const u=new Blob([n.response],{type:"audio/mpeg"}),m=URL.createObjectURL(u),_=document.createElement("a");_.href=m,_.download="audio.mp3",_.click(),URL.revokeObjectURL(m)}},n.send()},le={key:0},ae=["onClick"],ne={class:"voice-detail"},ie={class:"display-detail"},ce={class:"display-detail"},de={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},re={class:"display-detail"},ue={class:"audio-samples"},pe={class:"samples-content"},ve={class:"samples-index"},me={class:"sample-btn"},_e=["src"],fe=["src"],ge=["onClick"],ke=["onClick"],he={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},ye={class:"tag1"},Ce={key:0,class:"tag2",style:{"margin-left":"5px"}},Ie={class:"voice-sample"},be={class:"sample-btn"},we=["onClick"],Se=["onClick"],$e={style:{width:"50%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","font-size":"small"}},Le={class:"btns"},Ue={class:"btns-plus"},xe={class:"button"},Te={class:"number"},Ve={class:"button"},Pe=["onClick"],Ne={class:"number"},De={class:"button"},ze=["onClick"],Ee=["onClick"],je={class:"number"},Be={class:"button"},Me=["onClick"],Re=["onClick"],qe={class:"button"},Oe={class:"number"},We={__name:"SoundItem",props:{nameValue:{type:String,default:""},sortValue:{type:String},languageValue:{type:String},tagValue:{type:String},col1:{type:String,default:"4"},col2:{type:String,default:"20"},path:{type:String,default:"explanation"}},setup(s){const n=s,u=D([{voiceId:1,userName:"fc",voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"55",voiceDescription:"1212",voiceCreationTime:new Date(2025,1,9,19,11),voiceUseCount:11e4,voiceShareCount:11,voiceLikeCount:20,voiceCollectCount:10,voiceLanguage:"ch",voiceTag:"aaaaaaaaa",voiceIsUsed:!1,voiceIsShared:!1,voiceIsLiked:!1,voiceIsUnliked:!1,voiceIsCollected:!1,voiceSamples:[{sampleId:1,sampleIsPlaying:!1,sampleTitle:"Default Sample",sampleText:"哈哈哈笑死我了，这也太搞笑了吧！我靠我靠，这是什么神仙操作啊，太离谱了哩咯。笑得我肚子疼，这也太逗了吧，绝了绝了！",sampleUrl:M},{sampleId:2,sampleIsPlaying:!1,sampleTitle:"可以让父母",sampleText:"对侧人防热非人发热功耗一节课iklo",sampleUrl:M}]}]),m=A(()=>{let l=u.value.filter(t=>t.voiceName.includes(n.nameValue));return n.tagValue!==""&&(l=l.filter(t=>t.voiceTag===n.tagValue)),n.languageValue!=="1"&&(l=l.filter(t=>t.voiceLanguage===n.languageValue)),n.sortValue==="2"?l.sort((t,i)=>new Date(i.voiceCreationTime)-new Date(t.voiceCreationTime)):n.sortValue==="1"&&l.sort((t,i)=>i.voiceUseCount-t.voiceUseCount),l}),_=K(),L=l=>{_.push({path:"/detail",query:{id:l}})},P=l=>{_.push({path:`/${n.path}`,query:{id:l}})},w=Q({}),k=(l,t)=>{const i=u.value.find(p=>p.voiceId===l);if(!i)return;const h=i.voiceSamples[t],y=`${l}-${t}`;if(w[y]){const p=w[y];h.sampleIsPlaying?p.pause():(Object.values(w).forEach(S=>S.pause()),p.play())}else{const p=new Audio(h.sampleUrl);w[y]=p,p.addEventListener("ended",()=>{h.sampleIsPlaying=!1}),p.play()}h.sampleIsPlaying=!h.sampleIsPlaying,i.voiceSamples.forEach((p,S)=>{S!==t&&(p.sampleIsPlaying=!1)})};X(async()=>{let l=await te();u.value=l.data,u.value.forEach(t=>{t.voiceIsShared=!1})});const I=l=>{const t=u.value.findIndex(y=>y.voiceId===l);u.value[t].voiceIsShared===!1&&(u.value[t].voiceIsShared=!0,u.value[t].voiceShareCount++);const h=`${window.location.href}?id=${l}`;navigator.clipboard.writeText(h).then(async()=>{V({message:"已复制到剪贴板",position:"bottom-right"})}).catch(y=>{V({message:`复制失败: ${y.message}`,position:"bottom-right",type:"error"})})};return(l,t)=>{const i=C("el-empty"),h=C("el-image"),y=C("el-col"),p=C("el-icon"),S=C("el-card"),F=C("el-popover"),G=C("el-button"),H=C("el-row");return a(),d($,null,[m.value.length===0?(a(),d("div",le,[f(i,{description:"暂无数据"})])):E("",!0),(a(!0),d($,null,T(m.value,o=>(a(),U(H,{key:o.voiceId,class:"voice-item"},{default:g(()=>[f(y,{span:s.col1==="4"?4:3},{default:g(()=>[f(h,{style:{width:"100px",height:"100px","border-radius":"15px"},src:o.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1032,["span"]),f(y,{span:s.col2==="20"?20:21},{default:g(()=>[e("div",{class:"voice-name",onClick:c=>L(o.voiceId)},r(o.voiceName),9,ae),e("div",ne,[e("span",ie,r(o.userName),1),t[3]||(t[3]=e("div",{class:"dot"},null,-1)),f(p,{size:"20",style:{color:"#6b7280"}},{default:g(()=>[f(v(J))]),_:1}),e("span",ce,r(v(se)(o.voiceCreationTime)),1),t[4]||(t[4]=e("div",{class:"dot"},null,-1)),f(F,{placement:"bottom",width:400,trigger:"click"},{reference:g(()=>[e("div",de,[t[0]||(t[0]=e("div",{class:"logo"},null,-1)),e("span",re,r(o.voiceSamples.length)+" 音频示例",1)])]),default:g(()=>[e("div",ue,[t[2]||(t[2]=e("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(a(!0),d($,null,T(o.voiceSamples,(c,b)=>(a(),U(S,{key:b,class:"samples-item",shadow:"never"},{default:g(()=>[e("div",pe,[e("div",null,[e("span",ve,r(b+1),1),e("span",null,r(c.sampleTitle),1)]),e("div",me,[e("audio",null,[e("source",{src:c.sampleUrl,type:"audio/mp4"},null,8,_e),e("source",{src:c.sampleUrl,type:"audio/x-m4a"},null,8,fe),t[1]||(t[1]=j(" 浏览器不支持音频播放 "))]),c.sampleIsPlaying?(a(),d("div",{key:1,class:"on",onClick:N=>{k(o.voiceId,b),c.sampleIsPlaying=!1}},null,8,ke)):(a(),d("div",{key:0,class:"close",onClick:N=>{k(o.voiceId,b),c.sampleIsPlaying=!0}},null,8,ge))])]),e("div",he,r(c.sampleText),1)]),_:2},1024))),128))])]),_:2},1024),t[5]||(t[5]=e("div",{class:"dot"},null,-1)),e("div",ye,r(o.voiceLanguage),1),o.voiceTag!==""?(a(),d("div",Ce,r(o.voiceTag),1)):E("",!0)]),e("div",Ie,[(a(!0),d($,null,T(o.voiceSamples,(c,b)=>(a(),d("div",{key:b,class:"voice-sample-item"},[e("div",be,[c.sampleIsPlaying?(a(),d("div",{key:1,class:"on-plus",onClick:N=>k(o.voiceId,b)},null,8,Se)):(a(),d("div",{key:0,class:"close-plus",onClick:N=>k(o.voiceId,b)},null,8,we))]),e("div",$e,r(c.sampleText),1)]))),128))]),e("div",Le,[f(G,{size:"large",color:"black",onClick:c=>P(o.voiceId)},{default:g(()=>t[6]||(t[6]=[j("使用声音")])),_:2},1032,["onClick"]),e("div",Ue,[e("div",xe,[t[7]||(t[7]=e("div",{class:"used"},null,-1)),e("div",Te,r(v(x)(o.voiceUseCount))+" Used ",1)]),e("div",Ve,[e("div",{class:"shared",onClick:c=>I(o.voiceId)},null,8,Pe),e("div",Ne,r(v(x)(o.voiceShareCount))+" Shares ",1)]),e("div",De,[o.voiceIsLiked===1?(a(),d("div",{key:0,class:"likefill",onClick:c=>v(R)(o)},null,8,ze)):(a(),d("div",{key:1,class:"like",onClick:c=>v(R)(o)},null,8,Ee)),e("div",je,r(v(x)(o.voiceLikeCount)),1)]),e("div",Be,[o.voiceIsLiked===2?(a(),d("div",{key:0,class:"unlikefill",onClick:c=>v(q)(o)},null,8,Me)):(a(),d("div",{key:1,class:"unlike",onClick:c=>v(q)(o)},null,8,Re))]),e("div",qe,[o.voiceIsCollected?(a(),U(p,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:c=>v(O)(o)},{default:g(()=>[f(v(Z))]),_:2},1032,["onClick"])):(a(),U(p,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:c=>v(O)(o)},{default:g(()=>[f(v(Y))]),_:2},1032,["onClick"])),e("div",Oe,r(v(x)(o.voiceCollectCount)),1)])])])]),_:2},1032,["span"])]),_:2},1024))),128))],64)}}},ts=W(We,[["__scopeId","data-v-b32cd01b"]]),Ae={class:"custom-select"},Fe={class:"options-wrapper"},Ge=["onClick"],He={style:{"margin-left":"20px"}},Ke={__name:"SelectChange",props:{options:{type:Array,default:()=>[{value:"1",label:"选项1"},{value:"2",label:"选项2"},{value:"3",label:"选项3"}]},inputWidth:{type:String,default:"240px"}},emits:["update:value"],setup(s,{emit:n}){const u=s,m=D(""),_=D(!1),L=n,P=A(()=>u.options.filter(k=>k.label.includes(m.value))),w=k=>{m.value=k.label,_.value=!1,L("update:value",k.value)};return(k,I)=>{const l=C("el-input"),t=C("el-popover");return a(),d("div",Ae,[f(t,{visible:_.value,placement:"bottom",width:s.inputWidth},{reference:g(()=>[f(l,{modelValue:m.value,"onUpdate:modelValue":I[0]||(I[0]=i=>m.value=i),clearable:"",placeholder:"请选择",style:ee({width:s.inputWidth}),onClick:I[1]||(I[1]=i=>_.value=!_.value),onClear:I[2]||(I[2]=i=>L("update:value","")),class:B({focused:_.value})},null,8,["modelValue","style","class"])]),default:g(()=>[e("div",Fe,[(a(!0),d($,null,T(P.value,i=>(a(),d("div",{key:i.value,class:B(["option-item",{selected:m.value===i.value}]),onClick:h=>w(i)},[e("div",He,r(i.label),1)],10,Ge))),128))])]),_:1},8,["visible","width"])])}}},os=W(Ke,[["__scopeId","data-v-382ee882"]]);export{os as M,ts as S,ss as a,q as b,O as c,Ze as d,es as o,R as t};
