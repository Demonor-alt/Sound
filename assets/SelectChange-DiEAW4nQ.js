import{_ as A,r as E,N as F,u as R,q as G,y as H,a as f,z as i,o,B as j,b as r,I as L,J as T,c as U,w as u,d as t,A as n,f as V,C as X,e as q,D as Y,F as Z,K as B,n as K,a5 as ee}from"./index-BeHrCFXr.js";import{t as se}from"./time-tY07ncrd.js";import{a as M}from"./sound-BznpVhuQ.js";import{e as te,d as le,a as W,b as oe}from"./discover-BP3hhQXz.js";const ae={key:0},ie=["onClick"],ne={class:"voice-detail"},ce={class:"display-detail"},de={class:"display-detail"},re={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},ue={class:"display-detail"},pe={class:"audio-samples"},ve={class:"samples-content"},_e={class:"samples-index"},me={class:"sample-btn"},fe=["src"],ke=["src"],ye=["onClick"],ge=["onClick"],Ce={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},he={class:"tag1"},Ie={key:0,class:"tag2",style:{"margin-left":"5px"}},be={class:"voice-sample"},Se={class:"sample-btn"},we=["onClick"],Le=["onClick"],$e={style:{width:"50%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","font-size":"small"}},xe={class:"btns"},Ue={class:"btns-plus"},Ve={class:"button"},Te={class:"number"},Ne={class:"button"},Pe=["onClick"],De={class:"number"},ze={class:"button"},Be=["onClick"],Ee=["onClick"],je={class:"number"},qe={class:"button"},Ke=["onClick"],Me=["onClick"],We={class:"button"},Ae={class:"number"},Fe={__name:"SoundItem",props:{nameValue:{type:String,default:""},sortValue:{type:String},languageValue:{type:String},tagValue:{type:String},col1:{type:String,default:"4"},col2:{type:String,default:"20"}},setup(b){const k=b,y=E([{voiceId:1,userName:"fc",voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"55",voiceDescription:"1212",voiceCreationTime:new Date(2025,1,9,19,11),voiceUseCount:11e4,voiceShareCount:11,voiceLikeCount:20,voiceCollectCount:10,voiceLanguage:"ch",voiceTag:"aaaaaaaaa",voiceIsUsed:!1,voiceIsShared:!1,voiceIsLiked:!1,voiceIsUnliked:!1,voiceIsCollected:!1,voiceSamples:[{sampleId:1,sampleIsPlaying:!1,sampleTitle:"Default Sample",sampleText:"哈哈哈笑死我了，这也太搞笑了吧！我靠我靠，这是什么神仙操作啊，太离谱了哩咯。笑得我肚子疼，这也太逗了吧，绝了绝了！",sampleUrl:M},{sampleId:2,sampleIsPlaying:!1,sampleTitle:"可以让父母",sampleText:"对侧人防热非人发热功耗一节课iklo",sampleUrl:M}]}]),C=F(()=>{let e=y.value.filter(s=>s.voiceName.includes(k.nameValue));return k.tagValue!==""&&(e=e.filter(s=>s.voiceTag===k.tagValue)),k.languageValue!=="1"&&(e=e.filter(s=>s.voiceLanguage===k.languageValue)),k.sortValue==="2"?e.sort((s,m)=>new Date(m.voiceCreationTime)-new Date(s.voiceCreationTime)):k.sortValue==="1"&&e.sort((s,m)=>m.voiceUseCount-s.voiceUseCount),e}),h=R(),$=e=>{h.push({path:"/detail",query:{id:e}})},N=e=>{h.push({path:"/explanation",query:{id:e}})};function S(e){if(typeof e!="number"||isNaN(e))return e;const s=1e3;return e>=s*10?(e/s).toFixed(2)+"K":e}const _=G({}),p=(e,s)=>{const m=y.value.find(d=>d.voiceId===e);if(!m)return;const g=m.voiceSamples[s],c=`${e}-${s}`;if(_[c]){const d=_[c];g.sampleIsPlaying?d.pause():(Object.values(_).forEach(w=>w.pause()),d.play())}else{const d=new Audio(g.sampleUrl);_[c]=d,d.addEventListener("ended",()=>{g.sampleIsPlaying=!1}),d.play()}g.sampleIsPlaying=!g.sampleIsPlaying,m.voiceSamples.forEach((d,w)=>{w!==s&&(d.sampleIsPlaying=!1)})};H(async()=>{let e=await te();y.value=e.data});const P=e=>{const s=y.value.findIndex(c=>c.voiceId===e);y.value[s].voiceIsShared===!1&&(y.value[s].voiceIsShared=!0,y.value[s].voiceShareCount++);const g=`${window.location.href}?id=${e}`;navigator.clipboard.writeText(g).then(async()=>{B({message:"已复制到剪贴板",position:"bottom-right"});try{let c=await le(e)}catch(c){console.error("分享服务调用失败:",c),B({message:`分享服务调用失败: ${c.message}`,position:"bottom-right",type:"error"})}}).catch(c=>{B({message:`复制失败: ${c.message}`,position:"bottom-right",type:"error"})})},x=async e=>{e.voiceIsLiked===1?(e.voiceIsLiked=0,e.voiceLikeCount--):(e.voiceIsLiked===2&&(e.voiceIsUnliked=!1),e.voiceIsLiked=1,e.voiceLikeCount++);const s={voiceId:e.voiceId,voiceLikeCount:e.voiceLikeCount};await W(s)},v=async e=>{e.voiceIsLiked===2?(e.voiceIsLiked=0,e.voiceIsUnliked=!1):(e.voiceIsLiked===1&&(e.voiceLikeCount--,e.voiceIsLiked=0),e.voiceIsLiked=2,e.voiceIsUnliked=!0);const s={voiceId:e.voiceId,voiceLikeCount:e.voiceLikeCount};await W(s)},D=async e=>{e.voiceIsCollected=!e.voiceIsCollected,e.voiceIsCollected?e.voiceCollectCount++:e.voiceCollectCount--;const s={voiceId:e.voiceId,voiceCollectCount:e.voiceCollectCount};await oe(s)};return(e,s)=>{const m=f("el-empty"),g=f("el-image"),c=f("el-col"),d=f("el-icon"),w=f("el-card"),O=f("el-popover"),J=f("el-button"),Q=f("el-row");return o(),i(L,null,[C.value.length===0?(o(),i("div",ae,[r(m,{description:"暂无数据"})])):j("",!0),(o(!0),i(L,null,T(C.value,l=>(o(),U(Q,{key:l.voiceId,class:"voice-item"},{default:u(()=>[r(c,{span:b.col1==="4"?4:3},{default:u(()=>[r(g,{style:{width:"100px",height:"100px","border-radius":"15px"},src:l.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1032,["span"]),r(c,{span:b.col2==="20"?20:21},{default:u(()=>[t("div",{class:"voice-name",onClick:a=>$(l.voiceId)},n(l.voiceName),9,ie),t("div",ne,[t("span",ce,n(l.userName),1),s[3]||(s[3]=t("div",{class:"dot"},null,-1)),r(d,{size:"20",style:{color:"#6b7280"}},{default:u(()=>[r(V(X))]),_:1}),t("span",de,n(V(se)(l.voiceCreationTime)),1),s[4]||(s[4]=t("div",{class:"dot"},null,-1)),r(O,{placement:"bottom",width:400,trigger:"click"},{reference:u(()=>[t("div",re,[s[0]||(s[0]=t("div",{class:"logo"},null,-1)),t("span",ue,n(l.voiceSamples.length)+" 音频示例",1)])]),default:u(()=>[t("div",pe,[s[2]||(s[2]=t("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(o(!0),i(L,null,T(l.voiceSamples,(a,I)=>(o(),U(w,{key:I,class:"samples-item",shadow:"never"},{default:u(()=>[t("div",ve,[t("div",null,[t("span",_e,n(I+1),1),t("span",null,n(a.sampleTitle),1)]),t("div",me,[t("audio",null,[t("source",{src:a.sampleUrl,type:"audio/mp4"},null,8,fe),t("source",{src:a.sampleUrl,type:"audio/x-m4a"},null,8,ke),s[1]||(s[1]=q(" 浏览器不支持音频播放 "))]),a.sampleIsPlaying?(o(),i("div",{key:1,class:"on",onClick:z=>{p(l.voiceId,I),a.sampleIsPlaying=!1}},null,8,ge)):(o(),i("div",{key:0,class:"close",onClick:z=>{p(l.voiceId,I),a.sampleIsPlaying=!0}},null,8,ye))])]),t("div",Ce,n(a.sampleText),1)]),_:2},1024))),128))])]),_:2},1024),s[5]||(s[5]=t("div",{class:"dot"},null,-1)),t("div",he,n(l.voiceLanguage),1),l.voiceTag!==""?(o(),i("div",Ie,n(l.voiceTag),1)):j("",!0)]),t("div",be,[(o(!0),i(L,null,T(l.voiceSamples,(a,I)=>(o(),i("div",{key:I,class:"voice-sample-item"},[t("div",Se,[a.sampleIsPlaying?(o(),i("div",{key:1,class:"on-plus",onClick:z=>p(l.voiceId,I)},null,8,Le)):(o(),i("div",{key:0,class:"close-plus",onClick:z=>p(l.voiceId,I)},null,8,we))]),t("div",$e,n(a.sampleText),1)]))),128))]),t("div",xe,[r(J,{size:"large",color:"black",onClick:a=>N(l.voiceId)},{default:u(()=>s[6]||(s[6]=[q("使用声音")])),_:2},1032,["onClick"]),t("div",Ue,[t("div",Ve,[s[7]||(s[7]=t("div",{class:"used"},null,-1)),t("div",Te,n(S(l.voiceUseCount))+" Used ",1)]),t("div",Ne,[t("div",{class:"shared",onClick:a=>P(l.voiceId)},null,8,Pe),t("div",De,n(S(l.voiceShareCount))+" Shares ",1)]),t("div",ze,[l.voiceIsLiked===1?(o(),i("div",{key:0,class:"likefill",onClick:a=>x(l)},null,8,Be)):(o(),i("div",{key:1,class:"like",onClick:a=>x(l)},null,8,Ee)),t("div",je,n(S(l.voiceLikeCount)),1)]),t("div",qe,[l.voiceIsLiked===2?(o(),i("div",{key:0,class:"unlikefill",onClick:a=>v(l)},null,8,Ke)):(o(),i("div",{key:1,class:"unlike",onClick:a=>v(l)},null,8,Me))]),t("div",We,[l.voiceIsCollected?(o(),U(d,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:a=>D(l)},{default:u(()=>[r(V(Z))]),_:2},1032,["onClick"])):(o(),U(d,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:a=>D(l)},{default:u(()=>[r(V(Y))]),_:2},1032,["onClick"])),t("div",Ae,n(S(l.voiceCollectCount)),1)])])])]),_:2},1032,["span"])]),_:2},1024))),128))],64)}}},es=A(Fe,[["__scopeId","data-v-1c868aaf"]]),Oe={class:"custom-select"},Je={class:"options-wrapper"},Qe=["onClick"],Re={style:{"margin-left":"20px"}},Ge={__name:"SelectChange",props:{options:{type:Array,default:()=>[{value:"1",label:"选项1"},{value:"2",label:"选项2"},{value:"3",label:"选项3"}]},inputWidth:{type:String,default:"240px"}},emits:["update:value"],setup(b,{emit:k}){const y=b,C=E(""),h=E(!1),$=k,N=F(()=>y.options.filter(_=>_.label.includes(C.value))),S=_=>{C.value=_.label,h.value=!1,$("update:value",_.value)};return(_,p)=>{const P=f("el-input"),x=f("el-popover");return o(),i("div",Oe,[r(x,{visible:h.value,placement:"bottom",width:b.inputWidth},{reference:u(()=>[r(P,{modelValue:C.value,"onUpdate:modelValue":p[0]||(p[0]=v=>C.value=v),clearable:"",placeholder:"请选择",style:ee({width:b.inputWidth}),onClick:p[1]||(p[1]=v=>h.value=!h.value),onClear:p[2]||(p[2]=v=>$("update:value","")),class:K({focused:h.value})},null,8,["modelValue","style","class"])]),default:u(()=>[t("div",Je,[(o(!0),i(L,null,T(N.value,v=>(o(),i("div",{key:v.value,class:K(["option-item",{selected:C.value===v.value}]),onClick:D=>S(v)},[t("div",Re,n(v.label),1)],10,Qe))),128))])]),_:1},8,["visible","width"])])}}},ss=A(Ge,[["__scopeId","data-v-e0dd4646"]]);export{ss as M,es as S};
