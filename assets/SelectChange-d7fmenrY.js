import{L as V,_ as A,r as N,O as W,u as H,x as J,z as Q,a as C,A as d,o as a,C as E,b as f,J as $,K as T,c as x,w as g,d as e,B as r,f as p,D as X,e as j,F as Y,G as Z,n as B,a6 as ee}from"./index-DEQTe5qc.js";import{t as te,f as U}from"./display-CBjJZ8vl.js";import{i as z}from"./request-DIp7hUCV.js";import{a as R}from"./sound-BznpVhuQ.js";const se=()=>z.get("/discover"),oe=t=>z.put("/discover/collect",t),Ze=()=>z.get("/discover/tag"),M=t=>{t.voiceIsLiked===1?(t.voiceIsLiked=0,t.voiceLikeCount--):(t.voiceIsLiked===2&&(t.voiceIsUnliked=!1),t.voiceIsLiked=1,t.voiceLikeCount++)},O=t=>{t.voiceIsLiked===2?(t.voiceIsLiked=0,t.voiceIsUnliked=!1):(t.voiceIsLiked===1&&(t.voiceLikeCount--,t.voiceIsLiked=0),t.voiceIsLiked=2,t.voiceIsUnliked=!0)},q=async t=>{t.voiceIsCollected=!t.voiceIsCollected,t.voiceIsCollected?t.voiceCollectCount++:t.voiceCollectCount--;const n={voiceId:t.voiceId,voiceCollectCount:t.voiceCollectCount};await oe(n)},et=t=>{const v=`${window.location.href}?id=${t}`;navigator.clipboard.writeText(v).then(async()=>{V({message:"已复制到剪贴板",position:"bottom-right"})}).catch(m=>{V({message:`复制失败: ${m.message}`,position:"bottom-right",type:"error"})})},tt=t=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=()=>{if(n.status===200){const v=new Blob([n.response],{type:"audio/mpeg"}),m=URL.createObjectURL(v),_=document.createElement("a");_.href=m,_.download="audio.mp3",_.click(),URL.revokeObjectURL(m)}},n.send()},le={key:0},ae=["onClick"],ne={class:"voice-detail"},ie={class:"display-detail"},ce={class:"display-detail"},de={style:{display:"flex","flex-direction":"row",gap:"10px",cursor:"pointer"}},re={class:"display-detail"},ue={class:"audio-samples"},pe={class:"samples-content"},ve={class:"samples-index"},me={class:"sample-btn"},_e=["src"],fe=["src"],ge=["onClick"],ke=["onClick"],ye={style:{"font-size":"small",color:"#71717a","padding-top":"10px"}},he={class:"tag1"},Ce={key:0,class:"tag2",style:{"margin-left":"5px"}},be={class:"voice-sample"},Ie={class:"sample-btn"},we=["onClick"],Se=["onClick"],$e={style:{width:"50%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","font-size":"small"}},Le={class:"btns"},xe={class:"btns-plus"},Ue={class:"button"},Te={class:"number"},Ve={class:"button"},Pe=["onClick"],De={class:"number"},Ne={class:"button"},ze=["onClick"],Ee=["onClick"],je={class:"number"},Be={class:"button"},Re=["onClick"],Me=["onClick"],Oe={class:"button"},qe={class:"number"},Ae={__name:"SoundItem",props:{nameValue:{type:String,default:""},sortValue:{type:String},languageValue:{type:String},tagValue:{type:String},col1:{type:String,default:"4"},col2:{type:String,default:"20"},path:{type:String,default:"explanation"}},setup(t){const n=t,v=N([{voiceId:1,userName:"fc",voiceImage:"http://yiyangqianxihsdkhejknfnbhuyjwes.online/975adcd7-15bf-44d4-a440-be2fbc972af1.jpg",voiceName:"55",voiceDescription:"1212",voiceCreationTime:new Date(2025,1,9,19,11),voiceUseCount:11e4,voiceShareCount:11,voiceLikeCount:20,voiceCollectCount:10,voiceLanguage:"ch",voiceTag:"aaaaaaaaa",voiceIsUsed:!1,voiceIsShared:!1,voiceIsLiked:!1,voiceIsUnliked:!1,voiceIsCollected:!1,voiceSamples:[{sampleId:1,sampleIsPlaying:!1,sampleTitle:"Default Sample",sampleText:"哈哈哈笑死我了，这也太搞笑了吧！我靠我靠，这是什么神仙操作啊，太离谱了哩咯。笑得我肚子疼，这也太逗了吧，绝了绝了！",sampleUrl:R},{sampleId:2,sampleIsPlaying:!1,sampleTitle:"可以让父母",sampleText:"对侧人防热非人发热功耗一节课iklo",sampleUrl:R}]}]),m=W(()=>{let l=v.value.filter(s=>s.voiceName.includes(n.nameValue));return n.tagValue!==""&&(l=l.filter(s=>s.voiceTag===n.tagValue)),n.languageValue!=="1"&&(l=l.filter(s=>s.voiceLanguage===n.languageValue)),n.sortValue==="2"?l.sort((s,i)=>new Date(i.voiceCreationTime)-new Date(s.voiceCreationTime)):n.sortValue==="1"&&l.sort((s,i)=>i.voiceUseCount-s.voiceUseCount),l}),_=H(),L=l=>{_.push({path:"/detail",query:{id:l}})},P=l=>{_.push({path:`/${n.path}`,query:{id:l}})},w=J({}),k=(l,s)=>{const i=v.value.find(u=>u.voiceId===l);if(!i)return;const y=i.voiceSamples[s],h=`${l}-${s}`;if(w[h]){const u=w[h];y.sampleIsPlaying?u.pause():(Object.values(w).forEach(S=>S.pause()),u.play())}else{const u=new Audio(y.sampleUrl);w[h]=u,u.addEventListener("ended",()=>{y.sampleIsPlaying=!1}),u.play()}y.sampleIsPlaying=!y.sampleIsPlaying,i.voiceSamples.forEach((u,S)=>{S!==s&&(u.sampleIsPlaying=!1)})};Q(async()=>{let l=await se();v.value=l.data});const b=l=>{const s=v.value.findIndex(h=>h.voiceId===l);v.value[s].voiceIsShared===!1&&(v.value[s].voiceIsShared=!0,v.value[s].voiceShareCount++);const y=`${window.location.href}?id=${l}`;navigator.clipboard.writeText(y).then(async()=>{V({message:"已复制到剪贴板",position:"bottom-right"})}).catch(h=>{V({message:`复制失败: ${h.message}`,position:"bottom-right",type:"error"})})};return(l,s)=>{const i=C("el-empty"),y=C("el-image"),h=C("el-col"),u=C("el-icon"),S=C("el-card"),K=C("el-popover"),F=C("el-button"),G=C("el-row");return a(),d($,null,[m.value.length===0?(a(),d("div",le,[f(i,{description:"暂无数据"})])):E("",!0),(a(!0),d($,null,T(m.value,o=>(a(),x(G,{key:o.voiceId,class:"voice-item"},{default:g(()=>[f(h,{span:t.col1==="4"?4:3},{default:g(()=>[f(y,{style:{width:"100px",height:"100px","border-radius":"15px"},src:o.voiceImage,fit:"cover"},null,8,["src"])]),_:2},1032,["span"]),f(h,{span:t.col2==="20"?20:21},{default:g(()=>[e("div",{class:"voice-name",onClick:c=>L(o.voiceId)},r(o.voiceName),9,ae),e("div",ne,[e("span",ie,r(o.userName),1),s[3]||(s[3]=e("div",{class:"dot"},null,-1)),f(u,{size:"20",style:{color:"#6b7280"}},{default:g(()=>[f(p(X))]),_:1}),e("span",ce,r(p(te)(o.voiceCreationTime)),1),s[4]||(s[4]=e("div",{class:"dot"},null,-1)),f(K,{placement:"bottom",width:400,trigger:"click"},{reference:g(()=>[e("div",de,[s[0]||(s[0]=e("div",{class:"logo"},null,-1)),e("span",re,r(o.voiceSamples.length)+" 音频示例",1)])]),default:g(()=>[e("div",ue,[s[2]||(s[2]=e("span",{style:{"font-size":"large","font-weight":"800",color:"black"}},"示例",-1)),(a(!0),d($,null,T(o.voiceSamples,(c,I)=>(a(),x(S,{key:I,class:"samples-item",shadow:"never"},{default:g(()=>[e("div",pe,[e("div",null,[e("span",ve,r(I+1),1),e("span",null,r(c.sampleTitle),1)]),e("div",me,[e("audio",null,[e("source",{src:c.sampleUrl,type:"audio/mp4"},null,8,_e),e("source",{src:c.sampleUrl,type:"audio/x-m4a"},null,8,fe),s[1]||(s[1]=j(" 浏览器不支持音频播放 "))]),c.sampleIsPlaying?(a(),d("div",{key:1,class:"on",onClick:D=>{k(o.voiceId,I),c.sampleIsPlaying=!1}},null,8,ke)):(a(),d("div",{key:0,class:"close",onClick:D=>{k(o.voiceId,I),c.sampleIsPlaying=!0}},null,8,ge))])]),e("div",ye,r(c.sampleText),1)]),_:2},1024))),128))])]),_:2},1024),s[5]||(s[5]=e("div",{class:"dot"},null,-1)),e("div",he,r(o.voiceLanguage),1),o.voiceTag!==""?(a(),d("div",Ce,r(o.voiceTag),1)):E("",!0)]),e("div",be,[(a(!0),d($,null,T(o.voiceSamples,(c,I)=>(a(),d("div",{key:I,class:"voice-sample-item"},[e("div",Ie,[c.sampleIsPlaying?(a(),d("div",{key:1,class:"on-plus",onClick:D=>k(o.voiceId,I)},null,8,Se)):(a(),d("div",{key:0,class:"close-plus",onClick:D=>k(o.voiceId,I)},null,8,we))]),e("div",$e,r(c.sampleText),1)]))),128))]),e("div",Le,[f(F,{size:"large",color:"black",onClick:c=>P(o.voiceId)},{default:g(()=>s[6]||(s[6]=[j("使用声音")])),_:2},1032,["onClick"]),e("div",xe,[e("div",Ue,[s[7]||(s[7]=e("div",{class:"used"},null,-1)),e("div",Te,r(p(U)(o.voiceUseCount))+" Used ",1)]),e("div",Ve,[e("div",{class:"shared",onClick:c=>b(o.voiceId)},null,8,Pe),e("div",De,r(p(U)(o.voiceShareCount))+" Shares ",1)]),e("div",Ne,[o.voiceIsLiked===1?(a(),d("div",{key:0,class:"likefill",onClick:c=>p(M)(o)},null,8,ze)):(a(),d("div",{key:1,class:"like",onClick:c=>p(M)(o)},null,8,Ee)),e("div",je,r(p(U)(o.voiceLikeCount)),1)]),e("div",Be,[o.voiceIsLiked===2?(a(),d("div",{key:0,class:"unlikefill",onClick:c=>p(O)(o)},null,8,Re)):(a(),d("div",{key:1,class:"unlike",onClick:c=>p(O)(o)},null,8,Me))]),e("div",Oe,[o.voiceIsCollected?(a(),x(u,{key:1,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:c=>p(q)(o)},{default:g(()=>[f(p(Z))]),_:2},1032,["onClick"])):(a(),x(u,{key:0,size:"20",color:"#6b7280",style:{cursor:"pointer"},onClick:c=>p(q)(o)},{default:g(()=>[f(p(Y))]),_:2},1032,["onClick"])),e("div",qe,r(p(U)(o.voiceCollectCount)),1)])])])]),_:2},1032,["span"])]),_:2},1024))),128))],64)}}},st=A(Ae,[["__scopeId","data-v-ba383226"]]),We={class:"custom-select"},Ke={class:"options-wrapper"},Fe=["onClick"],Ge={style:{"margin-left":"20px"}},He={__name:"SelectChange",props:{options:{type:Array,default:()=>[{value:"1",label:"选项1"},{value:"2",label:"选项2"},{value:"3",label:"选项3"}]},inputWidth:{type:String,default:"240px"}},emits:["update:value"],setup(t,{emit:n}){const v=t,m=N(""),_=N(!1),L=n,P=W(()=>v.options.filter(k=>k.label.includes(m.value))),w=k=>{m.value=k.label,_.value=!1,L("update:value",k.value)};return(k,b)=>{const l=C("el-input"),s=C("el-popover");return a(),d("div",We,[f(s,{visible:_.value,placement:"bottom",width:t.inputWidth},{reference:g(()=>[f(l,{modelValue:m.value,"onUpdate:modelValue":b[0]||(b[0]=i=>m.value=i),clearable:"",placeholder:"请选择",style:ee({width:t.inputWidth}),onClick:b[1]||(b[1]=i=>_.value=!_.value),onClear:b[2]||(b[2]=i=>L("update:value","")),class:B({focused:_.value})},null,8,["modelValue","style","class"])]),default:g(()=>[e("div",Ke,[(a(!0),d($,null,T(P.value,i=>(a(),d("div",{key:i.value,class:B(["option-item",{selected:m.value===i.value}]),onClick:y=>w(i)},[e("div",Ge,r(i.label),1)],10,Fe))),128))])]),_:1},8,["visible","width"])])}}},ot=A(He,[["__scopeId","data-v-382ee882"]]);export{ot as M,st as S,tt as a,O as b,q as c,Ze as d,et as o,M as t};
